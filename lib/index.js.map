{"version":3,"file":"index.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGwC;AACrB;AAC0C;AACT;AACE;AACD;AAClB;AACW;AACA;AACY;AACT;AACN;AAE3C,MAAMc,GAAG,GAAIC,KAAK,IAAK;EACrB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,+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oB,4BAA4B;AAChD;AACA;AACA;AACA;AACA;AACA,qBAAqB,6BAA6B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACnFa;;AAEb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACjCa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACTa;;AAEb;AACA;AACA,cAAc,KAAwC,GAAG,sBAAiB,GAAG,CAAI;AACjF;AACA;AACA;AACA;AACA;;;;;;;;;;;ACTa;;AAEb;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,yDAAyD;AACzD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC5Da;;AAEb;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACbA;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,aAAa,GAAG;AAChB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;AACA,yBAAyB,kBAAkB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gCAAgC;AAChC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,kBAAkB;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,4CAA4C,YAAY,EAAE,eAAe;AACzE;AACA;AACA,KAAK;AACL;AACA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,8CAA8C,YAAY,GAAG,eAAe;AAC5E,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe,SAAS;AACxB;AACA;AACA;AACA,yBAAyB,sBAAsB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA,wCAAwC,MAAM,QAAQ,WAAW;AACjE;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,gCAAgC;AAClG;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,0BAA0B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,IAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,UAAU,GAAG,IAAI;AACrD;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,IAAI,EAAE,OAAO,EAAE,uBAAuB;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,mBAAmB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,0BAA0B;AACxC;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,8CAA8C,WAAW;AACzD,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,OAAO;AAC1D;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2CAA2C,IAAI,wBAAwB;AACtG;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,gCAAgC;AAChC,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,YAAY,0BAA0B;AACtC;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,YAAY,0BAA0B;AACtC;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;AACL,kCAAkC,eAAe;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,UAAU,gBAAgB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,iCAAiC;AAC5C;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;AACN;AACA,wBAAwB,sCAAsC;AAC9D;AACA,GAAG;AACH;AACA;AACA,UAAU,uCAAuC;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,aAAa;AACb,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA,iCAAiC;AACjC,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK,IAAI,IAAI;AACpC;AACA;AACA;AACA,2CAA2C;AAC3C,uBAAuB,SAAS,GAAG,qBAAqB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,gBAAgB,gBAAgB,GAAG,IAAI;AACvC;AACA,cAAc,gBAAgB,KAAK,cAAc,EAAE,IAAI;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,SAAS;AACtB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ,2DAA2D,mBAAmB;AACnG;AACA,8CAA8C;AAC9C,6BAA6B,SAAS,oBAAoB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,uCAAuC;AAC/E;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,4BAA4B;AAC1E;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iDAAiD,OAAO;AACxE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,uBAAuB;AACtE;AACA;AACA;AACA;AACA;AACA,wCAAwC,uBAAuB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,4CAA4C,uBAAuB;AACnE;AACA,oDAAoD,wBAAwB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qBAAqB,eAAe,mBAAmB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,eAAe;AACf;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA,YAAY,uCAAuC;AACnD,0BAA0B,OAAO,EAAE,OAAO,GAAG,SAAS,IAAI,IAAI;AAC9D;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iDAAiD,iCAAiC;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,uCAAuC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sBAAsB,EAAE,OAAO,EAAE,OAAO,EAAE,6BAA6B;AACtG,sBAAsB,0BAA0B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,8CAA8C;AACpE;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,0DAA0D,MAAM;AAChE;AACA;AACA;AACA;AAOE;AACF;;;;;;;UCrgDA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;;;;;;;;;;;;;;;;;;;;;;;ACA0B;AACL;AACG;AACqC;AACC;AACvB;AAEvC,MAAME,8BAA8B,GAAIxP,KAAK,IAAK;EAEhD,oBACEf,0DAAA,CAAC0I,uEAAa,qBACZ1I,0DAAA,CAACE,sEAAc,qBACbF,0DAAA,CAACc,4CAAG,EAAKC,KAAQ,CACH,CACH,CAAC;AAEpB,CAAC;AAEY;AACb,iEAAewP,8BAA8B,E","sources":["webpack://sariska-collaborative-annotation-sdk/webpack/universalModuleDefinition","webpack://sariska-collaborative-annotation-sdk/./src/App.js","webpack://sariska-collaborative-annotation-sdk/./src/channel/CreateChannel.js","webpack://sariska-collaborative-annotation-sdk/./src/components/Canvas/index.js","webpack://sariska-collaborative-annotation-sdk/./src/components/DrawingBoard/index.js","webpack://sariska-collaborative-annotation-sdk/./src/components/Message/index.js","webpack://sariska-collaborative-annotation-sdk/./src/config.js","webpack://sariska-collaborative-annotation-sdk/./src/constants/index.js","webpack://sariska-collaborative-annotation-sdk/./src/context/socket/SocketContext.js","webpack://sariska-collaborative-annotation-sdk/./src/context/socket/SocketProvider.js","webpack://sariska-collaborative-annotation-sdk/./src/context/store/StoreContext.js","webpack://sariska-collaborative-annotation-sdk/./src/context/store/StoreProvider.js","webpack://sariska-collaborative-annotation-sdk/./src/hooks/UseEventHandler.js","webpack://sariska-collaborative-annotation-sdk/./src/hooks/useOnDraw.js","webpack://sariska-collaborative-annotation-sdk/./src/hooks/useSticker.js","webpack://sariska-collaborative-annotation-sdk/./src/store/action/room.js","webpack://sariska-collaborative-annotation-sdk/./src/store/action/types.js","webpack://sariska-collaborative-annotation-sdk/./src/store/action/user.js","webpack://sariska-collaborative-annotation-sdk/./src/store/index.js","webpack://sariska-collaborative-annotation-sdk/./src/store/initialState/index.js","webpack://sariska-collaborative-annotation-sdk/./src/store/reducer/index.js","webpack://sariska-collaborative-annotation-sdk/./src/store/reducer/room.js","webpack://sariska-collaborative-annotation-sdk/./src/store/reducer/user.js","webpack://sariska-collaborative-annotation-sdk/./src/utils/index.js","webpack://sariska-collaborative-annotation-sdk/./src/App.css","webpack://sariska-collaborative-annotation-sdk/./src/index.css","webpack://sariska-collaborative-annotation-sdk/./node_modules/css-loader/dist/runtime/api.js","webpack://sariska-collaborative-annotation-sdk/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://sariska-collaborative-annotation-sdk/./src/App.css?d9cd","webpack://sariska-collaborative-annotation-sdk/./src/index.css?cfe4","webpack://sariska-collaborative-annotation-sdk/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://sariska-collaborative-annotation-sdk/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://sariska-collaborative-annotation-sdk/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://sariska-collaborative-annotation-sdk/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://sariska-collaborative-annotation-sdk/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://sariska-collaborative-annotation-sdk/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://sariska-collaborative-annotation-sdk/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"React\",\"root\":\"React\"}","webpack://sariska-collaborative-annotation-sdk/./node_modules/phoenix/priv/static/phoenix.mjs","webpack://sariska-collaborative-annotation-sdk/webpack/bootstrap","webpack://sariska-collaborative-annotation-sdk/webpack/runtime/compat get default export","webpack://sariska-collaborative-annotation-sdk/webpack/runtime/define property getters","webpack://sariska-collaborative-annotation-sdk/webpack/runtime/hasOwnProperty shorthand","webpack://sariska-collaborative-annotation-sdk/webpack/runtime/make namespace object","webpack://sariska-collaborative-annotation-sdk/webpack/runtime/nonce","webpack://sariska-collaborative-annotation-sdk/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"sariska-collaborative-annotation-sdk\", [\"React\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sariska-collaborative-annotation-sdk\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"sariska-collaborative-annotation-sdk\"] = factory(root[\"React\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE_react__) => {\nreturn ","// import React, { useState } from 'react';\r\n// import './App.css';\r\n// import SocketProvider from './context/socket/SocketProvider';\r\n// import CreateChannel from './channel/CreateChannel';\r\n// import UseEventHandler from './hooks/UseEventHandler';\r\n// import DrawingBoard from './components/DrawingBoard';\r\n// import { useStore } from './store';\r\n// import { setRoom } from './store/action/room';\r\n// import { setUser } from './store/action/user';\r\n// import { SET_ROOM, SET_USER } from './store/action/types';\r\n// import { clearCanvas, onDraw } from './utils';\r\n// import Message from './components/Message';\r\n// import { useSticker } from './hooks/useSticker';\r\n\r\n// const App = (props)=> {\r\n//   const [messages, setMessages] = useState([]);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [canvasCtx, setCanvasCtx] = useState(null);\r\n//   const roomName = 'sariska1';\r\n//   const {users, dispatch} = useStore();\r\n\r\n//   const { selectedEmoji, setSelectedEmoji, onMouseDown: onEmojiMouseDown } = useSticker(pushMessage, rtcChannel); // Use emoji hook\r\n//   const emojiPositions = useSticker.emojiPositions; // Access emoji positions from useEmoji\r\n\r\n  \r\n//   const rtcChannel = CreateChannel(`rtc:${roomName}`, {});\r\n  \r\n//   UseEventHandler(rtcChannel, 'ping', setLoading, message => {\r\n//     console.info('ping', message)\r\n//   })\r\n\r\n//   UseEventHandler(rtcChannel, 'user_joined', setLoading, async (response) => {\r\n//     const {room, user} = response;\r\n//     let userDetails = {id : user.id, name: user.name};\r\n//     let roomDetails = {session_id : room.session_id, created_by: room.created_by, inserted_at: room.inserted_at};\r\n//     dispatch(setRoom(SET_ROOM, roomDetails));\r\n//     dispatch(setUser(SET_USER, userDetails));\r\n//   })\r\n\r\n//   UseEventHandler(rtcChannel, \"presence_state\", setLoading, (response) => {\r\n//     console.log('presences_state', response);\r\n//   })\r\n\r\n//   UseEventHandler(rtcChannel, \"presence_diff\",setLoading, (response) => {\r\n//     console.log('presence_diff', response);\r\n//   })\r\n\r\n//   UseEventHandler(rtcChannel, 'new_message', setLoading, message => {\r\n//     let content = JSON.parse(message.content);\r\n//     // if(props.content){\r\n//     //   return message;\r\n//     // }else{\r\n\r\n//         if(Object.keys(content.ctx).length){\r\n//         onDraw(content);\r\n//       }else{\r\n//         content.ctx = canvasCtx;\r\n//         onDraw(content);\r\n//       }\r\n//       setMessages(messages => [...messages, message])\r\n//     //}\r\n//     // }\r\n//   });\r\n\r\n//   UseEventHandler(rtcChannel, 'archived_message', setLoading, message => {\r\n//     setMessages(messages => [...messages, message])\r\n//   });\r\n\r\n//   const pushMessage = ( content, channel )=>{\r\n//     const new_message = {\r\n//       created_by_name: users.user.name,  \r\n//       x: \"uu\", \r\n//       y: { x: \"ghhg\"}\r\n//     };\r\n//     new_message['content'] = content;\r\n//     channel.push('new_message', new_message);\r\n//   };\r\n\r\n//   const handleSendEmoji = () => {\r\n    \r\n//       // Get canvas dimensions (assuming DrawingBoard provides them)\r\n//         const canvasWidth = DrawingBoard.getCanvasWidth();\r\n//         const canvasHeight = DrawingBoard.getCanvasHeight();\r\n    \r\n//         // Send emoji data over the channel\r\n//         const emojiData = {\r\n//           type: 'emoji',\r\n//           emoji: selectedEmoji,\r\n//           // Calculate relative position based on canvas size and emojiPositions\r\n//           position: {\r\n//             x: (emojiPositions[emojiPositions.length - 1].position.x / canvasWidth) * 100, // Percentage for network transmission\r\n//             y: (emojiPositions[emojiPositions.length - 1].position.y / canvasHeight) * 100,\r\n//           },\r\n//         };\r\n    \r\n//         pushMessage(JSON.stringify(emojiData), rtcChannel);\r\n    \r\n//         // Clear selection and potentially update UI (optional)\r\n//         setSelectedEmoji(null);\r\n//       };\r\n    \r\n//   return (\r\n//       // <>\r\n//       //   {\r\n//       //     props.content ?\r\n//       //       <Message pushMessage={pushMessage} content={props.content} />\r\n//       //       :\r\n//             <DrawingBoard\r\n//               inputProps={props}\r\n//               pushMessage={pushMessage} \r\n//               loading={loading}\r\n//               channel={rtcChannel}\r\n//               setCanvasCtx={setCanvasCtx}\r\n//               selectedEmoji={selectedEmoji}\r\n//               setSelectedEmoji={setSelectedEmoji}\r\n//               onEmojiMouseDown={onEmojiMouseDown}\r\n//               emojiPositions={emojiPositions}\r\n//             />\r\n//   );\r\n// }\r\n\r\n// export default App;\r\n\r\n\r\n// import React, { useState } from 'react';\r\n// import './App.css';\r\n// import SocketProvider from './context/socket/SocketProvider';\r\n// import CreateChannel from './channel/CreateChannel';\r\n// import UseEventHandler from './hooks/UseEventHandler';\r\n// import DrawingBoard from './components/DrawingBoard';\r\n// import { useStore } from './store';\r\n// import { setRoom } from './store/action/room';\r\n// import { setUser } from './store/action/user';\r\n// import { SET_ROOM, SET_USER } from './store/action/types';\r\n// // import { clearCanvas, onDraw, onSticker } from './utils';\r\n// import { clearCanvas, onSticker } from './utils';\r\n// import Message from './components/Message';\r\n\r\n// const App = (props)=> {\r\n//   const [messages, setMessages] = useState([]);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [canvasCtx, setCanvasCtx] = useState(null);\r\n//   const roomName = 'sariska1';\r\n//   const {users, dispatch} = useStore();\r\n\r\n//   const rtcChannel = CreateChannel(`rtc:${roomName}`, {});\r\n  \r\n//   UseEventHandler(rtcChannel, 'ping', setLoading, message => {\r\n//     console.info('ping', message)\r\n//   })\r\n\r\n//   UseEventHandler(rtcChannel, 'user_joined', setLoading, async (response) => {\r\n//     const {room, user} = response;\r\n//     let userDetails = {id : user.id, name: user.name};\r\n//     let roomDetails = {session_id : room.session_id, created_by: room.created_by, inserted_at: room.inserted_at};\r\n//     dispatch(setRoom(SET_ROOM, roomDetails));\r\n//     dispatch(setUser(SET_USER, userDetails));\r\n//   })\r\n\r\n//   UseEventHandler(rtcChannel, \"presence_state\", setLoading, (response) => {\r\n//     console.log('presences_state', response);\r\n//   })\r\n\r\n//   UseEventHandler(rtcChannel, \"presence_diff\",setLoading, (response) => {\r\n//     console.log('presence_diff', response);\r\n//   })\r\n\r\n//   UseEventHandler(rtcChannel, 'new_message', setLoading, message => {\r\n//     let content = JSON.parse(message.content);\r\n//     // if(props.content){\r\n//     //   return message;\r\n//     // }else{\r\n//     if(content.type === 'emoji' && content.position){\r\n//         onSticker(content);\r\n//     }\r\n//     // else{\r\n//       // if(Object.keys(content.ctx).length){\r\n//       //   onDraw(content);\r\n//       // }else{\r\n//       //   content.ctx = canvasCtx;\r\n//       //   onDraw(content);\r\n//       // }\r\n//     // }\r\n//     setMessages(messages => [...messages, message])\r\n\r\n//   });\r\n\r\n//   UseEventHandler(rtcChannel, 'archived_message', setLoading, message => {\r\n//     setMessages(messages => [...messages, message])\r\n//   });\r\n\r\n//   const pushMessage = ( content, channel )=>{\r\n//     const new_message = {\r\n//       created_by_name: users.user.name,  \r\n//       x: \"uu\", \r\n//       y: { x: \"ghhg\"}\r\n//     };\r\n//     new_message['content'] = content;\r\n//     channel.push('new_message', new_message);\r\n//   };\r\n\r\n//   return (\r\n//       // <>\r\n//       //   {\r\n//       //     props.content ?\r\n//       //       <Message pushMessage={pushMessage} content={props.content} />\r\n//       //       :\r\n\r\n//             <DrawingBoard\r\n//               inputProps={props}\r\n//               pushMessage={pushMessage} \r\n//               loading={loading}\r\n//               channel={rtcChannel}\r\n//               setCanvasCtx={setCanvasCtx}\r\n//             />\r\n//       //   }\r\n//       // </>\r\n//   );\r\n// }\r\n\r\n// export default App;\r\n\r\n\r\nimport React, { useState } from 'react';\r\nimport './App.css';\r\nimport SocketProvider from './context/socket/SocketProvider';\r\nimport CreateChannel from './channel/CreateChannel';\r\nimport UseEventHandler from './hooks/UseEventHandler';\r\nimport DrawingBoard from './components/DrawingBoard';\r\nimport { useStore } from './store';\r\nimport { setRoom } from './store/action/room';\r\nimport { setUser } from './store/action/user';\r\nimport { SET_ROOM, SET_USER } from './store/action/types';\r\nimport { clearCanvas, onSticker } from './utils';\r\nimport Message from './components/Message';\r\n\r\nconst App = (props) => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [canvasCtx, setCanvasCtx] = useState(null);\r\n  const roomName = 'sariska1';\r\n  const { users, dispatch } = useStore();\r\n\r\n  const rtcChannel = CreateChannel(`rtc:${roomName}`, {});\r\n  \r\n  UseEventHandler(rtcChannel, 'ping', setLoading, message => {\r\n    console.info('ping', message);\r\n  });\r\n\r\n  UseEventHandler(rtcChannel, 'user_joined', setLoading, async (response) => {\r\n    const { room, user } = response;\r\n    const userDetails = { id: user.id, name: user.name };\r\n    const roomDetails = { session_id: room.session_id, created_by: room.created_by, inserted_at: room.inserted_at };\r\n    dispatch(setRoom(SET_ROOM, roomDetails));\r\n    dispatch(setUser(SET_USER, userDetails));\r\n  });\r\n\r\n  UseEventHandler(rtcChannel, \"presence_state\", setLoading, (response) => {\r\n    console.log('presence_state', response);\r\n  });\r\n\r\n  UseEventHandler(rtcChannel, \"presence_diff\", setLoading, (response) => {\r\n    console.log('presence_diff', response);\r\n  });\r\n\r\n  UseEventHandler(rtcChannel, 'new_message', setLoading, message => {\r\n    const content = JSON.parse(message.content);\r\n    if (content.type === 'emoji' && content.position) {\r\n      onSticker({\r\n        ctx: canvasCtx,\r\n        sticker: content.emoji,\r\n        position: {\r\n          x: (content.position.x / content.canvasWidth) * canvasCtx.canvas.width,\r\n          y: (content.position.y / content.canvasHeight) * canvasCtx.canvas.height\r\n        },\r\n        scale: 1\r\n      });\r\n    } else{\r\n      if(Object.keys(content.ctx).length){\r\n        onDraw(content);\r\n      }else{\r\n        content.ctx = canvasCtx;\r\n        onDraw(content);\r\n      }\r\n    }\r\n    setMessages(messages => [...messages, message]);\r\n  });\r\n\r\n  UseEventHandler(rtcChannel, 'archived_message', setLoading, message => {\r\n    setMessages(messages => [...messages, message]);\r\n  });\r\n\r\n  const pushMessage = (content, channel) => {\r\n    const new_message = {\r\n      created_by_name: users.user.name,  \r\n      x: \"uu\", \r\n      y: { x: \"ghhg\" }\r\n    };\r\n    new_message['content'] = content;\r\n    channel.push('new_message', new_message);\r\n  };\r\n\r\n  return (\r\n    <DrawingBoard\r\n      inputProps={props}\r\n      pushMessage={pushMessage}\r\n      loading={loading}\r\n      channel={rtcChannel}\r\n      setCanvasCtx={setCanvasCtx}\r\n    />\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport SocketContext from '../context/socket/SocketContext'\r\n\r\nconst CreateChannel = (topic, params={}) => {\r\n    const socket = useContext(SocketContext);\r\n    const [channel, setChannel] = useState(null);\r\n    useEffect(()=>{\r\n        if(!socket){\r\n            return;\r\n        }\r\n        const ch = socket.channel(topic, params);\r\n        ch.join()\r\n            .receive('ignore', () => console.log('Access Denied.'))\r\n            .receive('ok', () => console.log('Access granted!'))\r\n            .receive('timeout', () => console.log('Timeout.'));\r\n        \r\n        setChannel(ch);\r\n\r\n        return () => {\r\n            if(ch){\r\n                ch.leave();\r\n            }\r\n        }\r\n    },[socket])\r\n\r\n    return (\r\n        channel\r\n    )\r\n}\r\n\r\nexport default CreateChannel","\r\n// import React from \"react\";\r\n// import { useOnDraw } from \"../../hooks/useOnDraw\";\r\n// import { useSticker } from \"../../hooks/useSticker\";\r\n\r\n// const Canvas = ({\r\n//   width,\r\n//   height,\r\n//   pushMessage,\r\n//   channel,\r\n//   setCanvasCtx,\r\n//   inputProps,\r\n// }) => {\r\n//   const { children, ...otherProps } = inputProps;\r\n//   const { setCanvasRef, onMouseDown, setSelectedSticker } = useOnDraw(\r\n//     pushMessage,\r\n//     channel,\r\n//     setCanvasCtx,\r\n//     otherProps\r\n//   );\r\n\r\n//   const {\r\n//     toggleEmoji,\r\n//     positions,\r\n//     setStickerCanvasRef,\r\n//     selectedEmoji,\r\n//     setSelectedEmoji,\r\n//     onMouseClick,\r\n//   } = useSticker(pushMessage, channel, setCanvasCtx, otherProps);\r\n\r\n//   const ref = otherProps.useSticker ? setStickerCanvasRef : setCanvasRef;\r\n\r\n//   const canvasStyle = {\r\n//     position: \"absolute\",\r\n//     zIndex: otherProps.zIndex,\r\n//     background: \"none\",\r\n//   };\r\n//   return (\r\n//     <>\r\n//       <canvas\r\n//         width={width}\r\n//         height={height}\r\n//         style={canvasStyle}\r\n//         ref={setCanvasRef}\r\n//         onMouseDown={otherProps.useSticker ? onMouseClick : onMouseDown} \r\n//         // onMouseDown={onMouseDown}\r\n//       />\r\n//       {children}\r\n//     </>\r\n//   );\r\n// };\r\n\r\n// export default Canvas;\r\n\r\n\r\nimport React from \"react\";\r\nimport { useSticker } from \"../../hooks/useSticker\";\r\nimport { useOnDraw } from \"../../hooks/useOnDraw\";\r\n\r\nconst Canvas = ({\r\n  width,\r\n  height,\r\n  pushMessage,\r\n  channel,\r\n  setCanvasCtx,\r\n  inputProps,\r\n}) => {\r\n  const { children, ...otherProps } = inputProps;\r\n\r\n  const { setCanvasRef, onMouseDown, handleDraw} = useOnDraw(\r\n        pushMessage,\r\n        channel,\r\n        setCanvasCtx,\r\n        otherProps\r\n      );\r\n  \r\n  // Use the useSticker hook\r\n  const {\r\n    toggleEmoji,\r\n    positions,\r\n    setStickerCanvasRef,\r\n    selectedEmoji,\r\n    setSelectedEmoji,\r\n    handleClick,\r\n    // onMouseClick,\r\n  } = useSticker(pushMessage, channel, setCanvasCtx, otherProps);\r\n\r\n  const ref = (ref) => {\r\n    if (ref) {\r\n      if (handleDraw) {\r\n        setCanvasRef(ref);\r\n      } else {\r\n        setStickerCanvasRef(ref);\r\n      }\r\n    }\r\n  };\r\n  \r\n  const canvasStyle = {\r\n    position: \"absolute\",\r\n    zIndex: otherProps.zIndex,\r\n    background: \"none\",\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <canvas\r\n        width={width}\r\n        height={height}\r\n        style={canvasStyle}\r\n        ref={ref}\r\n        onMouseDown={onMouseDown} \r\n        onClick={handleClick}\r\n      />\r\n      {children}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Canvas;\r\n","// import React, { useState } from 'react'\r\n// import { useStore } from '../../store';\r\n// import Canvas from '../Canvas';\r\n\r\n// const DrawingBoard = ({\r\n//     pushMessage,\r\n//     channel,\r\n//     setCanvasCtx,\r\n//     loading,\r\n//     inputProps,\r\n//     // onMouseDown,\r\n//     // onMouseClick,\r\n//     setStickerCanvasRef,\r\n    \r\n// }) => {\r\n//     const [point, setPoint] = useState({});\r\n//     const {\r\n//       users: { user },\r\n//       rooms: { room },\r\n//     } = useStore();\r\n\r\n//     return (\r\n//         <div>\r\n//         <Canvas \r\n//             width={inputProps.width}\r\n//             height={inputProps.height}\r\n//             pushMessage={pushMessage}\r\n//             channel={channel}\r\n//             setCanvasCtx={setCanvasCtx}\r\n//             inputProps={inputProps}\r\n//             // onMouseDown={onMouseDown}\r\n//             // onMouseClick={onMouseClick}\r\n//             setStickerCanvasRef={setStickerCanvasRef}\r\n//           />\r\n//        </div>\r\n//     )\r\n// }\r\n\r\n// export default DrawingBoard\r\n\r\n\r\nimport React from 'react';\r\nimport { useSticker } from '../../hooks/useSticker';\r\nimport Canvas from '../Canvas';\r\nimport { useStore } from '../../store';\r\nimport { useOnDraw } from './../../hooks/useOnDraw';\r\n\r\nconst DrawingBoard = ({\r\n    pushMessage,\r\n    channel,\r\n    setCanvasCtx,\r\n    loading,\r\n    inputProps,\r\n}) => {\r\n    // Use the useSticker hook\r\n    const {\r\n        positions,\r\n        toggleEmoji,\r\n        setStickerCanvasRef,\r\n        selectedEmoji,\r\n        setSelectedEmoji,\r\n    } = useSticker(pushMessage, channel, setCanvasCtx, inputProps);\r\n\r\n    return (\r\n        <div>\r\n            <Canvas \r\n                width={inputProps.width}\r\n                height={inputProps.height}\r\n                pushMessage={pushMessage}\r\n                channel={channel}\r\n                setCanvasCtx={setCanvasCtx}\r\n                inputProps={inputProps}\r\n                setStickerCanvasRef={setStickerCanvasRef}\r\n                positions={positions}\r\n                selectedEmoji={selectedEmoji}\r\n                // toggleEmoji={toggleEmoji}\r\n                setSelectedEmoji={setSelectedEmoji}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DrawingBoard;\r\n","// import React from 'react'\r\n// import useOnMessage from '../../hooks/useOnMessage'\r\n\r\n// const Message = ({pushMessage, content}) => {\r\n//     useOnMessage(pushMessage, content);\r\n//   return (\r\n//     null\r\n//   )\r\n// }\r\n\r\n// export default Message","export const SARISKA_API_KEY = process.env.REACT_APP_SARISKA_MEET_APP_API_KEY;\r\nexport const MESSAGING_API_SERVICE_HOST = `${process.env.REACT_APP_API_SERVICE_HOST}/api/v1/messaging`;\r\nexport const WEB_SOCKET_URL = `${process.env.REACT_APP_WEBSOCKET_SERVICE_HOST}/api/v1/messaging/websocket`;\r\nexport const SARISKA_WEBSITE = 'https://sariska.io';\r\nexport const SARISKA_COMPANY_NAME = 'Sariska.io';\r\n\r\n// export const SARISKA_API_SERVICE_HOST = process.env.NODE_ENV === 'development' ? 'https://api.dev.sariska.io' :  'https://api.sariska.io';\r\n// export const SARISKA_API_KEY = process.env.NODE_ENV === 'development' ? \"2ffd6f9497ce12122f30d5ec26f1ed923a8a47f98ebc2a8f2b\" : '27fd6f9e85c304447d3cc0fb31e7ba8062df58af86ac3f9437';\r\n\r\n// export const MESSAGING_API_SERVICE_HOST = process.env.NODE_ENV === 'development' ? 'http://localhost:4000/api/v1/messaging' ?? 'https://api.dev.sariska.io/api/v1/messaging' : 'https://api.sariska.io/api/v1/messaging';\r\n// export const WEB_SOCKET_URL = process.env.NODE_ENV === 'development' ? 'ws://localhost:4000/api/v1/messaging/websocket' ?? \"wss://api.dev.sariska.io/api/v1/messaging/websocket\" :  \"wss://api.sariska.io/api/v1/messaging/websocket\";\r\n// export const SARISKA_WEBSITE = 'https://sariska.io';\r\n// export const SARISKA_COMPANY_NAME = 'Sariska.io';","export const GENERATE_TOKEN_URL = `${process.env.REACT_APP_API_SERVICE_HOST}/api/v1/misc/generate-token`;\r\nexport const COMPANY_NAME = 'Sariska';\r\nexport const GET_PRESIGNED_URL = `${process.env.REACT_APP_API_SERVICE_HOST}/api/v1/misc/get-presigned`;","import { createContext } from \"react\";\r\n\r\nconst SocketContext = createContext();\r\n\r\nexport default SocketContext;","import React, { useEffect, useState } from 'react'\r\nimport { getToken, getUserId, getUserName } from '../../utils';\r\nimport { Socket } from 'phoenix';\r\nimport { WEB_SOCKET_URL } from '../../config';\r\nimport SocketContext from './SocketContext';\r\n\r\nconst SocketProvider = ({children}) => {\r\n  const [socket, setSocket] = useState(null);\r\n  let userName =  getUserName();\r\n  let userId = getUserId();\r\n\r\n  useEffect(()=>{\r\n    const fetchData = async() => {\r\n        const token = await getToken(userName, userId);\r\n        const params = {token};\r\n        const s = new Socket(WEB_SOCKET_URL, {params});\r\n        s.onOpen(() => console.log('connection open!'));\r\n        s.onError((e) => console.log('There was an error with the connection!', e));\r\n        s.onClose(() => {console.log('the connection dropped')});\r\n        s.connect();\r\n        setSocket(s);\r\n    }\r\n    fetchData();\r\n    return () => {\r\n        if(socket){\r\n            socket.disconnect();\r\n        }\r\n    }\r\n  },[]);\r\n  \r\n  return (\r\n    <SocketContext.Provider value={socket}>\r\n        {children}\r\n    </SocketContext.Provider>\r\n  )\r\n}\r\n\r\nexport default SocketProvider","import { createContext } from \"react\";\r\n\r\nconst StoreContext = createContext();\r\n\r\nexport default StoreContext;","import React, { useReducer } from \"react\"\r\nimport initialContextState from \"../../store/initialState\"\r\nimport { rootReducer } from \"../../store/reducer\";\r\nimport StoreContext from \"./StoreContext\";\r\n\r\nexport const StoreProvider = ({children}) => {\r\n    const [state, dispatch] = useReducer(rootReducer, initialContextState);\r\n    \r\n    return (\r\n        <StoreContext.Provider value={{\r\n            users: state.users,\r\n            rooms: state.rooms,\r\n            dispatch\r\n        }}>\r\n            {children}\r\n        </StoreContext.Provider>\r\n    )\r\n}","import React, { useEffect, useRef } from 'react'\r\n\r\nconst UseEventHandler = (channel, event, setLoading, handler) => {\r\n    const handle = useRef(handler);\r\n    handle.current = handler;\r\n    useEffect(()=>{\r\n        if(!channel){\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        const ref = channel.on(`${event}`, (message) => {\r\n            handle.current(message);\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => {\r\n            channel.off(event, ref);\r\n            setLoading(false);\r\n        }\r\n\r\n    },[channel, event]);\r\n}\r\n\r\nexport default UseEventHandler","import { useEffect, useRef, useState } from \"react\";\r\nimport { clearCanvas, computePointInCanvas, onDraw } from \"../utils\";\r\n\r\nexport function useOnDraw(\r\n    pushMessage,\r\n    channel,\r\n    setCanvasCtx,\r\n    otherProps\r\n    ){\r\n    const [annotations, setAnnotations] = useState([]);\r\n    const [isDrawing, setIsDrawing] = useState(false);\r\n\r\n    const canvasRef = useRef(null);\r\n    const prevPointRef = useRef()\r\n    const isDrawingRef = useRef(false);\r\n\r\n    const mouseMoveListenerRef = useRef(null);\r\n    const mouseUpListenerRef = useRef(null);\r\n\r\n    // const saveImage = () => {\r\n    //     console.log('saveImage')\r\n    //     const context = canvasRef.current.getContext('2d');\r\n    //     const image = new Image();\r\n    //     image.src = otherProps.imageUrl;\r\n    //     image.onload = () => {\r\n    //       // Draw the image onto the canvas\r\n    //       context.drawImage(image, 0, 0, 800, 600);\r\n    \r\n    //       // Draw the annotations onto the canvas\r\n    //       context.strokeStyle = otherProps?.lineColor;\r\n    //       context.lineWidth = otherProps?.lineWidth;\r\n    //       annotations.forEach((annotation, index) => {\r\n    //         if (index === 0) {\r\n    //           context.beginPath();\r\n    //           context.moveTo(annotation.x, annotation.y);\r\n    //         } else {\r\n    //           context.lineTo(annotation.x, annotation.y);\r\n    //           context.stroke();\r\n    //         }\r\n    //       });\r\n    \r\n    //       // Convert the canvas to an image and open it in a new tab\r\n    //       const imageDataUrl = canvasRef.current.toDataURL('image/png');\r\n    //       console.log('first imageDataUrl', imageDataUrl)\r\n    //       const newWindow = window.open('about:blank', 'image from canvas');\r\n    //       newWindow.document.write('<img src=\"' + imageDataUrl + '\" alt=\"Saved Annotation\" />');\r\n    //     };\r\n    //     // const canvas = canvasRef.current;\r\n    //     // const link = document.createElement('a');\r\n    //     // link.download = 'image_with_drawing.png';\r\n    //     // canvas.toBlob((blob) => {\r\n    //     //   const url = URL.createObjectURL(blob);\r\n    //     //   setDownloadUrl(url);\r\n    //     //   link.href = url;\r\n    //     //   link.click();\r\n    //     // });\r\n    //   };\r\n\r\n      console.log(\"Position of useOnDraw in staring\",annotations);\r\n\r\n    const handleDraw = ()=>{\r\n        if(!isDrawing){\r\n            setIsDrawing(true);\r\n        }else{\r\n            setIsDrawing(false);\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const ctx = canvasRef.current.getContext('2d');\r\n        const {parentCanvasRef, ...props} = otherProps;\r\n        parentCanvasRef.current = canvasRef.current;\r\n        setCanvasCtx(ctx);\r\n        \r\n        function initMouseMoveListener(){\r\n            const mouseMoveListener = (e) => {\r\n                if(isDrawingRef.current){\r\n                    const point = computePointInCanvas(e.clientX, e.clientY, canvasRef.current);\r\n                    let prevPoint = prevPointRef.current;\r\n                    if(onDraw) {\r\n                        onDraw({ctx, point, prevPoint, props});\r\n                        setAnnotations(annotations => ([...annotations, {ctx, point, prevPoint, props}]));\r\n                    }      \r\n                           console.log(\"Position of useOnDraw after position set :\",annotations);\r\n\r\n\r\n                    if(channel) {\r\n                        pushMessage(JSON.stringify({ctx, point, prevPoint, props}), channel);\r\n                    }\r\n                    prevPointRef.current = point;\r\n                }\r\n            }\r\n            mouseMoveListenerRef.current = mouseMoveListener;\r\n            window.addEventListener(\"mousemove\", mouseMoveListener);\r\n        }\r\n        function initMouseUpListener(){\r\n            const mouseUpListener=()=>{\r\n                isDrawingRef.current = false;\r\n                prevPointRef.current = null;\r\n            }\r\n            mouseUpListenerRef.current = mouseUpListener;\r\n            window.addEventListener('mouseup', mouseUpListener);\r\n        }\r\n        function removeMouseEventListeners(){\r\n            if(mouseMoveListenerRef.current){\r\n                window.removeEventListener('mousemove', mouseMoveListenerRef.current);\r\n            }\r\n            if(mouseUpListenerRef.current){\r\n                window.removeEventListener('mouseup', mouseUpListenerRef.current);\r\n            }\r\n        }\r\n\r\n        if(props.isParticipantAccess){\r\n            initMouseMoveListener();\r\n            initMouseUpListener();\r\n        }else{\r\n            if(props.isModerator){\r\n                initMouseMoveListener();\r\n                initMouseUpListener();\r\n            }\r\n        }\r\n        \r\n        if(props.isCanvasClear){\r\n            clearCanvas( ctx, props.width, props.height );\r\n        }\r\n\r\n        if(props.isImageSaved){\r\n            props.saveImage(annotations);\r\n        }\r\n        return ()=>{\r\n            if(props.isParticipantAccess){\r\n                removeMouseEventListeners();\r\n            }else{\r\n                if(props.isModerator){\r\n                    removeMouseEventListeners();\r\n                }\r\n            }\r\n        }\r\n    },[\r\n        onDraw, \r\n        channel,\r\n        otherProps.isCanvasClear,\r\n        otherProps.isImageSaved,\r\n        otherProps.lineColor\r\n    ]);\r\n\r\n    function setCanvasRef(ref){\r\n        if(!ref) return;\r\n        canvasRef.current = ref;\r\n    }\r\n    \r\n    function onMouseDown(e){\r\n        if(!isDrawing || !canvasRef.current) return;\r\n        const {parentCanvasRef, ...props} = otherProps;\r\n        isDrawingRef.current = true;\r\n        const ctx = canvasRef.current.getContext('2d');\r\n        const point = computePointInCanvas(e.clientX, e.clientY, canvasRef.current);\r\n        let prevPoint = prevPointRef.current;\r\n        setAnnotations(annotations => ([...annotations, {ctx, point, prevPoint, props}]));\r\n    }\r\n    console.log(\"Position of useOnDraw after onMouseDown : \",annotations);\r\n\r\n    \r\n    return {\r\n        setCanvasRef,\r\n        onMouseDown,\r\n        handleDraw,\r\n    };\r\n}","import { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { computePointInCanvas, onSticker } from \"../utils\";\r\n\r\nexport function useSticker(pushMessage, channel, setCanvasCtx, otherProps) {\r\n  const [emoji, setEmoji] = useState(false);\r\n  const [positions, setPositions] = useState([]);\r\n  const [selectedEmoji, setSelectedEmoji] = useState(\"😊\");\r\n\r\n  const canvasRef = useRef(null);\r\n  const prevPointRef = useRef();\r\n  const isStickRef = useRef(false);\r\n\r\n  const toggleEmoji = () => {\r\n    setEmoji((prev) => !prev);\r\n  };\r\n\r\n  const handleClick = useCallback((e) => {\r\n    const ctx = canvasRef.current?canvasRef.current.getContext(\"2d\"):null;\r\nconst { parentCanvasRef, ...props } = otherProps;\r\n\r\n    if (ctx) {\r\n      parentCanvasRef.current = canvasRef.current;\r\n      setCanvasCtx(ctx);\r\n    }\r\n\r\n    if (!emoji && canvasRef.current && e.target === canvasRef.current) {\r\n      // if (!emoji) {\r\n      const newEmojiPosition = computePointInCanvas(\r\n        e.clientX,\r\n        e.clientY,\r\n        canvasRef.current\r\n      );\r\n      console.log(\"Computed emoji position:\", newEmojiPosition);\r\n\r\n      isStickRef.current = true;\r\n\r\n      const stickerData = {\r\n        ctx,\r\n        sticker: selectedEmoji,\r\n        position: newEmojiPosition,\r\n        scale: 1,\r\n      };\r\n\r\n      if (onSticker) {\r\n        onSticker(stickerData);\r\n        setPositions((prevPositions) => [\r\n          ...prevPositions,\r\n          newEmojiPosition,\r\n        ]);\r\n      }\r\n\r\n      if (channel) {\r\n        const emojiData = {\r\n          type: \"emoji\",\r\n          emoji: selectedEmoji,\r\n          position: {\r\n            x: (newEmojiPosition.x / props.canvasWidth) * 100,\r\n            y: (newEmojiPosition.y / props.canvasHeight) * 100,\r\n          },\r\n        };\r\n\r\n        pushMessage(JSON.stringify(emojiData), channel);\r\n        setEmoji(false);\r\n      }\r\n\r\n      prevPointRef.current = newEmojiPosition;\r\n    }\r\n  }, [emoji, selectedEmoji, otherProps, onSticker, channel, setCanvasCtx]);\r\n\r\n  useEffect(() => {\r\n    if (canvasRef.current) {\r\n      canvasRef.current.addEventListener(\"click\", handleClick);\r\n    }\r\n\r\n    return () => {\r\n      if (canvasRef.current) {\r\n        canvasRef.current.removeEventListener(\"click\", handleClick);\r\n      }\r\n    };\r\n  }, [handleClick]);\r\n\r\n  useEffect(() => {\r\n    if (!emoji) {\r\n      window.addEventListener(\"click\", handleClick);\r\n    } else {\r\n      window.removeEventListener(\"click\", handleClick);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener(\"click\", handleClick);\r\n    };\r\n  }, [emoji, handleClick]);\r\n\r\n  const setStickerCanvasRef = useCallback((ref) => {\r\n    if (!ref) return;\r\n    canvasRef.current = ref;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"New Emoji Position:\", positions);\r\n  }, [positions]);\r\n\r\n  return {\r\n    positions,\r\n    toggleEmoji,\r\n    handleClick,\r\n    setStickerCanvasRef,\r\n    selectedEmoji,\r\n    setSelectedEmoji,\r\n  };\r\n}\r\n\r\n\r\n// import { useCallback, useEffect, useRef, useState } from \"react\";\r\n// import { computePointInCanvas, onSticker } from \"../utils\";\r\n\r\n// export function useSticker(\r\n//   pushMessage, \r\n//   channel,\r\n//   setCanvasCtx,\r\n//   otherProps\r\n// ) {\r\n//   const [emoji, setEmoji] = useState(false);\r\n//   const [positions, setPositions] = useState([]);\r\n//   const [selectedEmoji, setSelectedEmoji] = useState(\"😊\");\r\n\r\n//   const canvasRef = useRef(null);\r\n//   const prevPointRef = useRef();\r\n//   const isStickRef = useRef(false);\r\n\r\n//   const toggleEmoji = () => {\r\n//     if(!emoji){\r\n//       setEmoji(true);\r\n//     }else{\r\n//       setEmoji(false);\r\n//     }\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     const ctx = canvasRef.current?canvasRef.current.getContext(\"2d\"):null;\r\n//     const { parentCanvasRef, ...props } = otherProps;\r\n\r\n//     if (ctx) {\r\n//       parentCanvasRef.current = canvasRef.current;\r\n//       setCanvasCtx(ctx);\r\n//     }\r\n\r\n//     function handleClick(e) {\r\n//       console.log(\"Canvas click detected:\", e); // Log the click event\r\n\r\n//       if (emoji || !canvasRef.current) return;\r\n//       // if (!emoji) {\r\n//       const newEmojiPosition = computePointInCanvas(\r\n//         e.clientX,\r\n//         e.clientY,\r\n//         canvasRef.current\r\n//       );\r\n\r\n//       console.log(\"Computed emoji position:\", newEmojiPosition); // Log the computed position\r\n\r\n\r\n//       if (e.target === canvasRef.current) {\r\n//         isStickRef.current = true;\r\n\r\n//         const stickerData = {\r\n//           ctx,\r\n//           sticker: selectedEmoji,\r\n//           position: newEmojiPosition,\r\n//           scale: 1,\r\n//         };\r\n\r\n//         if (onSticker) {\r\n//           onSticker(stickerData);\r\n\r\n//           setPositions((prevPositions) => [\r\n//             ...prevPositions,\r\n//             newEmojiPosition,\r\n//           ]);\r\n//         }\r\n\r\n//         if (channel) {\r\n//           const emojiData = {\r\n//             type: \"emoji\",\r\n//             emoji: selectedEmoji,\r\n//             position: {\r\n//               x: (newEmojiPosition.x / props.canvasWidth) * 100,\r\n//               y: (newEmojiPosition.y / props.canvasHeight) * 100,\r\n//             },\r\n//           };\r\n\r\n//           pushMessage(JSON.stringify(emojiData), channel);\r\n//           setEmoji(false);\r\n//         }\r\n\r\n//         prevPointRef.current = newEmojiPosition;\r\n//       }\r\n    \r\n//     }\r\n\r\n//     if (canvasRef.current) {\r\n//       canvasRef.current.addEventListener(\"click\", handleClick);\r\n//     }\r\n\r\n//     return () => {\r\n//       if (canvasRef.current) {\r\n//         canvasRef.current.removeEventListener(\"click\", handleClick);\r\n//       }\r\n//     };\r\n//   }, [emoji, onSticker, channel, otherProps, setCanvasCtx, selectedEmoji]);\r\n\r\n//   useEffect(() => {\r\n//     if (!emoji) {\r\n//       document.addEventListener('click', handleClick);\r\n//     } else {\r\n//       document.removeEventListener('click', handleClick);\r\n//     }\r\n\r\n//     return () => {\r\n//       document.removeEventListener('click', handleClick);\r\n//     };\r\n//   }, [!emoji]);\r\n\r\n//   const setStickerCanvasRef = useCallback((ref) => {\r\n//     if (!ref) return;\r\n//     canvasRef.current = ref;\r\n//   }, []);\r\n\r\n//   useEffect(() => {\r\n//     console.log(\"New Emoji Position:\", positions);\r\n//   }, [positions]);\r\n\r\n//   return {\r\n//     positions,\r\n//     toggleEmoji,\r\n//     setStickerCanvasRef,\r\n//     selectedEmoji,\r\n//     setSelectedEmoji,\r\n//   };\r\n// }\r\n\r\n","import { renderAction } from \"../../utils\";\r\n\r\nexport const setRoom = (type, payload)=>renderAction( type, payload );\r\n\r\nexport const getRoom = (type, payload)=>renderAction( type, payload );","export const SET_ROOM = 'SET_ROOM';\r\nexport const GET_ROOM = 'GET_ROOM';\r\nexport const SET_USER = 'SET_USER';\r\nexport const GET_USER = 'GET_USER';\r\n","import { renderAction } from \"../../utils\";\r\n\r\nexport const setUser = (type, payload)=>renderAction( type, payload );\r\n\r\nexport const getUser = (type)=>renderAction( type );","import { useContext } from \"react\";\r\nimport StoreContext from \"../context/store/StoreContext\";\r\n\r\nexport const useStore = () => useContext(StoreContext);","\r\nimport { initialState as initialStateRoom } from \"../reducer/room\";\r\nimport { initialState as initialStateUser } from \"../reducer/user\";\r\n\r\nconst initialContextState = {\r\n    rooms: initialStateRoom,\r\n    users: initialStateUser\r\n}\r\n\r\nexport default initialContextState;","import {room as roomReducer} from './room';\r\nimport {user as userReducer} from './user';\r\n\r\nexport const rootReducer = ({\r\n    room,\r\n    user\r\n}, action) => {\r\n    return {\r\n        rooms: roomReducer(room, action),\r\n        users: userReducer(user, action)\r\n    };\r\n}","import { GET_ROOM, SET_ROOM } from \"../action/types\";\r\n\r\nexport const initialState = {\r\n    room: JSON.parse(localStorage.getItem('sariska-collaborative-room')) || {}\r\n}\r\n\r\nexport const room = (state = initialState, action) => {\r\n    switch(action.type){\r\n        case SET_ROOM:\r\n            localStorage.setItem(\"sariska-collaborative-room\", JSON.stringify(action.payload));\r\n            state.room = action.payload;\r\n            return {...state};\r\n        case GET_ROOM:\r\n            return {...state.room};\r\n        default:\r\n            return {...state};\r\n    }\r\n}","import { GET_USER, SET_USER } from \"../action/types\";\r\n\r\nexport const initialState = {\r\n    user: JSON.parse(localStorage.getItem('sariska-collaborative-user')) || {}\r\n}\r\n\r\nexport const user = (state = initialState, action) => {\r\n    switch(action.type){\r\n        case SET_USER:\r\n            localStorage.setItem(\"sariska-collaborative-user\", JSON.stringify(action.payload));\r\n            state.user = action.payload;\r\n            return {...state};\r\n        case GET_USER:\r\n            return state.user;\r\n        default:\r\n            return {...state};\r\n    }\r\n}","import { SARISKA_API_KEY } from \"../config\";\r\nimport { GENERATE_TOKEN_URL } from \"../constants\";\r\n\r\nexport function getUserId() {\r\n    let storedUserId = JSON.parse((localStorage.getItem('sariska-collaborative-userId')));\r\n    if(storedUserId){\r\n        return storedUserId;\r\n    }\r\n    const characters ='abcdefghijklmnopqrstuvwxyz0123456789';\r\n    function generateString(length) {\r\n        let result = ' ';\r\n        const charactersLength = characters.length;\r\n        for ( let i = 0; i < length; i++ ) {\r\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n        }\r\n        return result;\r\n    }\r\n    let userId = generateString(12).trim();\r\n    localStorage.setItem('sariska-collaborative-userId', JSON.stringify(userId));\r\n    return userId;\r\n} \r\n\r\nexport function getUserName() {\r\n    let storedUserName = JSON.parse((localStorage.getItem('sariska-collaborative-userName')));\r\n    if(storedUserName){\r\n        return storedUserName;\r\n    }\r\n    const characters ='abcdefghijklmnopqrstuvwxyz';\r\n    function generateString(length) {\r\n        let result = ' ';\r\n        const charactersLength = characters.length;\r\n        for ( let i = 0; i < length; i++ ) {\r\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n        }\r\n        return result;\r\n    }\r\n    const str = generateString(8).trim()\r\n    const strArr = str.match(/.{4}/g);\r\n    const userName = strArr.join(\"_\")\r\n    localStorage.setItem('sariska-collaborative-userName', JSON.stringify(userName));\r\n    return userName;\r\n} \r\n\r\nexport function getRoomId() {\r\n    let storedRoomId = JSON.parse((localStorage.getItem('sariska-collaborative-roomId')));\r\n    if(storedRoomId){\r\n        return storedRoomId;\r\n    }\r\n    const characters ='abcdefghijklmnopqrstuvwxyz0123456789';\r\n    function generateString(length) {\r\n        let result = ' ';\r\n        const charactersLength = characters.length;\r\n        for ( let i = 0; i < length; i++ ) {\r\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n        }\r\n        return result;\r\n    }\r\n    const roomId = generateString(9).trim();\r\n    localStorage.setItem('sariska-collaborative-roomId', JSON.stringify(roomId));\r\n    return roomId;\r\n} \r\n\r\nexport function getRoomName() {\r\n    let storedRoomName = JSON.parse((localStorage.getItem('sariska-collaborative-roomName')));\r\n    if(storedRoomName){\r\n        return storedRoomName;\r\n    }\r\n    const characters ='abcdefghijklmnopqrstuvwxyz';\r\n    function generateString(length) {\r\n        let result = ' ';\r\n        const charactersLength = characters.length;\r\n        for ( let i = 0; i < length; i++ ) {\r\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n        }\r\n        return result;\r\n    }\r\n    const str = generateString(9).trim()\r\n    const strArr = str.match(/.{3}/g);\r\n    const roomName = strArr.join(\"-\")\r\n    localStorage.setItem('sariska-collaborative-roomName', JSON.stringify(roomName));\r\n    return roomName;\r\n} \r\n\r\nexport const getToken = async (username, userId)=> {\r\n    const body = {\r\n        method: \"POST\",\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            apiKey: `${SARISKA_API_KEY}`, // enter your app secret,\r\n            user: {\r\n                id: userId,\r\n                name: username\r\n            },\r\n        })\r\n    };\r\n\r\n    try {\r\n        const response = await fetch(GENERATE_TOKEN_URL, body);\r\n        if (response.ok) {\r\n            const json = await response.json();\r\n            let token = json.token;\r\n            localStorage.setItem('sariska-colloborative-token', JSON.stringify(token));\r\n            return json.token;\r\n        } else {\r\n            console.log(response.status);\r\n        }\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n\r\n}\r\n\r\nexport const renderAction = (type, payload) => {\r\n    if(payload){\r\n        return {\r\n            type,\r\n            payload\r\n        }\r\n    }else{\r\n        return {\r\n            type\r\n        }\r\n    }\r\n}\r\n\r\nexport function drawLine(ctx, end, start, color, width) {\r\n    start = start ?? end;\r\n    ctx.beginPath();\r\n    ctx.lineWidth= width;\r\n    ctx.strokeStyle = color;\r\n    ctx.moveTo(start.x, start.y);\r\n    ctx.lineTo(end.x, end.y);\r\n    ctx.stroke();\r\n\r\n    ctx.fillStyle = color;\r\n    ctx.beginPath();\r\n    ctx.arc(start.x, start.y, 2, 0, 2 * Math.PI);\r\n    ctx.fill();\r\n}\r\n\r\nexport function onDraw (data) {\r\n    drawLine(\r\n        data.ctx, \r\n        data.point, \r\n        data.prevPoint, \r\n        data.props ? data.props.lineColor : undefined, \r\n        data.props ? data.props.lineWidth : undefined\r\n      );\r\n      \r\n}\r\nexport function pasteSticker(ctx, sticker, position, scale = 1) {\r\n    ctx.save();\r\n    ctx.translate(position.x, position.y);\r\n    ctx.scale(scale, scale);\r\n    ctx.font = `${24 * scale}px sans-serif`;\r\n    ctx.fillText(sticker, 0, 0);\r\n    ctx.restore();\r\n} \r\n\r\nexport function onSticker(data){\r\n    pasteSticker(data.ctx, data.sticker, data.position, data.scale);\r\n}\r\n\r\nexport function clearCanvas(ctx, width, height){\r\n    ctx.clearRect(0, 0, width, height)\r\n}\r\n\r\nexport function computePointInCanvas(clientX, clientY, refCurrent){\r\n    if(refCurrent){\r\n        const boundingRect = refCurrent.getBoundingClientRect();\r\n        return {\r\n            x: clientX - boundingRect.left,\r\n            y: clientY - boundingRect.top\r\n        }\r\n    }else{\r\n        return null;\r\n    }\r\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.App {\r\n  text-align: center;\r\n}\r\n\r\n.App-logo {\r\n  height: 40vmin;\r\n  pointer-events: none;\r\n}\r\n\r\n@media (prefers-reduced-motion: no-preference) {\r\n  .App-logo {\r\n    animation: App-logo-spin infinite 20s linear;\r\n  }\r\n}\r\n\r\n.App-header {\r\n  background-color: #282c34;\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: calc(10px + 2vmin);\r\n  color: white;\r\n}\r\n\r\n.App-link {\r\n  color: #61dafb;\r\n}\r\n\r\n@keyframes App-logo-spin {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/App.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAkB;AACpB;;AAEA;EACE,cAAc;EACd,oBAAoB;AACtB;;AAEA;EACE;IACE,4CAA4C;EAC9C;AACF;;AAEA;EACE,yBAAyB;EACzB,iBAAiB;EACjB,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,uBAAuB;EACvB,6BAA6B;EAC7B,YAAY;AACd;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE;IACE,uBAAuB;EACzB;EACA;IACE,yBAAyB;EAC3B;AACF\",\"sourcesContent\":[\".App {\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n.App-logo {\\r\\n  height: 40vmin;\\r\\n  pointer-events: none;\\r\\n}\\r\\n\\r\\n@media (prefers-reduced-motion: no-preference) {\\r\\n  .App-logo {\\r\\n    animation: App-logo-spin infinite 20s linear;\\r\\n  }\\r\\n}\\r\\n\\r\\n.App-header {\\r\\n  background-color: #282c34;\\r\\n  min-height: 100vh;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  font-size: calc(10px + 2vmin);\\r\\n  color: white;\\r\\n}\\r\\n\\r\\n.App-link {\\r\\n  color: #61dafb;\\r\\n}\\r\\n\\r\\n@keyframes App-logo-spin {\\r\\n  from {\\r\\n    transform: rotate(0deg);\\r\\n  }\\r\\n  to {\\r\\n    transform: rotate(360deg);\\r\\n  }\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `body {\r\n  margin: 0;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\r\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\r\n    sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\ncode {\r\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\r\n    monospace;\r\n}\r\n\r\niframe[style=\"position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; border: none; z-index: 2147483647;\"] {\r\n  pointer-events: none;\r\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/index.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,SAAS;EACT;;cAEY;EACZ,mCAAmC;EACnC,kCAAkC;AACpC;;AAEA;EACE;aACW;AACb;;AAEA;EACE,oBAAoB;AACtB\",\"sourcesContent\":[\"body {\\r\\n  margin: 0;\\r\\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\\r\\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\\r\\n    sans-serif;\\r\\n  -webkit-font-smoothing: antialiased;\\r\\n  -moz-osx-font-smoothing: grayscale;\\r\\n}\\r\\n\\r\\ncode {\\r\\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\\r\\n    monospace;\\r\\n}\\r\\n\\r\\niframe[style=\\\"position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; border: none; z-index: 2147483647;\\\"] {\\r\\n  pointer-events: none;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./App.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./App.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;","// js/phoenix/utils.js\nvar closure = (value) => {\n  if (typeof value === \"function\") {\n    return value;\n  } else {\n    let closure2 = function() {\n      return value;\n    };\n    return closure2;\n  }\n};\n\n// js/phoenix/constants.js\nvar globalSelf = typeof self !== \"undefined\" ? self : null;\nvar phxWindow = typeof window !== \"undefined\" ? window : null;\nvar global = globalSelf || phxWindow || global;\nvar DEFAULT_VSN = \"2.0.0\";\nvar SOCKET_STATES = { connecting: 0, open: 1, closing: 2, closed: 3 };\nvar DEFAULT_TIMEOUT = 1e4;\nvar WS_CLOSE_NORMAL = 1e3;\nvar CHANNEL_STATES = {\n  closed: \"closed\",\n  errored: \"errored\",\n  joined: \"joined\",\n  joining: \"joining\",\n  leaving: \"leaving\"\n};\nvar CHANNEL_EVENTS = {\n  close: \"phx_close\",\n  error: \"phx_error\",\n  join: \"phx_join\",\n  reply: \"phx_reply\",\n  leave: \"phx_leave\"\n};\nvar TRANSPORTS = {\n  longpoll: \"longpoll\",\n  websocket: \"websocket\"\n};\nvar XHR_STATES = {\n  complete: 4\n};\n\n// js/phoenix/push.js\nvar Push = class {\n  constructor(channel, event, payload, timeout) {\n    this.channel = channel;\n    this.event = event;\n    this.payload = payload || function() {\n      return {};\n    };\n    this.receivedResp = null;\n    this.timeout = timeout;\n    this.timeoutTimer = null;\n    this.recHooks = [];\n    this.sent = false;\n  }\n  /**\n   *\n   * @param {number} timeout\n   */\n  resend(timeout) {\n    this.timeout = timeout;\n    this.reset();\n    this.send();\n  }\n  /**\n   *\n   */\n  send() {\n    if (this.hasReceived(\"timeout\")) {\n      return;\n    }\n    this.startTimeout();\n    this.sent = true;\n    this.channel.socket.push({\n      topic: this.channel.topic,\n      event: this.event,\n      payload: this.payload(),\n      ref: this.ref,\n      join_ref: this.channel.joinRef()\n    });\n  }\n  /**\n   *\n   * @param {*} status\n   * @param {*} callback\n   */\n  receive(status, callback) {\n    if (this.hasReceived(status)) {\n      callback(this.receivedResp.response);\n    }\n    this.recHooks.push({ status, callback });\n    return this;\n  }\n  /**\n   * @private\n   */\n  reset() {\n    this.cancelRefEvent();\n    this.ref = null;\n    this.refEvent = null;\n    this.receivedResp = null;\n    this.sent = false;\n  }\n  /**\n   * @private\n   */\n  matchReceive({ status, response, _ref }) {\n    this.recHooks.filter((h) => h.status === status).forEach((h) => h.callback(response));\n  }\n  /**\n   * @private\n   */\n  cancelRefEvent() {\n    if (!this.refEvent) {\n      return;\n    }\n    this.channel.off(this.refEvent);\n  }\n  /**\n   * @private\n   */\n  cancelTimeout() {\n    clearTimeout(this.timeoutTimer);\n    this.timeoutTimer = null;\n  }\n  /**\n   * @private\n   */\n  startTimeout() {\n    if (this.timeoutTimer) {\n      this.cancelTimeout();\n    }\n    this.ref = this.channel.socket.makeRef();\n    this.refEvent = this.channel.replyEventName(this.ref);\n    this.channel.on(this.refEvent, (payload) => {\n      this.cancelRefEvent();\n      this.cancelTimeout();\n      this.receivedResp = payload;\n      this.matchReceive(payload);\n    });\n    this.timeoutTimer = setTimeout(() => {\n      this.trigger(\"timeout\", {});\n    }, this.timeout);\n  }\n  /**\n   * @private\n   */\n  hasReceived(status) {\n    return this.receivedResp && this.receivedResp.status === status;\n  }\n  /**\n   * @private\n   */\n  trigger(status, response) {\n    this.channel.trigger(this.refEvent, { status, response });\n  }\n};\n\n// js/phoenix/timer.js\nvar Timer = class {\n  constructor(callback, timerCalc) {\n    this.callback = callback;\n    this.timerCalc = timerCalc;\n    this.timer = null;\n    this.tries = 0;\n  }\n  reset() {\n    this.tries = 0;\n    clearTimeout(this.timer);\n  }\n  /**\n   * Cancels any previous scheduleTimeout and schedules callback\n   */\n  scheduleTimeout() {\n    clearTimeout(this.timer);\n    this.timer = setTimeout(() => {\n      this.tries = this.tries + 1;\n      this.callback();\n    }, this.timerCalc(this.tries + 1));\n  }\n};\n\n// js/phoenix/channel.js\nvar Channel = class {\n  constructor(topic, params, socket) {\n    this.state = CHANNEL_STATES.closed;\n    this.topic = topic;\n    this.params = closure(params || {});\n    this.socket = socket;\n    this.bindings = [];\n    this.bindingRef = 0;\n    this.timeout = this.socket.timeout;\n    this.joinedOnce = false;\n    this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n    this.pushBuffer = [];\n    this.stateChangeRefs = [];\n    this.rejoinTimer = new Timer(() => {\n      if (this.socket.isConnected()) {\n        this.rejoin();\n      }\n    }, this.socket.rejoinAfterMs);\n    this.stateChangeRefs.push(this.socket.onError(() => this.rejoinTimer.reset()));\n    this.stateChangeRefs.push(\n      this.socket.onOpen(() => {\n        this.rejoinTimer.reset();\n        if (this.isErrored()) {\n          this.rejoin();\n        }\n      })\n    );\n    this.joinPush.receive(\"ok\", () => {\n      this.state = CHANNEL_STATES.joined;\n      this.rejoinTimer.reset();\n      this.pushBuffer.forEach((pushEvent) => pushEvent.send());\n      this.pushBuffer = [];\n    });\n    this.joinPush.receive(\"error\", () => {\n      this.state = CHANNEL_STATES.errored;\n      if (this.socket.isConnected()) {\n        this.rejoinTimer.scheduleTimeout();\n      }\n    });\n    this.onClose(() => {\n      this.rejoinTimer.reset();\n      if (this.socket.hasLogger())\n        this.socket.log(\"channel\", `close ${this.topic} ${this.joinRef()}`);\n      this.state = CHANNEL_STATES.closed;\n      this.socket.remove(this);\n    });\n    this.onError((reason) => {\n      if (this.socket.hasLogger())\n        this.socket.log(\"channel\", `error ${this.topic}`, reason);\n      if (this.isJoining()) {\n        this.joinPush.reset();\n      }\n      this.state = CHANNEL_STATES.errored;\n      if (this.socket.isConnected()) {\n        this.rejoinTimer.scheduleTimeout();\n      }\n    });\n    this.joinPush.receive(\"timeout\", () => {\n      if (this.socket.hasLogger())\n        this.socket.log(\"channel\", `timeout ${this.topic} (${this.joinRef()})`, this.joinPush.timeout);\n      let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), this.timeout);\n      leavePush.send();\n      this.state = CHANNEL_STATES.errored;\n      this.joinPush.reset();\n      if (this.socket.isConnected()) {\n        this.rejoinTimer.scheduleTimeout();\n      }\n    });\n    this.on(CHANNEL_EVENTS.reply, (payload, ref) => {\n      this.trigger(this.replyEventName(ref), payload);\n    });\n  }\n  /**\n   * Join the channel\n   * @param {integer} timeout\n   * @returns {Push}\n   */\n  join(timeout = this.timeout) {\n    if (this.joinedOnce) {\n      throw new Error(\"tried to join multiple times. 'join' can only be called a single time per channel instance\");\n    } else {\n      this.timeout = timeout;\n      this.joinedOnce = true;\n      this.rejoin();\n      return this.joinPush;\n    }\n  }\n  /**\n   * Hook into channel close\n   * @param {Function} callback\n   */\n  onClose(callback) {\n    this.on(CHANNEL_EVENTS.close, callback);\n  }\n  /**\n   * Hook into channel errors\n   * @param {Function} callback\n   */\n  onError(callback) {\n    return this.on(CHANNEL_EVENTS.error, (reason) => callback(reason));\n  }\n  /**\n   * Subscribes on channel events\n   *\n   * Subscription returns a ref counter, which can be used later to\n   * unsubscribe the exact event listener\n   *\n   * @example\n   * const ref1 = channel.on(\"event\", do_stuff)\n   * const ref2 = channel.on(\"event\", do_other_stuff)\n   * channel.off(\"event\", ref1)\n   * // Since unsubscription, do_stuff won't fire,\n   * // while do_other_stuff will keep firing on the \"event\"\n   *\n   * @param {string} event\n   * @param {Function} callback\n   * @returns {integer} ref\n   */\n  on(event, callback) {\n    let ref = this.bindingRef++;\n    this.bindings.push({ event, ref, callback });\n    return ref;\n  }\n  /**\n   * Unsubscribes off of channel events\n   *\n   * Use the ref returned from a channel.on() to unsubscribe one\n   * handler, or pass nothing for the ref to unsubscribe all\n   * handlers for the given event.\n   *\n   * @example\n   * // Unsubscribe the do_stuff handler\n   * const ref1 = channel.on(\"event\", do_stuff)\n   * channel.off(\"event\", ref1)\n   *\n   * // Unsubscribe all handlers from event\n   * channel.off(\"event\")\n   *\n   * @param {string} event\n   * @param {integer} ref\n   */\n  off(event, ref) {\n    this.bindings = this.bindings.filter((bind) => {\n      return !(bind.event === event && (typeof ref === \"undefined\" || ref === bind.ref));\n    });\n  }\n  /**\n   * @private\n   */\n  canPush() {\n    return this.socket.isConnected() && this.isJoined();\n  }\n  /**\n   * Sends a message `event` to phoenix with the payload `payload`.\n   * Phoenix receives this in the `handle_in(event, payload, socket)`\n   * function. if phoenix replies or it times out (default 10000ms),\n   * then optionally the reply can be received.\n   *\n   * @example\n   * channel.push(\"event\")\n   *   .receive(\"ok\", payload => console.log(\"phoenix replied:\", payload))\n   *   .receive(\"error\", err => console.log(\"phoenix errored\", err))\n   *   .receive(\"timeout\", () => console.log(\"timed out pushing\"))\n   * @param {string} event\n   * @param {Object} payload\n   * @param {number} [timeout]\n   * @returns {Push}\n   */\n  push(event, payload, timeout = this.timeout) {\n    payload = payload || {};\n    if (!this.joinedOnce) {\n      throw new Error(`tried to push '${event}' to '${this.topic}' before joining. Use channel.join() before pushing events`);\n    }\n    let pushEvent = new Push(this, event, function() {\n      return payload;\n    }, timeout);\n    if (this.canPush()) {\n      pushEvent.send();\n    } else {\n      pushEvent.startTimeout();\n      this.pushBuffer.push(pushEvent);\n    }\n    return pushEvent;\n  }\n  /** Leaves the channel\n   *\n   * Unsubscribes from server events, and\n   * instructs channel to terminate on server\n   *\n   * Triggers onClose() hooks\n   *\n   * To receive leave acknowledgements, use the `receive`\n   * hook to bind to the server ack, ie:\n   *\n   * @example\n   * channel.leave().receive(\"ok\", () => alert(\"left!\") )\n   *\n   * @param {integer} timeout\n   * @returns {Push}\n   */\n  leave(timeout = this.timeout) {\n    this.rejoinTimer.reset();\n    this.joinPush.cancelTimeout();\n    this.state = CHANNEL_STATES.leaving;\n    let onClose = () => {\n      if (this.socket.hasLogger())\n        this.socket.log(\"channel\", `leave ${this.topic}`);\n      this.trigger(CHANNEL_EVENTS.close, \"leave\");\n    };\n    let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), timeout);\n    leavePush.receive(\"ok\", () => onClose()).receive(\"timeout\", () => onClose());\n    leavePush.send();\n    if (!this.canPush()) {\n      leavePush.trigger(\"ok\", {});\n    }\n    return leavePush;\n  }\n  /**\n   * Overridable message hook\n   *\n   * Receives all events for specialized message handling\n   * before dispatching to the channel callbacks.\n   *\n   * Must return the payload, modified or unmodified\n   * @param {string} event\n   * @param {Object} payload\n   * @param {integer} ref\n   * @returns {Object}\n   */\n  onMessage(_event, payload, _ref) {\n    return payload;\n  }\n  /**\n   * @private\n   */\n  isMember(topic, event, payload, joinRef) {\n    if (this.topic !== topic) {\n      return false;\n    }\n    if (joinRef && joinRef !== this.joinRef()) {\n      if (this.socket.hasLogger())\n        this.socket.log(\"channel\", \"dropping outdated message\", { topic, event, payload, joinRef });\n      return false;\n    } else {\n      return true;\n    }\n  }\n  /**\n   * @private\n   */\n  joinRef() {\n    return this.joinPush.ref;\n  }\n  /**\n   * @private\n   */\n  rejoin(timeout = this.timeout) {\n    if (this.isLeaving()) {\n      return;\n    }\n    this.socket.leaveOpenTopic(this.topic);\n    this.state = CHANNEL_STATES.joining;\n    this.joinPush.resend(timeout);\n  }\n  /**\n   * @private\n   */\n  trigger(event, payload, ref, joinRef) {\n    let handledPayload = this.onMessage(event, payload, ref, joinRef);\n    if (payload && !handledPayload) {\n      throw new Error(\"channel onMessage callbacks must return the payload, modified or unmodified\");\n    }\n    let eventBindings = this.bindings.filter((bind) => bind.event === event);\n    for (let i = 0; i < eventBindings.length; i++) {\n      let bind = eventBindings[i];\n      bind.callback(handledPayload, ref, joinRef || this.joinRef());\n    }\n  }\n  /**\n   * @private\n   */\n  replyEventName(ref) {\n    return `chan_reply_${ref}`;\n  }\n  /**\n   * @private\n   */\n  isClosed() {\n    return this.state === CHANNEL_STATES.closed;\n  }\n  /**\n   * @private\n   */\n  isErrored() {\n    return this.state === CHANNEL_STATES.errored;\n  }\n  /**\n   * @private\n   */\n  isJoined() {\n    return this.state === CHANNEL_STATES.joined;\n  }\n  /**\n   * @private\n   */\n  isJoining() {\n    return this.state === CHANNEL_STATES.joining;\n  }\n  /**\n   * @private\n   */\n  isLeaving() {\n    return this.state === CHANNEL_STATES.leaving;\n  }\n};\n\n// js/phoenix/ajax.js\nvar Ajax = class {\n  static request(method, endPoint, accept, body, timeout, ontimeout, callback) {\n    if (global.XDomainRequest) {\n      let req = new global.XDomainRequest();\n      return this.xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback);\n    } else {\n      let req = new global.XMLHttpRequest();\n      return this.xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback);\n    }\n  }\n  static xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback) {\n    req.timeout = timeout;\n    req.open(method, endPoint);\n    req.onload = () => {\n      let response = this.parseJSON(req.responseText);\n      callback && callback(response);\n    };\n    if (ontimeout) {\n      req.ontimeout = ontimeout;\n    }\n    req.onprogress = () => {\n    };\n    req.send(body);\n    return req;\n  }\n  static xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback) {\n    req.open(method, endPoint, true);\n    req.timeout = timeout;\n    req.setRequestHeader(\"Content-Type\", accept);\n    req.onerror = () => callback && callback(null);\n    req.onreadystatechange = () => {\n      if (req.readyState === XHR_STATES.complete && callback) {\n        let response = this.parseJSON(req.responseText);\n        callback(response);\n      }\n    };\n    if (ontimeout) {\n      req.ontimeout = ontimeout;\n    }\n    req.send(body);\n    return req;\n  }\n  static parseJSON(resp) {\n    if (!resp || resp === \"\") {\n      return null;\n    }\n    try {\n      return JSON.parse(resp);\n    } catch (e) {\n      console && console.log(\"failed to parse JSON response\", resp);\n      return null;\n    }\n  }\n  static serialize(obj, parentKey) {\n    let queryStr = [];\n    for (var key in obj) {\n      if (!Object.prototype.hasOwnProperty.call(obj, key)) {\n        continue;\n      }\n      let paramKey = parentKey ? `${parentKey}[${key}]` : key;\n      let paramVal = obj[key];\n      if (typeof paramVal === \"object\") {\n        queryStr.push(this.serialize(paramVal, paramKey));\n      } else {\n        queryStr.push(encodeURIComponent(paramKey) + \"=\" + encodeURIComponent(paramVal));\n      }\n    }\n    return queryStr.join(\"&\");\n  }\n  static appendParams(url, params) {\n    if (Object.keys(params).length === 0) {\n      return url;\n    }\n    let prefix = url.match(/\\?/) ? \"&\" : \"?\";\n    return `${url}${prefix}${this.serialize(params)}`;\n  }\n};\n\n// js/phoenix/longpoll.js\nvar arrayBufferToBase64 = (buffer) => {\n  let binary = \"\";\n  let bytes = new Uint8Array(buffer);\n  let len = bytes.byteLength;\n  for (let i = 0; i < len; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return btoa(binary);\n};\nvar LongPoll = class {\n  constructor(endPoint) {\n    this.endPoint = null;\n    this.token = null;\n    this.skipHeartbeat = true;\n    this.reqs = /* @__PURE__ */ new Set();\n    this.awaitingBatchAck = false;\n    this.currentBatch = null;\n    this.currentBatchTimer = null;\n    this.batchBuffer = [];\n    this.onopen = function() {\n    };\n    this.onerror = function() {\n    };\n    this.onmessage = function() {\n    };\n    this.onclose = function() {\n    };\n    this.pollEndpoint = this.normalizeEndpoint(endPoint);\n    this.readyState = SOCKET_STATES.connecting;\n    setTimeout(() => this.poll(), 0);\n  }\n  normalizeEndpoint(endPoint) {\n    return endPoint.replace(\"ws://\", \"http://\").replace(\"wss://\", \"https://\").replace(new RegExp(\"(.*)/\" + TRANSPORTS.websocket), \"$1/\" + TRANSPORTS.longpoll);\n  }\n  endpointURL() {\n    return Ajax.appendParams(this.pollEndpoint, { token: this.token });\n  }\n  closeAndRetry(code, reason, wasClean) {\n    this.close(code, reason, wasClean);\n    this.readyState = SOCKET_STATES.connecting;\n  }\n  ontimeout() {\n    this.onerror(\"timeout\");\n    this.closeAndRetry(1005, \"timeout\", false);\n  }\n  isActive() {\n    return this.readyState === SOCKET_STATES.open || this.readyState === SOCKET_STATES.connecting;\n  }\n  poll() {\n    this.ajax(\"GET\", \"application/json\", null, () => this.ontimeout(), (resp) => {\n      if (resp) {\n        var { status, token, messages } = resp;\n        this.token = token;\n      } else {\n        status = 0;\n      }\n      switch (status) {\n        case 200:\n          messages.forEach((msg) => {\n            setTimeout(() => this.onmessage({ data: msg }), 0);\n          });\n          this.poll();\n          break;\n        case 204:\n          this.poll();\n          break;\n        case 410:\n          this.readyState = SOCKET_STATES.open;\n          this.onopen({});\n          this.poll();\n          break;\n        case 403:\n          this.onerror(403);\n          this.close(1008, \"forbidden\", false);\n          break;\n        case 0:\n        case 500:\n          this.onerror(500);\n          this.closeAndRetry(1011, \"internal server error\", 500);\n          break;\n        default:\n          throw new Error(`unhandled poll status ${status}`);\n      }\n    });\n  }\n  // we collect all pushes within the current event loop by\n  // setTimeout 0, which optimizes back-to-back procedural\n  // pushes against an empty buffer\n  send(body) {\n    if (typeof body !== \"string\") {\n      body = arrayBufferToBase64(body);\n    }\n    if (this.currentBatch) {\n      this.currentBatch.push(body);\n    } else if (this.awaitingBatchAck) {\n      this.batchBuffer.push(body);\n    } else {\n      this.currentBatch = [body];\n      this.currentBatchTimer = setTimeout(() => {\n        this.batchSend(this.currentBatch);\n        this.currentBatch = null;\n      }, 0);\n    }\n  }\n  batchSend(messages) {\n    this.awaitingBatchAck = true;\n    this.ajax(\"POST\", \"application/x-ndjson\", messages.join(\"\\n\"), () => this.onerror(\"timeout\"), (resp) => {\n      this.awaitingBatchAck = false;\n      if (!resp || resp.status !== 200) {\n        this.onerror(resp && resp.status);\n        this.closeAndRetry(1011, \"internal server error\", false);\n      } else if (this.batchBuffer.length > 0) {\n        this.batchSend(this.batchBuffer);\n        this.batchBuffer = [];\n      }\n    });\n  }\n  close(code, reason, wasClean) {\n    for (let req of this.reqs) {\n      req.abort();\n    }\n    this.readyState = SOCKET_STATES.closed;\n    let opts = Object.assign({ code: 1e3, reason: void 0, wasClean: true }, { code, reason, wasClean });\n    this.batchBuffer = [];\n    clearTimeout(this.currentBatchTimer);\n    this.currentBatchTimer = null;\n    if (typeof CloseEvent !== \"undefined\") {\n      this.onclose(new CloseEvent(\"close\", opts));\n    } else {\n      this.onclose(opts);\n    }\n  }\n  ajax(method, contentType, body, onCallerTimeout, callback) {\n    let req;\n    let ontimeout = () => {\n      this.reqs.delete(req);\n      onCallerTimeout();\n    };\n    req = Ajax.request(method, this.endpointURL(), contentType, body, this.timeout, ontimeout, (resp) => {\n      this.reqs.delete(req);\n      if (this.isActive()) {\n        callback(resp);\n      }\n    });\n    this.reqs.add(req);\n  }\n};\n\n// js/phoenix/presence.js\nvar Presence = class {\n  constructor(channel, opts = {}) {\n    let events = opts.events || { state: \"presence_state\", diff: \"presence_diff\" };\n    this.state = {};\n    this.pendingDiffs = [];\n    this.channel = channel;\n    this.joinRef = null;\n    this.caller = {\n      onJoin: function() {\n      },\n      onLeave: function() {\n      },\n      onSync: function() {\n      }\n    };\n    this.channel.on(events.state, (newState) => {\n      let { onJoin, onLeave, onSync } = this.caller;\n      this.joinRef = this.channel.joinRef();\n      this.state = Presence.syncState(this.state, newState, onJoin, onLeave);\n      this.pendingDiffs.forEach((diff) => {\n        this.state = Presence.syncDiff(this.state, diff, onJoin, onLeave);\n      });\n      this.pendingDiffs = [];\n      onSync();\n    });\n    this.channel.on(events.diff, (diff) => {\n      let { onJoin, onLeave, onSync } = this.caller;\n      if (this.inPendingSyncState()) {\n        this.pendingDiffs.push(diff);\n      } else {\n        this.state = Presence.syncDiff(this.state, diff, onJoin, onLeave);\n        onSync();\n      }\n    });\n  }\n  onJoin(callback) {\n    this.caller.onJoin = callback;\n  }\n  onLeave(callback) {\n    this.caller.onLeave = callback;\n  }\n  onSync(callback) {\n    this.caller.onSync = callback;\n  }\n  list(by) {\n    return Presence.list(this.state, by);\n  }\n  inPendingSyncState() {\n    return !this.joinRef || this.joinRef !== this.channel.joinRef();\n  }\n  // lower-level public static API\n  /**\n   * Used to sync the list of presences on the server\n   * with the client's state. An optional `onJoin` and `onLeave` callback can\n   * be provided to react to changes in the client's local presences across\n   * disconnects and reconnects with the server.\n   *\n   * @returns {Presence}\n   */\n  static syncState(currentState, newState, onJoin, onLeave) {\n    let state = this.clone(currentState);\n    let joins = {};\n    let leaves = {};\n    this.map(state, (key, presence) => {\n      if (!newState[key]) {\n        leaves[key] = presence;\n      }\n    });\n    this.map(newState, (key, newPresence) => {\n      let currentPresence = state[key];\n      if (currentPresence) {\n        let newRefs = newPresence.metas.map((m) => m.phx_ref);\n        let curRefs = currentPresence.metas.map((m) => m.phx_ref);\n        let joinedMetas = newPresence.metas.filter((m) => curRefs.indexOf(m.phx_ref) < 0);\n        let leftMetas = currentPresence.metas.filter((m) => newRefs.indexOf(m.phx_ref) < 0);\n        if (joinedMetas.length > 0) {\n          joins[key] = newPresence;\n          joins[key].metas = joinedMetas;\n        }\n        if (leftMetas.length > 0) {\n          leaves[key] = this.clone(currentPresence);\n          leaves[key].metas = leftMetas;\n        }\n      } else {\n        joins[key] = newPresence;\n      }\n    });\n    return this.syncDiff(state, { joins, leaves }, onJoin, onLeave);\n  }\n  /**\n   *\n   * Used to sync a diff of presence join and leave\n   * events from the server, as they happen. Like `syncState`, `syncDiff`\n   * accepts optional `onJoin` and `onLeave` callbacks to react to a user\n   * joining or leaving from a device.\n   *\n   * @returns {Presence}\n   */\n  static syncDiff(state, diff, onJoin, onLeave) {\n    let { joins, leaves } = this.clone(diff);\n    if (!onJoin) {\n      onJoin = function() {\n      };\n    }\n    if (!onLeave) {\n      onLeave = function() {\n      };\n    }\n    this.map(joins, (key, newPresence) => {\n      let currentPresence = state[key];\n      state[key] = this.clone(newPresence);\n      if (currentPresence) {\n        let joinedRefs = state[key].metas.map((m) => m.phx_ref);\n        let curMetas = currentPresence.metas.filter((m) => joinedRefs.indexOf(m.phx_ref) < 0);\n        state[key].metas.unshift(...curMetas);\n      }\n      onJoin(key, currentPresence, newPresence);\n    });\n    this.map(leaves, (key, leftPresence) => {\n      let currentPresence = state[key];\n      if (!currentPresence) {\n        return;\n      }\n      let refsToRemove = leftPresence.metas.map((m) => m.phx_ref);\n      currentPresence.metas = currentPresence.metas.filter((p) => {\n        return refsToRemove.indexOf(p.phx_ref) < 0;\n      });\n      onLeave(key, currentPresence, leftPresence);\n      if (currentPresence.metas.length === 0) {\n        delete state[key];\n      }\n    });\n    return state;\n  }\n  /**\n   * Returns the array of presences, with selected metadata.\n   *\n   * @param {Object} presences\n   * @param {Function} chooser\n   *\n   * @returns {Presence}\n   */\n  static list(presences, chooser) {\n    if (!chooser) {\n      chooser = function(key, pres) {\n        return pres;\n      };\n    }\n    return this.map(presences, (key, presence) => {\n      return chooser(key, presence);\n    });\n  }\n  // private\n  static map(obj, func) {\n    return Object.getOwnPropertyNames(obj).map((key) => func(key, obj[key]));\n  }\n  static clone(obj) {\n    return JSON.parse(JSON.stringify(obj));\n  }\n};\n\n// js/phoenix/serializer.js\nvar serializer_default = {\n  HEADER_LENGTH: 1,\n  META_LENGTH: 4,\n  KINDS: { push: 0, reply: 1, broadcast: 2 },\n  encode(msg, callback) {\n    if (msg.payload.constructor === ArrayBuffer) {\n      return callback(this.binaryEncode(msg));\n    } else {\n      let payload = [msg.join_ref, msg.ref, msg.topic, msg.event, msg.payload];\n      return callback(JSON.stringify(payload));\n    }\n  },\n  decode(rawPayload, callback) {\n    if (rawPayload.constructor === ArrayBuffer) {\n      return callback(this.binaryDecode(rawPayload));\n    } else {\n      let [join_ref, ref, topic, event, payload] = JSON.parse(rawPayload);\n      return callback({ join_ref, ref, topic, event, payload });\n    }\n  },\n  // private\n  binaryEncode(message) {\n    let { join_ref, ref, event, topic, payload } = message;\n    let metaLength = this.META_LENGTH + join_ref.length + ref.length + topic.length + event.length;\n    let header = new ArrayBuffer(this.HEADER_LENGTH + metaLength);\n    let view = new DataView(header);\n    let offset = 0;\n    view.setUint8(offset++, this.KINDS.push);\n    view.setUint8(offset++, join_ref.length);\n    view.setUint8(offset++, ref.length);\n    view.setUint8(offset++, topic.length);\n    view.setUint8(offset++, event.length);\n    Array.from(join_ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));\n    Array.from(ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));\n    Array.from(topic, (char) => view.setUint8(offset++, char.charCodeAt(0)));\n    Array.from(event, (char) => view.setUint8(offset++, char.charCodeAt(0)));\n    var combined = new Uint8Array(header.byteLength + payload.byteLength);\n    combined.set(new Uint8Array(header), 0);\n    combined.set(new Uint8Array(payload), header.byteLength);\n    return combined.buffer;\n  },\n  binaryDecode(buffer) {\n    let view = new DataView(buffer);\n    let kind = view.getUint8(0);\n    let decoder = new TextDecoder();\n    switch (kind) {\n      case this.KINDS.push:\n        return this.decodePush(buffer, view, decoder);\n      case this.KINDS.reply:\n        return this.decodeReply(buffer, view, decoder);\n      case this.KINDS.broadcast:\n        return this.decodeBroadcast(buffer, view, decoder);\n    }\n  },\n  decodePush(buffer, view, decoder) {\n    let joinRefSize = view.getUint8(1);\n    let topicSize = view.getUint8(2);\n    let eventSize = view.getUint8(3);\n    let offset = this.HEADER_LENGTH + this.META_LENGTH - 1;\n    let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));\n    offset = offset + joinRefSize;\n    let topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n    offset = offset + topicSize;\n    let event = decoder.decode(buffer.slice(offset, offset + eventSize));\n    offset = offset + eventSize;\n    let data = buffer.slice(offset, buffer.byteLength);\n    return { join_ref: joinRef, ref: null, topic, event, payload: data };\n  },\n  decodeReply(buffer, view, decoder) {\n    let joinRefSize = view.getUint8(1);\n    let refSize = view.getUint8(2);\n    let topicSize = view.getUint8(3);\n    let eventSize = view.getUint8(4);\n    let offset = this.HEADER_LENGTH + this.META_LENGTH;\n    let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));\n    offset = offset + joinRefSize;\n    let ref = decoder.decode(buffer.slice(offset, offset + refSize));\n    offset = offset + refSize;\n    let topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n    offset = offset + topicSize;\n    let event = decoder.decode(buffer.slice(offset, offset + eventSize));\n    offset = offset + eventSize;\n    let data = buffer.slice(offset, buffer.byteLength);\n    let payload = { status: event, response: data };\n    return { join_ref: joinRef, ref, topic, event: CHANNEL_EVENTS.reply, payload };\n  },\n  decodeBroadcast(buffer, view, decoder) {\n    let topicSize = view.getUint8(1);\n    let eventSize = view.getUint8(2);\n    let offset = this.HEADER_LENGTH + 2;\n    let topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n    offset = offset + topicSize;\n    let event = decoder.decode(buffer.slice(offset, offset + eventSize));\n    offset = offset + eventSize;\n    let data = buffer.slice(offset, buffer.byteLength);\n    return { join_ref: null, ref: null, topic, event, payload: data };\n  }\n};\n\n// js/phoenix/socket.js\nvar Socket = class {\n  constructor(endPoint, opts = {}) {\n    this.stateChangeCallbacks = { open: [], close: [], error: [], message: [] };\n    this.channels = [];\n    this.sendBuffer = [];\n    this.ref = 0;\n    this.timeout = opts.timeout || DEFAULT_TIMEOUT;\n    this.transport = opts.transport || global.WebSocket || LongPoll;\n    this.primaryPassedHealthCheck = false;\n    this.longPollFallbackMs = opts.longPollFallbackMs;\n    this.fallbackTimer = null;\n    this.sessionStore = opts.sessionStorage || global && global.sessionStorage;\n    this.establishedConnections = 0;\n    this.defaultEncoder = serializer_default.encode.bind(serializer_default);\n    this.defaultDecoder = serializer_default.decode.bind(serializer_default);\n    this.closeWasClean = false;\n    this.binaryType = opts.binaryType || \"arraybuffer\";\n    this.connectClock = 1;\n    if (this.transport !== LongPoll) {\n      this.encode = opts.encode || this.defaultEncoder;\n      this.decode = opts.decode || this.defaultDecoder;\n    } else {\n      this.encode = this.defaultEncoder;\n      this.decode = this.defaultDecoder;\n    }\n    let awaitingConnectionOnPageShow = null;\n    if (phxWindow && phxWindow.addEventListener) {\n      phxWindow.addEventListener(\"pagehide\", (_e) => {\n        if (this.conn) {\n          this.disconnect();\n          awaitingConnectionOnPageShow = this.connectClock;\n        }\n      });\n      phxWindow.addEventListener(\"pageshow\", (_e) => {\n        if (awaitingConnectionOnPageShow === this.connectClock) {\n          awaitingConnectionOnPageShow = null;\n          this.connect();\n        }\n      });\n    }\n    this.heartbeatIntervalMs = opts.heartbeatIntervalMs || 3e4;\n    this.rejoinAfterMs = (tries) => {\n      if (opts.rejoinAfterMs) {\n        return opts.rejoinAfterMs(tries);\n      } else {\n        return [1e3, 2e3, 5e3][tries - 1] || 1e4;\n      }\n    };\n    this.reconnectAfterMs = (tries) => {\n      if (opts.reconnectAfterMs) {\n        return opts.reconnectAfterMs(tries);\n      } else {\n        return [10, 50, 100, 150, 200, 250, 500, 1e3, 2e3][tries - 1] || 5e3;\n      }\n    };\n    this.logger = opts.logger || null;\n    if (!this.logger && opts.debug) {\n      this.logger = (kind, msg, data) => {\n        console.log(`${kind}: ${msg}`, data);\n      };\n    }\n    this.longpollerTimeout = opts.longpollerTimeout || 2e4;\n    this.params = closure(opts.params || {});\n    this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;\n    this.vsn = opts.vsn || DEFAULT_VSN;\n    this.heartbeatTimeoutTimer = null;\n    this.heartbeatTimer = null;\n    this.pendingHeartbeatRef = null;\n    this.reconnectTimer = new Timer(() => {\n      this.teardown(() => this.connect());\n    }, this.reconnectAfterMs);\n  }\n  /**\n   * Returns the LongPoll transport reference\n   */\n  getLongPollTransport() {\n    return LongPoll;\n  }\n  /**\n   * Disconnects and replaces the active transport\n   *\n   * @param {Function} newTransport - The new transport class to instantiate\n   *\n   */\n  replaceTransport(newTransport) {\n    this.connectClock++;\n    this.closeWasClean = true;\n    clearTimeout(this.fallbackTimer);\n    this.reconnectTimer.reset();\n    if (this.conn) {\n      this.conn.close();\n      this.conn = null;\n    }\n    this.transport = newTransport;\n  }\n  /**\n   * Returns the socket protocol\n   *\n   * @returns {string}\n   */\n  protocol() {\n    return location.protocol.match(/^https/) ? \"wss\" : \"ws\";\n  }\n  /**\n   * The fully qualified socket url\n   *\n   * @returns {string}\n   */\n  endPointURL() {\n    let uri = Ajax.appendParams(\n      Ajax.appendParams(this.endPoint, this.params()),\n      { vsn: this.vsn }\n    );\n    if (uri.charAt(0) !== \"/\") {\n      return uri;\n    }\n    if (uri.charAt(1) === \"/\") {\n      return `${this.protocol()}:${uri}`;\n    }\n    return `${this.protocol()}://${location.host}${uri}`;\n  }\n  /**\n   * Disconnects the socket\n   *\n   * See https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes for valid status codes.\n   *\n   * @param {Function} callback - Optional callback which is called after socket is disconnected.\n   * @param {integer} code - A status code for disconnection (Optional).\n   * @param {string} reason - A textual description of the reason to disconnect. (Optional)\n   */\n  disconnect(callback, code, reason) {\n    this.connectClock++;\n    this.closeWasClean = true;\n    clearTimeout(this.fallbackTimer);\n    this.reconnectTimer.reset();\n    this.teardown(callback, code, reason);\n  }\n  /**\n   *\n   * @param {Object} params - The params to send when connecting, for example `{user_id: userToken}`\n   *\n   * Passing params to connect is deprecated; pass them in the Socket constructor instead:\n   * `new Socket(\"/socket\", {params: {user_id: userToken}})`.\n   */\n  connect(params) {\n    if (params) {\n      console && console.log(\"passing params to connect is deprecated. Instead pass :params to the Socket constructor\");\n      this.params = closure(params);\n    }\n    if (this.conn) {\n      return;\n    }\n    if (this.longPollFallbackMs && this.transport !== LongPoll) {\n      this.connectWithFallback(LongPoll, this.longPollFallbackMs);\n    } else {\n      this.transportConnect();\n    }\n  }\n  /**\n   * Logs the message. Override `this.logger` for specialized logging. noops by default\n   * @param {string} kind\n   * @param {string} msg\n   * @param {Object} data\n   */\n  log(kind, msg, data) {\n    this.logger && this.logger(kind, msg, data);\n  }\n  /**\n   * Returns true if a logger has been set on this socket.\n   */\n  hasLogger() {\n    return this.logger !== null;\n  }\n  /**\n   * Registers callbacks for connection open events\n   *\n   * @example socket.onOpen(function(){ console.info(\"the socket was opened\") })\n   *\n   * @param {Function} callback\n   */\n  onOpen(callback) {\n    let ref = this.makeRef();\n    this.stateChangeCallbacks.open.push([ref, callback]);\n    return ref;\n  }\n  /**\n   * Registers callbacks for connection close events\n   * @param {Function} callback\n   */\n  onClose(callback) {\n    let ref = this.makeRef();\n    this.stateChangeCallbacks.close.push([ref, callback]);\n    return ref;\n  }\n  /**\n   * Registers callbacks for connection error events\n   *\n   * @example socket.onError(function(error){ alert(\"An error occurred\") })\n   *\n   * @param {Function} callback\n   */\n  onError(callback) {\n    let ref = this.makeRef();\n    this.stateChangeCallbacks.error.push([ref, callback]);\n    return ref;\n  }\n  /**\n   * Registers callbacks for connection message events\n   * @param {Function} callback\n   */\n  onMessage(callback) {\n    let ref = this.makeRef();\n    this.stateChangeCallbacks.message.push([ref, callback]);\n    return ref;\n  }\n  /**\n   * Pings the server and invokes the callback with the RTT in milliseconds\n   * @param {Function} callback\n   *\n   * Returns true if the ping was pushed or false if unable to be pushed.\n   */\n  ping(callback) {\n    if (!this.isConnected()) {\n      return false;\n    }\n    let ref = this.makeRef();\n    let startTime = Date.now();\n    this.push({ topic: \"phoenix\", event: \"heartbeat\", payload: {}, ref });\n    let onMsgRef = this.onMessage((msg) => {\n      if (msg.ref === ref) {\n        this.off([onMsgRef]);\n        callback(Date.now() - startTime);\n      }\n    });\n    return true;\n  }\n  /**\n   * @private\n   */\n  transportConnect() {\n    this.connectClock++;\n    this.closeWasClean = false;\n    this.conn = new this.transport(this.endPointURL());\n    this.conn.binaryType = this.binaryType;\n    this.conn.timeout = this.longpollerTimeout;\n    this.conn.onopen = () => this.onConnOpen();\n    this.conn.onerror = (error) => this.onConnError(error);\n    this.conn.onmessage = (event) => this.onConnMessage(event);\n    this.conn.onclose = (event) => this.onConnClose(event);\n  }\n  getSession(key) {\n    return this.sessionStore && this.sessionStore.getItem(key);\n  }\n  storeSession(key, val) {\n    this.sessionStore && this.sessionStore.setItem(key, val);\n  }\n  connectWithFallback(fallbackTransport, fallbackThreshold = 2500) {\n    clearTimeout(this.fallbackTimer);\n    let established = false;\n    let primaryTransport = true;\n    let openRef, errorRef;\n    let fallback = (reason) => {\n      this.log(\"transport\", `falling back to ${fallbackTransport.name}...`, reason);\n      this.off([openRef, errorRef]);\n      primaryTransport = false;\n      this.replaceTransport(fallbackTransport);\n      this.transportConnect();\n    };\n    if (this.getSession(`phx:fallback:${fallbackTransport.name}`)) {\n      return fallback(\"memorized\");\n    }\n    this.fallbackTimer = setTimeout(fallback, fallbackThreshold);\n    errorRef = this.onError((reason) => {\n      this.log(\"transport\", \"error\", reason);\n      if (primaryTransport && !established) {\n        clearTimeout(this.fallbackTimer);\n        fallback(reason);\n      }\n    });\n    this.onOpen(() => {\n      established = true;\n      if (!primaryTransport) {\n        if (!this.primaryPassedHealthCheck) {\n          this.storeSession(`phx:fallback:${fallbackTransport.name}`, \"true\");\n        }\n        return this.log(\"transport\", `established ${fallbackTransport.name} fallback`);\n      }\n      clearTimeout(this.fallbackTimer);\n      this.fallbackTimer = setTimeout(fallback, fallbackThreshold);\n      this.ping((rtt) => {\n        this.log(\"transport\", \"connected to primary after\", rtt);\n        this.primaryPassedHealthCheck = true;\n        clearTimeout(this.fallbackTimer);\n      });\n    });\n    this.transportConnect();\n  }\n  clearHeartbeats() {\n    clearTimeout(this.heartbeatTimer);\n    clearTimeout(this.heartbeatTimeoutTimer);\n  }\n  onConnOpen() {\n    if (this.hasLogger())\n      this.log(\"transport\", `${this.transport.name} connected to ${this.endPointURL()}`);\n    this.closeWasClean = false;\n    this.establishedConnections++;\n    this.flushSendBuffer();\n    this.reconnectTimer.reset();\n    this.resetHeartbeat();\n    this.stateChangeCallbacks.open.forEach(([, callback]) => callback());\n  }\n  /**\n   * @private\n   */\n  heartbeatTimeout() {\n    if (this.pendingHeartbeatRef) {\n      this.pendingHeartbeatRef = null;\n      if (this.hasLogger()) {\n        this.log(\"transport\", \"heartbeat timeout. Attempting to re-establish connection\");\n      }\n      this.triggerChanError();\n      this.closeWasClean = false;\n      this.teardown(() => this.reconnectTimer.scheduleTimeout(), WS_CLOSE_NORMAL, \"heartbeat timeout\");\n    }\n  }\n  resetHeartbeat() {\n    if (this.conn && this.conn.skipHeartbeat) {\n      return;\n    }\n    this.pendingHeartbeatRef = null;\n    this.clearHeartbeats();\n    this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);\n  }\n  teardown(callback, code, reason) {\n    if (!this.conn) {\n      return callback && callback();\n    }\n    this.waitForBufferDone(() => {\n      if (this.conn) {\n        if (code) {\n          this.conn.close(code, reason || \"\");\n        } else {\n          this.conn.close();\n        }\n      }\n      this.waitForSocketClosed(() => {\n        if (this.conn) {\n          this.conn.onopen = function() {\n          };\n          this.conn.onerror = function() {\n          };\n          this.conn.onmessage = function() {\n          };\n          this.conn.onclose = function() {\n          };\n          this.conn = null;\n        }\n        callback && callback();\n      });\n    });\n  }\n  waitForBufferDone(callback, tries = 1) {\n    if (tries === 5 || !this.conn || !this.conn.bufferedAmount) {\n      callback();\n      return;\n    }\n    setTimeout(() => {\n      this.waitForBufferDone(callback, tries + 1);\n    }, 150 * tries);\n  }\n  waitForSocketClosed(callback, tries = 1) {\n    if (tries === 5 || !this.conn || this.conn.readyState === SOCKET_STATES.closed) {\n      callback();\n      return;\n    }\n    setTimeout(() => {\n      this.waitForSocketClosed(callback, tries + 1);\n    }, 150 * tries);\n  }\n  onConnClose(event) {\n    let closeCode = event && event.code;\n    if (this.hasLogger())\n      this.log(\"transport\", \"close\", event);\n    this.triggerChanError();\n    this.clearHeartbeats();\n    if (!this.closeWasClean && closeCode !== 1e3) {\n      this.reconnectTimer.scheduleTimeout();\n    }\n    this.stateChangeCallbacks.close.forEach(([, callback]) => callback(event));\n  }\n  /**\n   * @private\n   */\n  onConnError(error) {\n    if (this.hasLogger())\n      this.log(\"transport\", error);\n    let transportBefore = this.transport;\n    let establishedBefore = this.establishedConnections;\n    this.stateChangeCallbacks.error.forEach(([, callback]) => {\n      callback(error, transportBefore, establishedBefore);\n    });\n    if (transportBefore === this.transport || establishedBefore > 0) {\n      this.triggerChanError();\n    }\n  }\n  /**\n   * @private\n   */\n  triggerChanError() {\n    this.channels.forEach((channel) => {\n      if (!(channel.isErrored() || channel.isLeaving() || channel.isClosed())) {\n        channel.trigger(CHANNEL_EVENTS.error);\n      }\n    });\n  }\n  /**\n   * @returns {string}\n   */\n  connectionState() {\n    switch (this.conn && this.conn.readyState) {\n      case SOCKET_STATES.connecting:\n        return \"connecting\";\n      case SOCKET_STATES.open:\n        return \"open\";\n      case SOCKET_STATES.closing:\n        return \"closing\";\n      default:\n        return \"closed\";\n    }\n  }\n  /**\n   * @returns {boolean}\n   */\n  isConnected() {\n    return this.connectionState() === \"open\";\n  }\n  /**\n   * @private\n   *\n   * @param {Channel}\n   */\n  remove(channel) {\n    this.off(channel.stateChangeRefs);\n    this.channels = this.channels.filter((c) => c !== channel);\n  }\n  /**\n   * Removes `onOpen`, `onClose`, `onError,` and `onMessage` registrations.\n   *\n   * @param {refs} - list of refs returned by calls to\n   *                 `onOpen`, `onClose`, `onError,` and `onMessage`\n   */\n  off(refs) {\n    for (let key in this.stateChangeCallbacks) {\n      this.stateChangeCallbacks[key] = this.stateChangeCallbacks[key].filter(([ref]) => {\n        return refs.indexOf(ref) === -1;\n      });\n    }\n  }\n  /**\n   * Initiates a new channel for the given topic\n   *\n   * @param {string} topic\n   * @param {Object} chanParams - Parameters for the channel\n   * @returns {Channel}\n   */\n  channel(topic, chanParams = {}) {\n    let chan = new Channel(topic, chanParams, this);\n    this.channels.push(chan);\n    return chan;\n  }\n  /**\n   * @param {Object} data\n   */\n  push(data) {\n    if (this.hasLogger()) {\n      let { topic, event, payload, ref, join_ref } = data;\n      this.log(\"push\", `${topic} ${event} (${join_ref}, ${ref})`, payload);\n    }\n    if (this.isConnected()) {\n      this.encode(data, (result) => this.conn.send(result));\n    } else {\n      this.sendBuffer.push(() => this.encode(data, (result) => this.conn.send(result)));\n    }\n  }\n  /**\n   * Return the next message ref, accounting for overflows\n   * @returns {string}\n   */\n  makeRef() {\n    let newRef = this.ref + 1;\n    if (newRef === this.ref) {\n      this.ref = 0;\n    } else {\n      this.ref = newRef;\n    }\n    return this.ref.toString();\n  }\n  sendHeartbeat() {\n    if (this.pendingHeartbeatRef && !this.isConnected()) {\n      return;\n    }\n    this.pendingHeartbeatRef = this.makeRef();\n    this.push({ topic: \"phoenix\", event: \"heartbeat\", payload: {}, ref: this.pendingHeartbeatRef });\n    this.heartbeatTimeoutTimer = setTimeout(() => this.heartbeatTimeout(), this.heartbeatIntervalMs);\n  }\n  flushSendBuffer() {\n    if (this.isConnected() && this.sendBuffer.length > 0) {\n      this.sendBuffer.forEach((callback) => callback());\n      this.sendBuffer = [];\n    }\n  }\n  onConnMessage(rawMessage) {\n    this.decode(rawMessage.data, (msg) => {\n      let { topic, event, payload, ref, join_ref } = msg;\n      if (ref && ref === this.pendingHeartbeatRef) {\n        this.clearHeartbeats();\n        this.pendingHeartbeatRef = null;\n        this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);\n      }\n      if (this.hasLogger())\n        this.log(\"receive\", `${payload.status || \"\"} ${topic} ${event} ${ref && \"(\" + ref + \")\" || \"\"}`, payload);\n      for (let i = 0; i < this.channels.length; i++) {\n        const channel = this.channels[i];\n        if (!channel.isMember(topic, event, payload, join_ref)) {\n          continue;\n        }\n        channel.trigger(event, payload, ref, join_ref);\n      }\n      for (let i = 0; i < this.stateChangeCallbacks.message.length; i++) {\n        let [, callback] = this.stateChangeCallbacks.message[i];\n        callback(msg);\n      }\n    });\n  }\n  leaveOpenTopic(topic) {\n    let dupChannel = this.channels.find((c) => c.topic === topic && (c.isJoined() || c.isJoining()));\n    if (dupChannel) {\n      if (this.hasLogger())\n        this.log(\"transport\", `leaving duplicate topic \"${topic}\"`);\n      dupChannel.leave();\n    }\n  }\n};\nexport {\n  Channel,\n  LongPoll,\n  Presence,\n  serializer_default as Serializer,\n  Socket\n};\n//# sourceMappingURL=phoenix.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","import React from \"react\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport SocketProvider from \"./context/socket/SocketProvider\";\r\nimport { StoreProvider } from \"./context/store/StoreProvider\";\r\nimport * as Utils from './utils/index';\r\n\r\nconst SariskaCollaborativeAnnotation = (props) => {\r\n  \r\n  return (\r\n    <StoreProvider>\r\n      <SocketProvider>\r\n        <App {...props} />\r\n      </SocketProvider>\r\n    </StoreProvider>\r\n  )\r\n}\r\n\r\nexport {Utils};\r\nexport default SariskaCollaborativeAnnotation;"],"names":["React","useState","SocketProvider","CreateChannel","UseEventHandler","DrawingBoard","useStore","setRoom","setUser","SET_ROOM","SET_USER","clearCanvas","onSticker","Message","App","props","messages","setMessages","loading","setLoading","canvasCtx","setCanvasCtx","roomName","users","dispatch","rtcChannel","message","console","info","response","room","user","userDetails","id","name","roomDetails","session_id","created_by","inserted_at","log","content","JSON","parse","type","position","ctx","sticker","emoji","x","canvasWidth","canvas","width","y","canvasHeight","height","scale","Object","keys","length","onDraw","pushMessage","channel","new_message","created_by_name","push","createElement","inputProps","useContext","useEffect","SocketContext","topic","params","arguments","undefined","socket","setChannel","ch","join","receive","leave","useSticker","useOnDraw","Canvas","_ref","children","otherProps","setCanvasRef","onMouseDown","handleDraw","toggleEmoji","positions","setStickerCanvasRef","selectedEmoji","setSelectedEmoji","handleClick","ref","canvasStyle","zIndex","background","Fragment","style","onClick","SARISKA_API_KEY","process","env","REACT_APP_SARISKA_MEET_APP_API_KEY","MESSAGING_API_SERVICE_HOST","REACT_APP_API_SERVICE_HOST","WEB_SOCKET_URL","REACT_APP_WEBSOCKET_SERVICE_HOST","SARISKA_WEBSITE","SARISKA_COMPANY_NAME","GENERATE_TOKEN_URL","COMPANY_NAME","GET_PRESIGNED_URL","createContext","getToken","getUserId","getUserName","Socket","setSocket","userName","userId","fetchData","token","s","onOpen","onError","e","onClose","connect","disconnect","Provider","value","StoreContext","useReducer","initialContextState","rootReducer","StoreProvider","state","rooms","useRef","event","handler","handle","current","on","off","computePointInCanvas","annotations","setAnnotations","isDrawing","setIsDrawing","canvasRef","prevPointRef","isDrawingRef","mouseMoveListenerRef","mouseUpListenerRef","getContext","parentCanvasRef","initMouseMoveListener","mouseMoveListener","point","clientX","clientY","prevPoint","stringify","window","addEventListener","initMouseUpListener","mouseUpListener","removeMouseEventListeners","removeEventListener","isParticipantAccess","isModerator","isCanvasClear","isImageSaved","saveImage","lineColor","useCallback","setEmoji","setPositions","isStickRef","prev","target","newEmojiPosition","stickerData","prevPositions","emojiData","renderAction","payload","getRoom","GET_ROOM","GET_USER","getUser","initialState","initialStateRoom","initialStateUser","roomReducer","userReducer","action","localStorage","getItem","setItem","storedUserId","characters","generateString","result","charactersLength","i","charAt","Math","floor","random","trim","storedUserName","str","strArr","match","getRoomId","storedRoomId","roomId","getRoomName","storedRoomName","username","body","method","headers","apiKey","fetch","ok","json","status","error","drawLine","end","start","color","_start","beginPath","lineWidth","strokeStyle","moveTo","lineTo","stroke","fillStyle","arc","PI","fill","data","pasteSticker","save","translate","font","fillText","restore","clearRect","refCurrent","boundingRect","getBoundingClientRect","left","top","Utils","SariskaCollaborativeAnnotation"],"sourceRoot":""}