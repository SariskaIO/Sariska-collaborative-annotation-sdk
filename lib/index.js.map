{"version":3,"file":"index.js","mappings":"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S;IACTC,SAAS;IACTC,YAAY;IACZ2C,UAAU;IACV1C;EACF,CAAC,GAAA2D,IAAA;EACC,MAAM;IAACgF,QAAQ;IAAE,GAAG7E;EAAU,CAAC,GAAGpB,UAAU;EAC5C,IAAIkB,WAAW,GAAGlB,UAAU,CAACf,cAAc,CAAC,CAAC;EAC/C;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACE,MAAMiH,WAAW,GAAC;IAChBd,QAAQ,EAAE,UAAU;IACpBjE,MAAM,EAAEC,UAAU,CAACD,MAAM;IACzBgE,UAAU,EAAE;EACd,CAAC;EACH;EACA;;EAEF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEE,oBACMvJ,0DAAA,CAAAA,uDAAA,qBACAA,0DAAA,CAACoF,mDAAU;IACT7D,SAAS,EAAEA,SAAU;IACrB+D,WAAW,EAAEA,WAAY;IACzB9D,SAAS,EAAEA,SAAU;IACrBC,YAAY,EAAEA,YAAa;IAC3B+B,KAAK,EAAEA,KAAM;IACbC,MAAM,EAAEA,MAAO;IACf8B,MAAM,EAAEC,UAAU,CAACD,MAAO;IAC1B3B,WAAW,EAAEA,WAAY;IACzBC,OAAO,EAAEA,OAAQ;IACjB2B,UAAU,EAAEA;EAAW,CACxB,CAAC,EA0BC6E,QACD,CAAC;AAEX,CAAC;AAED,iEAAeD,MAAM;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;AACA;AACA,qBAAqB,6BAA6B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACnFa;;AAEb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACjCa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACTa;;AAEb;AACA;AACA,cAAc,KAAwC,GAAG,sBAAiB,GAAG,CAAI;AACjF;AACA;AACA;AACA;AACA;;;;;;;;;;ACTa;;AAEb;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,yDAAyD;AACzD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC5Da;;AAEb;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACbA;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,aAAa,GAAG;AAChB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;AACA,yBAAyB,kBAAkB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gCAAgC;AAChC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,kBAAkB;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,4CAA4C,YAAY,EAAE,eAAe;AACzE;AACA;AACA,KAAK;AACL;AACA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,8CAA8C,YAAY,GAAG,eAAe;AAC5E,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe,SAAS;AACxB;AACA;AACA;AACA,yBAAyB,sBAAsB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA,wCAAwC,MAAM,QAAQ,WAAW;AACjE;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,gCAAgC;AAClG;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,0BAA0B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,IAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,UAAU,GAAG,IAAI;AACrD;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,IAAI,EAAE,OAAO,EAAE,uBAAuB;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,mBAAmB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,0BAA0B;AACxC;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,8CAA8C,WAAW;AACzD,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,OAAO;AAC1D;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2CAA2C,IAAI,wBAAwB;AACtG;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,gCAAgC;AAChC,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,YAAY,0BAA0B;AACtC;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,YAAY,0BAA0B;AACtC;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;AACL,kCAAkC,eAAe;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,UAAU,gBAAgB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,iCAAiC;AAC5C;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;AACN;AACA,wBAAwB,sCAAsC;AAC9D;AACA,GAAG;AACH;AACA;AACA,UAAU,uCAAuC;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,aAAa;AACb,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA,iCAAiC;AACjC,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK,IAAI,IAAI;AACpC;AACA;AACA;AACA,2CAA2C;AAC3C,uBAAuB,SAAS,GAAG,qBAAqB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,gBAAgB,gBAAgB,GAAG,IAAI;AACvC;AACA,cAAc,gBAAgB,KAAK,cAAc,EAAE,IAAI;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,SAAS;AACtB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ,2DAA2D,mBAAmB;AACnG;AACA,8CAA8C;AAC9C,6BAA6B,SAAS,oBAAoB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,uCAAuC;AAC/E;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,4BAA4B;AAC1E;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iDAAiD,OAAO;AACxE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,uBAAuB;AACtE;AACA;AACA;AACA;AACA;AACA,wCAAwC,uBAAuB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,4CAA4C,uBAAuB;AACnE;AACA,oDAAoD,wBAAwB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qBAAqB,eAAe,mBAAmB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,eAAe;AACf;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA,YAAY,uCAAuC;AACnD,0BAA0B,OAAO,EAAE,OAAO,GAAG,SAAS,IAAI,IAAI;AAC9D;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iDAAiD,iCAAiC;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,uCAAuC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sBAAsB,EAAE,OAAO,EAAE,OAAO,EAAE,6BAA6B;AACtG,sBAAsB,0BAA0B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,8CAA8C;AACpE;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,0DAA0D,MAAM;AAChE;AACA;AACA;AACA;AAOE;AACF;;;;;;;UCrgDA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;;;;;;;;;;;;;;;;;;;;ACA0B;AACL;AACG;AACqC;AACC;AACvB;AAEvC,MAAMwS,8BAA8B,GAAIvV,KAAK,IAAK;EAEhD,oBACElB,0DAAA,CAAC4M,uEAAa,qBACZ5M,0DAAA,CAAC0L,sEAAc,qBACb1L,0DAAA,CAACiB,4CAAG,EAAKC,KAAQ,CACH,CACH,CAAC;AAEpB,CAAC;AAEY;AACb,iEAAeuV,8BAA8B,E","sources":["webpack://sariska-collaborative-annotation-sdk/webpack/universalModuleDefinition","webpack://sariska-collaborative-annotation-sdk/./src/App.js","webpack://sariska-collaborative-annotation-sdk/./src/channel/CreateChannel.js","webpack://sariska-collaborative-annotation-sdk/./src/components/Annotation/index.js","webpack://sariska-collaborative-annotation-sdk/./src/components/Canvas/index.js","webpack://sariska-collaborative-annotation-sdk/./src/components/DrawingBoard/index.js","webpack://sariska-collaborative-annotation-sdk/./src/config.js","webpack://sariska-collaborative-annotation-sdk/./src/constants/index.js","webpack://sariska-collaborative-annotation-sdk/./src/context/socket/SocketContext.js","webpack://sariska-collaborative-annotation-sdk/./src/context/socket/SocketProvider.js","webpack://sariska-collaborative-annotation-sdk/./src/context/store/StoreContext.js","webpack://sariska-collaborative-annotation-sdk/./src/context/store/StoreProvider.js","webpack://sariska-collaborative-annotation-sdk/./src/hooks/UseEventHandler.js","webpack://sariska-collaborative-annotation-sdk/./src/hooks/useOnCircle.js","webpack://sariska-collaborative-annotation-sdk/./src/hooks/useOnDraw.js","webpack://sariska-collaborative-annotation-sdk/./src/hooks/useOnEmoji.js","webpack://sariska-collaborative-annotation-sdk/./src/hooks/useOnTextBox.js","webpack://sariska-collaborative-annotation-sdk/./src/store/action/room.js","webpack://sariska-collaborative-annotation-sdk/./src/store/action/types.js","webpack://sariska-collaborative-annotation-sdk/./src/store/action/user.js","webpack://sariska-collaborative-annotation-sdk/./src/store/index.js","webpack://sariska-collaborative-annotation-sdk/./src/store/initialState/index.js","webpack://sariska-collaborative-annotation-sdk/./src/store/reducer/index.js","webpack://sariska-collaborative-annotation-sdk/./src/store/reducer/room.js","webpack://sariska-collaborative-annotation-sdk/./src/store/reducer/user.js","webpack://sariska-collaborative-annotation-sdk/./src/utils/index.js","webpack://sariska-collaborative-annotation-sdk/./src/App.css","webpack://sariska-collaborative-annotation-sdk/./src/index.css","webpack://sariska-collaborative-annotation-sdk/./node_modules/css-loader/dist/runtime/api.js","webpack://sariska-collaborative-annotation-sdk/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://sariska-collaborative-annotation-sdk/./src/App.css?d9cd","webpack://sariska-collaborative-annotation-sdk/./src/index.css?cfe4","webpack://sariska-collaborative-annotation-sdk/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://sariska-collaborative-annotation-sdk/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://sariska-collaborative-annotation-sdk/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://sariska-collaborative-annotation-sdk/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://sariska-collaborative-annotation-sdk/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://sariska-collaborative-annotation-sdk/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://sariska-collaborative-annotation-sdk/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"React\",\"root\":\"React\"}","webpack://sariska-collaborative-annotation-sdk/./node_modules/phoenix/priv/static/phoenix.mjs","webpack://sariska-collaborative-annotation-sdk/webpack/bootstrap","webpack://sariska-collaborative-annotation-sdk/webpack/runtime/compat get default export","webpack://sariska-collaborative-annotation-sdk/webpack/runtime/define property getters","webpack://sariska-collaborative-annotation-sdk/webpack/runtime/hasOwnProperty shorthand","webpack://sariska-collaborative-annotation-sdk/webpack/runtime/make namespace object","webpack://sariska-collaborative-annotation-sdk/webpack/runtime/nonce","webpack://sariska-collaborative-annotation-sdk/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"sariska-collaborative-annotation-sdk\", [\"React\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sariska-collaborative-annotation-sdk\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"sariska-collaborative-annotation-sdk\"] = factory(root[\"React\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE_react__) => {\nreturn ","import React, { useRef, useState } from 'react';\nimport './App.css';\nimport CreateChannel from './channel/CreateChannel';\nimport UseEventHandler from './hooks/UseEventHandler';\nimport DrawingBoard from './components/DrawingBoard';\nimport { useStore } from './store';\nimport { setRoom } from './store/action/room';\nimport { setUser } from './store/action/user';\nimport { SET_ROOM, SET_USER } from './store/action/types';\nimport { getRoomName, onDraw, onDrawCircle, onDrawEmoji, setAllRemoteTextBoxes } from './utils';\nimport { ANNOTATION_TOOLS } from './constants';\n\nconst App = (props)=> {\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const canvasRef = useRef(null);\n  const [canvasCtx, setCanvasCtx] = useState(null);\n  const [remoteTextboxes, setRemoteTextboxes] = useState([]);\n  const roomName = props.roomName || getRoomName();\n  const {users, dispatch} = useStore();\n  const rtcChannel = CreateChannel(`rtc:${roomName}`, {});\n  \n  UseEventHandler(rtcChannel, 'ping', setLoading, message => {\n    console.info('ping', message)\n  })\n  \n  UseEventHandler(rtcChannel, 'user_joined', setLoading, async (response) => {\n    const {room, user} = response;\n    let userDetails = {id : user.id, name: user.name};\n    let roomDetails = {session_id : room.session_id, created_by: room.created_by, inserted_at: room.inserted_at};\n    dispatch(setRoom(SET_ROOM, roomDetails));\n    dispatch(setUser(SET_USER, userDetails));\n  })\n\n  UseEventHandler(rtcChannel, \"presence_state\", setLoading, (response) => {\n    console.log('presences_state', response);\n  })\n\n  UseEventHandler(rtcChannel, \"presence_diff\",setLoading, (response) => {\n    console.log('presence_diff', response);\n  })\n\n  UseEventHandler(rtcChannel, 'new_message', setLoading, message => {\n    let content = JSON.parse(message.content);\n      if(content?.ctx && Object.keys(content?.ctx)?.length){\n        if(props.annotationTool === ANNOTATION_TOOLS.pen){\n          onDraw(content);\n        }else if(props.annotationTool === ANNOTATION_TOOLS.circle){\n          content.props = {width: props.width, height: props.height};\n          onDrawCircle(content);\n        }else if(props.annotationTool === ANNOTATION_TOOLS.textbox){\n         setAllRemoteTextBoxes(content, remoteTextboxes, setRemoteTextboxes)\n        }else{\n          content.emojis = [...messages];\n          onDrawEmoji(content);\n        }\n      }else{\n        content.ctx = canvasCtx;\n        if(content.ctx){\n          if(props.annotationTool === ANNOTATION_TOOLS.pen){\n            onDraw(content);\n          }else if(props.annotationTool === ANNOTATION_TOOLS.circle){\n            content.props = {width: props.width, height: props.height};\n            onDrawCircle(content);\n          }else if(props.annotationTool === ANNOTATION_TOOLS.textbox){\n            setAllRemoteTextBoxes(content, remoteTextboxes, setRemoteTextboxes)\n          }else{\n              content.emojis = [...messages];\n              onDrawEmoji(content);\n            }\n          }\n        }\n      setMessages(messages => [...messages, message])\n  });\n  \n\n  const pushMessage = ( content, channel )=>{\n    const new_message = {\n      created_by_name: users.user.name,  \n      x: \"uu\", \n      y: { x: \"ghhg\"}\n    };\n    new_message['content'] = content;\n    channel.push('new_message', new_message);\n  };\n\n  return (\n            <DrawingBoard\n              inputProps={props}\n              pushMessage={pushMessage} \n              loading={loading}\n              channel={rtcChannel}\n              canvasRef={canvasRef}\n              canvasCtx={canvasCtx}\n              setCanvasCtx={setCanvasCtx}\n              remoteTextboxes={remoteTextboxes}\n            />\n  );\n}\n\nexport default App;\n","import React, { useContext, useEffect, useState } from 'react'\nimport SocketContext from '../context/socket/SocketContext'\n\nconst CreateChannel = (topic, params={}) => {\n    const socket = useContext(SocketContext);\n    const [channel, setChannel] = useState(null);\n    useEffect(()=>{\n        if(!socket){\n            return;\n        }\n        const ch = socket.channel(topic, params);\n        ch.join()\n            .receive('ignore', () => console.log('Access Denied.'))\n            .receive('ok', () => console.log('Access granted!'))\n            .receive('timeout', () => console.log('Timeout.'));\n        \n        setChannel(ch);\n\n        return () => {\n            if(ch){\n                ch.leave();\n            }\n        }\n    },[socket])\n\n    return (\n        channel\n    )\n}\n\nexport default CreateChannel","import React, { useRef, useState, useEffect } from 'react';\nimport { ANNOTATION_TOOLS } from '../../constants';\nimport { getCanvasPosition, redraw } from '../../utils';\n\nconst Annotation = ({canvasRef, currentTool, canvasCtx, setCanvasCtx, width, height, zIndex, pushMessage, channel, otherProps}) => {\n  const [drawing, setDrawing] = useState(false);\n  const [paths, setPaths] = useState([]); // Store freehand paths\n  const [currentPath, setCurrentPath] = useState([]); // Store current freehand path\n  const [emojis, setEmojis] = useState([]); // Store emoji positions\n  const [circles, setCircles] = useState([]); // Store circle data\n  const [currentCircle, setCurrentCircle] = useState(null); // Store current circle being drawn\n  const [annotation, setAnnotation] = useState([])\nconsole.log('first annotation', annotation, paths, emojis, circles, currentTool);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    setCanvasCtx(context);\n    console.log('test log', annotation)\n    const handleResize = () => {\n      const canvas = canvasRef.current;\n      canvas.width = width;\n      canvas.height = height;\n      redraw(context, canvasRef, annotation); // Redraw existing drawings based on new size\n    };\n\n    window.addEventListener('resize', handleResize);\n    handleResize(); // Set initial canvas size\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [paths, emojis, circles, annotation]);\n\n  const startDrawing = (e) => {\n    const { offsetX, offsetY } = getCanvasPosition(e, canvasRef);\n    if (currentTool === ANNOTATION_TOOLS.pen) {\n      setDrawing(true);\n      const canvas = canvasRef.current;\n      const startXPercent = offsetX / canvas.width; // Store percentage-based coordinates\n      const startYPercent = offsetY / canvas.height;\n      setCurrentPath([{ x: startXPercent, y: startYPercent }]);\n      canvasCtx.beginPath();\n      canvasCtx.moveTo(offsetX, offsetY);\n    } else if (currentTool === ANNOTATION_TOOLS.circle) {\n      const canvas = canvasRef.current;\n      const centerXPercent = offsetX / canvas.width;\n      const centerYPercent = offsetY / canvas.height;\n      setCurrentCircle({ x: centerXPercent, y: centerYPercent, radius: 0 });\n      console.log('startDrawing', annotation);\n      setAnnotation(prev => [\n            ...(Array.isArray(prev) ? prev : []),\n            {type: 'currentCircle', ctx: canvasCtx, circle: { x: centerXPercent, y: centerYPercent, radius: 0 }}]\n      )\n      if(channel){\n        pushMessage(JSON.stringify({ ctx: canvasCtx, circle: { x: centerXPercent, y: centerYPercent, radius: 0 }, props: otherProps }), channel);\n      }\n      // setAnnotation(prev => [\n      //       ...(Array.isArray(prev) ? prev : []),\n      //       {type: 'currentCircle', ctx: canvasCtx, circle: { x: centerXPercent, y: centerYPercent, radius: 0 }}]\n      // )\n      setDrawing(true);\n    }\n  };\n\n  const draw = (e) => {\n    if (currentTool === ANNOTATION_TOOLS.pen && drawing) {\n      const { offsetX, offsetY } = getCanvasPosition(e, canvasRef);\n      canvasCtx.lineTo(offsetX, offsetY);\n      canvasCtx.strokeStyle = 'red';\n      canvasCtx.lineWidth = 2;\n      canvasCtx.stroke();\n\n      const canvas = canvasRef.current;\n      const xPercent = offsetX / canvas.width;\n      const yPercent = offsetY / canvas.height;\n      setCurrentPath((prevPath) => [...prevPath, { x: xPercent, y: yPercent }]);\n    } else if (currentTool === ANNOTATION_TOOLS.circle && drawing) {\n      console.log('first draw', annotation, currentCircle)\n      const { offsetX, offsetY } = getCanvasPosition(e, canvasRef);\n      const canvas = canvasRef.current;\n      const radiusPercent = Math.sqrt(\n        Math.pow(offsetX / canvas.width - currentCircle.x, 2) +\n        Math.pow(offsetY / canvas.height - currentCircle.y, 2)\n      );\n      setCurrentCircle((prevCircle) => ({ ...prevCircle, radius: radiusPercent }));\n      if(annotation && annotation?.length){\n        setAnnotation(prev => {\n            return prev.map((item) => {\n              if(item.type === 'currentCircle') {\n              if(channel){\n                pushMessage(JSON.stringify({ ctx: canvasCtx, circle: { ...item.circle, radius: radiusPercent }, props: otherProps }), channel);\n              }\n                return { ...item, circle: { ...item.circle, radius: radiusPercent } } \n              }else{\n                return item\n              }\n            }\n            );\n          }\n        )\n      }\n      redraw(canvasCtx, canvasRef, annotation); // Redraw everything on each mouse move to update the circle\n    }\n  };\n\n  const stopDrawing = () => {\n    if (currentTool === ANNOTATION_TOOLS.pen && drawing) {\n      setDrawing(false);\n      canvasCtx.closePath();\n      setPaths((prevPaths) => [...prevPaths, currentPath]);\n      setAnnotation(prev => ([...prev, {type: 'pen', ctx: canvasCtx, pen: currentPath }]));\n      if(channel){\n        pushMessage(JSON.stringify({ ctx: canvasCtx, pen: currentPath, props: otherProps }), channel);\n      }\n    } else if (currentTool === ANNOTATION_TOOLS.circle && currentCircle) {\n      setCircles((prevCircles) => [...prevCircles, currentCircle]);\n      console.log('ANNOTATION_TOOLS', annotation);\n      setAnnotation((prev) => [\n        ...(Array.isArray(prev) ? prev : []),\n        { type: 'circle', ctx: canvasCtx, circle: currentCircle },\n      ]);\n      if(channel){\n        pushMessage(JSON.stringify({ ctx: canvasCtx, circle: currentCircle, props: otherProps }), channel);\n      }\n      setCurrentCircle(null); // Reset the current circle\n      setAnnotation(prev => {\n          return prev.filter((item) => item.type !== 'currentCircle');\n        }\n      )\n      setDrawing(false);\n    }\n  };\n\n  const placeEmoji = (e) => {\n    const { offsetX, offsetY } = getCanvasPosition(e, canvasRef);\n    const canvas = canvasRef.current;\n    const xPercent = offsetX / canvas.width;\n    const yPercent = offsetY / canvas.height;\n    console.log('xPercent', xPercent)\n    setEmojis((prevEmojis) => [...prevEmojis, { x: xPercent, y: yPercent, emoji: '' }]);\n    setAnnotation((prev) => [\n      ...(Array.isArray(prev) ? prev : []),\n      { type: 'emoji', ctx: canvasCtx, emoji: { x: xPercent, y: yPercent, emoji: '' } },\n    ]);\n    redraw(canvasCtx, canvasRef, [...annotation, {type: 'emoji', ctx: canvasCtx, emoji: { x: xPercent, y: yPercent, emoji: '' }}]); // Redraw to immediately show the emoji\n  };\n\n  return (\n      <canvas\n        ref={canvasRef}\n        style={{ \n          zIndex,\n          background: 'none',\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n        //  pointerEvents: 'none', // Allows clicks to pass through the canvas to the image\n        }}\n        onMouseDown={(e) => {\n          if (currentTool === ANNOTATION_TOOLS.emoji) {\n            placeEmoji(e);\n          } else {\n            startDrawing(e);\n          }\n        }}\n        onMouseMove={draw}\n        onMouseUp={stopDrawing}\n        onMouseLeave={stopDrawing}\n      />\n  );\n};\n\nexport default Annotation;","import React, { useRef, useState } from 'react';\nimport { useOnDraw } from '../../hooks/useOnDraw';\n import { ANNOTATION_TOOLS } from '../../constants';\n import { useOnEmoji } from '../../hooks/useOnEmoji';\n import { useOnCircle } from '../../hooks/useOnCircle';\nimport { useOnTextBox } from '../../hooks/useOnTextBox';\nimport { makeStyles } from '@material-ui/core';\nimport Annotation from '../Annotation';\n\nconst Canvas = ({\n    width, \n    height, \n    pushMessage,\n    channel,\n    canvasRef,\n    canvasCtx,\n    setCanvasCtx,\n    inputProps,\n    remoteTextboxes\n  }) => {\n    const {children, ...otherProps} = inputProps;\n    let currentTool = inputProps.annotationTool; // 'freehand', 'emoji', 'circle'\n  //   const [annotations, setAnnotations] = useState([]);\n  //   const emojiHook = useOnEmoji(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps);\n  //   const circleHook = useOnCircle(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps);\n  //   const textboxHook = useOnTextBox(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps);\n  //   const drawHook = useOnDraw(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps);\n    \n  // // Use logic to select the correct hook result\n  // const { setCanvasRef, onMouseDown, handleTextChange, textboxes } = \n  // inputProps.annotationTool === ANNOTATION_TOOLS.emoji ? emojiHook : \n  // inputProps.annotationTool === ANNOTATION_TOOLS.circle ? circleHook :\n  // inputProps.annotationTool === ANNOTATION_TOOLS.textbox ? textboxHook : \n  // drawHook;\n    const canvasStyle={\n      position: 'absolute', \n      zIndex: otherProps.zIndex,\n      background: 'none'\n    }\n  // let drawnTextboxes = annotations?.length && annotations?.filter(annotation => annotation.type === ANNOTATION_TOOLS.textbox.toLowerCase())?.map(annotation => annotation.textbox);\n  // let textboxList = textboxes?.length ? textboxes : remoteTextboxes?.length ? remoteTextboxes : drawnTextboxes?.length ? drawnTextboxes : [];\n  \n//   const useStyles = makeStyles(() => ({\n//     textArea: {\n//       position: 'absolute',\n//       resize: 'none',\n//       overflow: 'hidden',\n//       boxSizing: 'border-box',\n//       zIndex: otherProps.zIndex,\n//       '&:focus-visible': {\n//             outlineOffset: otherProps.isModeratorLocal && '0px',\n//             outline: otherProps.isModeratorLocal ? '-webkit-focus-ring-color auto 1px' : 'none'\n//       },\n//       '&:focus': {\n//             outline: otherProps.isModeratorLocal ? '-webkit-focus-ring-color auto 1px' : 'none'\n//       }\n//     }\n//   }))\n//  const classes = useStyles();\n\n  return (\n        <>\n        <Annotation \n          canvasRef={canvasRef} \n          currentTool={currentTool} \n          canvasCtx={canvasCtx} \n          setCanvasCtx={setCanvasCtx}\n          width={width}\n          height={height}\n          zIndex={otherProps.zIndex}\n          pushMessage={pushMessage} \n          channel={channel} \n          otherProps={otherProps}\n        />\n        {/* <canvas \n            width={width}\n            height={height}\n            style={canvasStyle}\n            ref={canvasRef}\n            onMouseDown={onMouseDown}\n        /> */}\n      {/*  {textboxList?.length ? textboxList?.map((textbox) => (\n                <textarea\n                    key={textbox.id}\n                    className={classes.textArea}\n                    value={textbox.text}\n                    onChange={(e) => handleTextChange(e, textbox.id)}\n                    autoFocus={otherProps.isModeratorLocal}\n                    readOnly={!otherProps.isModeratorLocal}\n                    style={{\n                      top: textbox.y + 'px',\n                      left: textbox.x + 'px',\n                      width: textbox.width + 'px',\n                      height: textbox.height + 'px',\n                      maxWidth: `${Math.min(200, 600 - textbox.x)}px`,\n                      maxHeight: `${Math.min(96, 500 - textbox.y)}px`,\n                    }}\n                />\n            )) : null}*/}\n          {children}\n        </>\n  )\n}\n\nexport default Canvas\n\n// import React, { useEffect, useRef, useState } from 'react';\n// import { useOnDraw } from '../../hooks/useOnDraw';\n//  import { ANNOTATION_TOOLS } from '../../constants';\n//  import { useOnEmoji } from '../../hooks/useOnEmoji';\n//  import { useOnCircle } from '../../hooks/useOnCircle';\n// import { useOnTextBox } from '../../hooks/useOnTextBox';\n// import { makeStyles } from '@material-ui/core';\n\n// const Canvas = ({\n//     width, \n//     height, \n//     pushMessage,\n//     channel,\n//     setCanvasCtx,\n//     inputProps,\n//     remoteTextboxes\n//   }) => {\n//     const {children, ...otherProps} = inputProps;\n//     const [annotations, setAnnotations] = useState([]);\n//     // const emojiHook = useOnEmoji(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps);\n//     // const circleHook = useOnCircle(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps);\n//     // const textboxHook = useOnTextBox(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps);\n//     // const drawHook = useOnDraw(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps);\n    \n//   // Use logic to select the correct hook result\n//   // const { setCanvasRef, onMouseDown, handleTextChange, textboxes } = \n//   // inputProps.annotationTool === ANNOTATION_TOOLS.emoji ? emojiHook : \n//   // inputProps.annotationTool === ANNOTATION_TOOLS.circle ? circleHook :\n//   // inputProps.annotationTool === ANNOTATION_TOOLS.textbox ? textboxHook : \n//   // drawHook;\n  \n//   const canvasStyle={\n//     position: 'absolute', \n//     zIndex: otherProps.zIndex,\n//     background: 'none'\n//   }\n\n//   // let drawnTextboxes = annotations?.length && annotations?.filter(annotation => annotation.type === ANNOTATION_TOOLS.textbox.toLowerCase())?.map(annotation => annotation.textbox);\n//   // let textboxList = textboxes?.length ? textboxes : remoteTextboxes?.length ? remoteTextboxes : drawnTextboxes?.length ? drawnTextboxes : [];\n\n//   const canvasRef = useRef(null);\n//   const [drawing, setDrawing] = useState(false);\n//   const [mode, setMode] = useState(inputProps.annotationTool); // Modes: \"freehand\", \"circle\", \"emoji\"\n//   const [paths, setPaths] = useState([]); // Store freehand paths\n//   const [circles, setCircles] = useState([]); // Store circles\n//   const [emojis, setEmojis] = useState([]); // Store emojis\n//   const [currentPath, setCurrentPath] = useState([]); // Store the current path being drawn\n//   const [startPos, setStartPos] = useState(null); // For circle: starting position\n//   const [emoji, setEmoji] = useState(\"\"); // Default emoji\n//   const [canvasSize, setCanvasSize] = useState({ width: window.innerWidth, height: window.innerHeight });\n\n//   // Function to handle window resize\n//   const handleResize = () => {\n//     const newWidth = window.innerWidth;\n//     const newHeight = window.innerHeight;\n\n//     const scaleX = newWidth / canvasSize.width;\n//     const scaleY = newHeight / canvasSize.height;\n\n//     const scaledPaths = paths.map((path) =>\n//       path.map(([x, y]) => [x * scaleX, y * scaleY])\n//     );\n\n//     const scaledCircles = circles.map((circle) => ({\n//       x: circle.x * scaleX,\n//       y: circle.y * scaleY,\n//       radius: circle.radius * Math.min(scaleX, scaleY),\n//     }));\n\n//     const scaledEmojis = emojis.map((emoji) => ({\n//       ...emoji,\n//       x: emoji.x * scaleX,\n//       y: emoji.y * scaleY\n//     }));\n\n//     setCanvasSize({ width: newWidth, height: newHeight });\n//     setPaths(scaledPaths);\n//     setCircles(scaledCircles);\n//     setEmojis(scaledEmojis);\n//   };\n\n//   useEffect(() => {\n//     setMode(inputProps.annotationTool);\n//   },[inputProps.annotationTool])\n\n//   useEffect(() => {\n//     window.addEventListener(\"resize\", handleResize);\n\n//     return () => {\n//       window.removeEventListener(\"resize\", handleResize);\n//     };\n//   }, [paths, circles, emojis, canvasSize, inputProps.annotationTool]);\n\n//   // Start drawing, creating a circle, or placing an emoji\n//   const startDrawing = ({ nativeEvent }) => {\n//     const { offsetX, offsetY } = nativeEvent;\n//     console.log('startDrawing')\n//     setDrawing(true);\n\n//     if (mode === ANNOTATION_TOOLS.pen) {\n//       setCurrentPath([[offsetX, offsetY]]);\n//     } else if (mode === ANNOTATION_TOOLS.circle) {\n//       setStartPos({ x: offsetX, y: offsetY });\n//     } else if (mode === ANNOTATION_TOOLS.emoji) {\n//       setEmojis((prevEmojis) => [...prevEmojis, { x: offsetX, y: offsetY, emoji: emoji }]);\n//     }\n//   };\n\n//   // Continue drawing or update the circle radius\n//   const draw = ({ nativeEvent }) => {\n//     if (!drawing) return;\n// console.log('draw')\n//     const { offsetX, offsetY } = nativeEvent;\n\n//     if (mode === ANNOTATION_TOOLS.pen) {\n//       setCurrentPath((prevPath) => [...prevPath, [offsetX, offsetY]]);\n//     } else if (mode === ANNOTATION_TOOLS.circle && startPos) {\n//       const radius = Math.sqrt(\n//         Math.pow(offsetX - startPos.x, 2) + Math.pow(offsetY - startPos.y, 2)\n//       );\n//       drawCircle(startPos.x, startPos.y, radius);\n//     }\n//   };\n\n//   // Stop drawing and save the path or circle\n//   const stopDrawing = ({ nativeEvent }) => {\n//     if (!drawing) return;\n//     console.log('stopDrawing')\n//     setDrawing(false);\n\n//     if (mode === ANNOTATION_TOOLS.pen) {\n//       setPaths((prevPaths) => [...prevPaths, currentPath]);\n//       setCurrentPath([]);\n//     } else if (mode === ANNOTATION_TOOLS.circle && startPos) {\n//       const { offsetX, offsetY } = nativeEvent;\n//       const radius = Math.sqrt(\n//         Math.pow(offsetX - startPos.x, 2) + Math.pow(offsetY - startPos.y, 2)\n//       );\n//       setCircles((prevCircles) => [\n//         ...prevCircles,\n//         { x: startPos.x, y: startPos.y, radius: radius },\n//       ]);\n//       setStartPos(null);\n//     }\n//   };\n\n//   // Draw the saved freehand paths\n//   const drawPaths = (ctx) => {\n//     paths.forEach((path) => {\n//       ctx.beginPath();\n//       path.forEach(([x, y], index) => {\n//         if (index === 0) {\n//           ctx.moveTo(x, y);\n//         } else {\n//           ctx.lineTo(x, y);\n//         }\n//       });\n//       ctx.stroke();\n//     });\n//   };\n\n//   // Draw the saved circles\n//   const drawCircles = (ctx) => {\n//     circles.forEach(({ x, y, radius }) => {\n//       ctx.beginPath();\n//       ctx.arc(x, y, radius, 0, Math.PI * 2);\n//       ctx.stroke();\n//     });\n//   };\n\n//   // Draw the saved emojis\n//   const drawEmojis = (ctx) => {\n//     emojis.forEach(({ x, y, emoji }) => {\n//       ctx.font = \"40px Arial\";\n//       ctx.fillText(emoji, x - 20, y + 20); // Adjust for emoji size\n//     });\n//   };\n\n//   // Draw a temporary circle (while dragging)\n//   const drawCircle = (x, y, radius) => {\n//     const canvas = canvasRef.current;\n//     const ctx = canvas.getContext(\"2d\");\n//     ctx.clearRect(0, 0, canvas.width, canvas.height);\n//     drawPaths(ctx);\n//     drawCircles(ctx);\n//     drawEmojis(ctx);\n//     ctx.beginPath();\n//     ctx.arc(x, y, radius, 0, Math.PI * 2);\n//     ctx.stroke();\n//   };\n\n//   // Redraw everything on every render\n//   useEffect(() => {\n//     const canvas = canvasRef.current;\n//     const ctx = canvas.getContext(\"2d\");\n//     ctx.clearRect(0, 0, canvas.width, canvas.height);\n//     setCanvasCtx(ctx);\n\n//     drawPaths(ctx);\n//     drawCircles(ctx);\n//     drawEmojis(ctx);\n\n//     if (currentPath.length > 0) {\n//       ctx.beginPath();\n//       currentPath.forEach(([x, y], index) => {\n//         if (index === 0) {\n//           ctx.moveTo(x, y);\n//         } else {\n//           ctx.lineTo(x, y);\n//         }\n//       });\n//       ctx.stroke();\n//     }\n//   }, [paths, circles, emojis, currentPath, canvasSize]);\n  \n//   const useStyles = makeStyles(() => ({\n//     textArea: {\n//       position: 'absolute',\n//       resize: 'none',\n//       overflow: 'hidden',\n//       boxSizing: 'border-box',\n//       zIndex: otherProps.zIndex,\n//       '&:focus-visible': {\n//             outlineOffset: otherProps.isModeratorLocal && '0px',\n//             outline: otherProps.isModeratorLocal ? '-webkit-focus-ring-color auto 1px' : 'none'\n//       },\n//       '&:focus': {\n//             outline: otherProps.isModeratorLocal ? '-webkit-focus-ring-color auto 1px' : 'none'\n//       }\n//     }\n//   }))\n//  const classes = useStyles();\n\n//   return (\n//         <>\n//         <canvas \n//             style={canvasStyle}\n//             ref={canvasRef}\n//             width={canvasSize.width}\n//             height={canvasSize.height}\n//             onMouseDown={startDrawing}\n//             onMouseMove={draw}\n//             onMouseUp={stopDrawing}\n//             onMouseLeave={stopDrawing} // Stop drawing if the mouse leaves the canvas\n//         />\n//         {/* {textboxList?.length ? textboxList?.map((textbox) => (\n//                 <textarea\n//                     key={textbox.id}\n//                     className={classes.textArea}\n//                     value={textbox.text}\n//                     onChange={(e) => handleTextChange(e, textbox.id)}\n//                     autoFocus={otherProps.isModeratorLocal}\n//                     readOnly={!otherProps.isModeratorLocal}\n//                     style={{\n//                       top: textbox.y + 'px',\n//                       left: textbox.x + 'px',\n//                       width: textbox.width + 'px',\n//                       height: textbox.height + 'px',\n//                       maxWidth: `${Math.min(200, 600 - textbox.x)}px`,\n//                       maxHeight: `${Math.min(96, 500 - textbox.y)}px`,\n//                     }}\n//                 />\n//             )) : null} */}\n//           {children}\n//         </>\n//   )\n// }\n\n// export default Canvas\n\n// import React, { useState } from 'react';\n// import { useOnDraw } from '../../hooks/useOnDraw';\n//  import { ANNOTATION_TOOLS } from '../../constants';\n//  import { useOnEmoji } from '../../hooks/useOnEmoji';\n//  import { useOnCircle } from '../../hooks/useOnCircle';\n// import { useOnTextBox } from '../../hooks/useOnTextBox';\n// import { makeStyles } from '@material-ui/core';\n\n// const Canvas = ({\n//     width, \n//     height, \n//     pushMessage,\n//     channel,\n//     setCanvasCtx,\n//     inputProps,\n//     remoteTextboxes\n//   }) => {\n//     const {children, ...otherProps} = inputProps;\n//     const [annotations, setAnnotations] = useState([]);\n//     const emojiHook = useOnEmoji(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps);\n//     const circleHook = useOnCircle(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps);\n//     const textboxHook = useOnTextBox(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps);\n//     const drawHook = useOnDraw(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps);\n    \n//   // Use logic to select the correct hook result\n//   const { setCanvasRef, onMouseDown, handleTextChange, textboxes } = \n//   inputProps.annotationTool === ANNOTATION_TOOLS.emoji ? emojiHook : \n//   inputProps.annotationTool === ANNOTATION_TOOLS.circle ? circleHook :\n//   inputProps.annotationTool === ANNOTATION_TOOLS.textbox ? textboxHook : \n//   drawHook;\n  \n//     const canvasStyle={\n//       position: 'absolute', \n//       zIndex: otherProps.zIndex,\n//       background: 'none'\n//     }\n//   let drawnTextboxes = annotations?.length && annotations?.filter(annotation => annotation.type === ANNOTATION_TOOLS.textbox.toLowerCase())?.map(annotation => annotation.textbox);\n//   let textboxList = textboxes?.length ? textboxes : remoteTextboxes?.length ? remoteTextboxes : drawnTextboxes?.length ? drawnTextboxes : [];\n  \n//   const useStyles = makeStyles(() => ({\n//     textArea: {\n//       position: 'absolute',\n//       resize: 'none',\n//       overflow: 'hidden',\n//       boxSizing: 'border-box',\n//       zIndex: otherProps.zIndex,\n//       '&:focus-visible': {\n//             outlineOffset: otherProps.isModeratorLocal && '0px',\n//             outline: otherProps.isModeratorLocal ? '-webkit-focus-ring-color auto 1px' : 'none'\n//       },\n//       '&:focus': {\n//             outline: otherProps.isModeratorLocal ? '-webkit-focus-ring-color auto 1px' : 'none'\n//       }\n//     }\n//   }))\n//  const classes = useStyles();\n\n//   return (\n//         <>\n//         <canvas \n//             width={width}\n//             height={height}\n//             style={canvasStyle}\n//             ref={setCanvasRef}\n//             onMouseDown={onMouseDown}\n//         />\n//         {textboxList?.length ? textboxList?.map((textbox) => (\n//                 <textarea\n//                     key={textbox.id}\n//                     className={classes.textArea}\n//                     value={textbox.text}\n//                     onChange={(e) => handleTextChange(e, textbox.id)}\n//                     autoFocus={otherProps.isModeratorLocal}\n//                     readOnly={!otherProps.isModeratorLocal}\n//                     style={{\n//                       top: textbox.y + 'px',\n//                       left: textbox.x + 'px',\n//                       width: textbox.width + 'px',\n//                       height: textbox.height + 'px',\n//                       maxWidth: `${Math.min(200, 600 - textbox.x)}px`,\n//                       maxHeight: `${Math.min(96, 500 - textbox.y)}px`,\n//                     }}\n//                 />\n//             )) : null}\n//           {children}\n//         </>\n//   )\n// }\n\n// export default Canvas\n\n","import React, { useState } from 'react'\nimport { useStore } from '../../store';\nimport Canvas from '../Canvas';\n\nconst DrawingBoard = ({\n    pushMessage,\n    channel,\n    canvasCtx,\n    setCanvasCtx,\n    remoteTextboxes,\n    loading,\n    inputProps,\n    canvasRef\n}) => {\n    \n    return (\n        <Canvas \n            width={inputProps.width}\n            height={inputProps.height}\n            pushMessage={pushMessage}\n            channel={channel}\n            canvasRef={canvasRef}\n            canvasCtx={canvasCtx}\n            setCanvasCtx={setCanvasCtx}\n            inputProps={inputProps}\n            remoteTextboxes={remoteTextboxes}\n        />\n    )\n}\n\nexport default DrawingBoard","export const SARISKA_API_KEY = process.env.REACT_APP_SARISKA_MEET_APP_API_KEY;\nexport const MESSAGING_API_SERVICE_HOST = `${process.env.REACT_APP_API_SERVICE_HOST}/api/v1/messaging`;\nexport const WEB_SOCKET_URL = `${process.env.REACT_APP_WEBSOCKET_SERVICE_HOST}/api/v1/messaging/websocket`;\nexport const SARISKA_WEBSITE = 'https://sariska.io';\nexport const SARISKA_COMPANY_NAME = 'Sariska.io';\n\n// export const SARISKA_API_SERVICE_HOST = process.env.NODE_ENV === 'development' ? 'https://api.dev.sariska.io' :  'https://api.sariska.io';\n// export const SARISKA_API_KEY = process.env.NODE_ENV === 'development' ? \"2ffd6f9497ce12122f30d5ec26f1ed923a8a47f98ebc2a8f2b\" : '27fd6f9e85c304447d3cc0fb31e7ba8062df58af86ac3f9437';\n\n// export const MESSAGING_API_SERVICE_HOST = process.env.NODE_ENV === 'development' ? 'http://localhost:4000/api/v1/messaging' ?? 'https://api.dev.sariska.io/api/v1/messaging' : 'https://api.sariska.io/api/v1/messaging';\n// export const WEB_SOCKET_URL = process.env.NODE_ENV === 'development' ? 'ws://localhost:4000/api/v1/messaging/websocket' ?? \"wss://api.dev.sariska.io/api/v1/messaging/websocket\" :  \"wss://api.sariska.io/api/v1/messaging/websocket\";\n// export const SARISKA_WEBSITE = 'https://sariska.io';\n// export const SARISKA_COMPANY_NAME = 'Sariska.io';","export const GENERATE_TOKEN_URL = `${process.env.REACT_APP_API_SERVICE_HOST}/api/v1/misc/generate-token`;\nexport const COMPANY_NAME = 'Sariska';\nexport const GET_PRESIGNED_URL = `${process.env.REACT_APP_API_SERVICE_HOST}/api/v1/misc/get-presigned`;\nexport const ANNOTATION_TOOLS = {\n    pen: 'PEN',\n    emoji: 'EMOJI',\n    circle: 'CIRCLE',\n    textbox: 'TEXTBOX'\n}","import { createContext } from \"react\";\n\nconst SocketContext = createContext();\n\nexport default SocketContext;","import React, { useEffect, useState } from 'react'\nimport { getToken, getUserId, getUserName } from '../../utils';\nimport { Socket } from 'phoenix';\nimport { WEB_SOCKET_URL } from '../../config';\nimport SocketContext from './SocketContext';\n\nconst SocketProvider = ({children}) => {\n  const [socket, setSocket] = useState(null);\n  let userName =  getUserName();\n  let userId = getUserId();\n  useEffect(()=>{\n    const fetchData = async() => {\n        const token = await getToken(userName, userId);\n        const params = {token};\n        const s = new Socket(WEB_SOCKET_URL, {params});\n        s.onOpen(() => console.log('connection open!'));\n        s.onError((e) => console.log('There was an error with the connection!', e));\n        s.onClose(() => {console.log('the connection dropped')});\n        s.connect();\n        setSocket(s);\n    }\n    fetchData();\n    return () => {\n        if(socket){\n            socket.disconnect();\n        }\n    }\n  },[]);\n  \n  return (\n    <SocketContext.Provider value={socket}>\n        {children}\n    </SocketContext.Provider>\n  )\n}\n\nexport default SocketProvider","import { createContext } from \"react\";\n\nconst StoreContext = createContext();\n\nexport default StoreContext;","import React, { useReducer } from \"react\"\nimport initialContextState from \"../../store/initialState\"\nimport { rootReducer } from \"../../store/reducer\";\nimport StoreContext from \"./StoreContext\";\n\nexport const StoreProvider = ({children}) => {\n    const [state, dispatch] = useReducer(rootReducer, initialContextState);\n    \n    return (\n        <StoreContext.Provider value={{\n            users: state.users,\n            rooms: state.rooms,\n            dispatch\n        }}>\n            {children}\n        </StoreContext.Provider>\n    )\n}","import React, { useEffect, useRef } from 'react'\n\nconst UseEventHandler = (channel, event, setLoading, handler) => {\n    const handle = useRef(handler);\n    handle.current = handler;\n    useEffect(()=>{\n        if(!channel){\n            return;\n        }\n\n        setLoading(true);\n\n        const ref = channel.on(`${event}`, (message) => {\n            handle.current(message);\n            setLoading(false);\n        });\n\n        return () => {\n            channel.off(event, ref);\n            setLoading(false);\n        }\n\n    },[channel, event]);\n}\n\nexport default UseEventHandler","import React, { useRef, useEffect, useState } from 'react';\nimport { calculateCircleRadius, clearCanvas, computePointInCanvas, onDrawCircle, redrawAnnotations } from \"../utils\";\nimport { ANNOTATION_TOOLS } from '../constants';\n\nexport function useOnCircle(pushMessage, channel, setCanvasCtx, annotations, setAnnotations, otherProps) {\n    const canvasRef = useRef(null);\n    const startPointRef = useRef(null);\n    const isDrawingRef = useRef(false);\n    const [circles, setCircles] = useState([]);\n\n    const mouseMoveListenerRef = useRef(null);\n    const mouseUpListenerRef = useRef(null);\n    useEffect(() => {\n        if(otherProps.annotationTool !== ANNOTATION_TOOLS.circle){\n            return;\n        }\n        const ctx = canvasRef?.current?.getContext('2d');\n        const { parentCanvasRef, ...props } = otherProps;\n        parentCanvasRef.current = canvasRef?.current;\n        setCanvasCtx(ctx);\n\n        function initMouseMoveListener() {\n            const mouseMoveListener = (e) => {\n                if (isDrawingRef.current) {\n                    const currentPoint = computePointInCanvas(e.clientX, e.clientY, canvasRef?.current);\n                    const startPoint = startPointRef.current;\n                    const radius = calculateCircleRadius(startPoint, currentPoint);\n                    redrawAnnotations({ctx, annotations, props});\n                    onDrawCircle({ ctx, center: startPoint, radius, props});\n                }\n            };\n            mouseMoveListenerRef.current = mouseMoveListener;\n            window.addEventListener('mousemove', mouseMoveListener);\n        }\n\n        function initMouseUpListener() {\n            const mouseUpListener = (event) => {\n                if (isDrawingRef.current) {\n                    const currentPoint = computePointInCanvas(event.clientX, event.clientY, canvasRef?.current);\n                    const startPoint = startPointRef.current;\n                    const radius = calculateCircleRadius(startPoint, currentPoint);\n                    setCircles([...circles, { center: startPoint, radius }]);\n                    setAnnotations(annotations => ([...annotations, {type: 'circle', ctx, center: startPoint, radius}]))\n\n                    pushMessage(JSON.stringify({ ctx, center: startPoint, radius, props }), channel);\n                    isDrawingRef.current = false;\n                    startPointRef.current = null;\n\n                }\n            };\n            mouseUpListenerRef.current = mouseUpListener;\n            window.addEventListener('mouseup', mouseUpListener);\n        }\n\n        function removeMouseEventListeners() {\n            if (mouseMoveListenerRef.current) {\n                window.removeEventListener('mousemove', mouseMoveListenerRef.current);\n            }\n            if (mouseUpListenerRef.current) {\n                window.removeEventListener('mouseup', mouseUpListenerRef.current);\n            }\n        }\n\n        if (otherProps.isParticipantAccess || otherProps.isModerator) {\n            initMouseMoveListener();\n            initMouseUpListener();\n        }\n\n        if (otherProps.isCanvasClear) {\n            clearCanvas(ctx, otherProps.width, otherProps.height);\n        }\n\n        return () => {\n            removeMouseEventListeners();\n        };\n    }, [\n        canvasRef,\n        onDrawCircle,\n        channel,\n        circles,\n        otherProps,\n        setCanvasCtx,\n        annotations?.length\n    ]);\n\n    function setCanvasRef(ref) {\n        if (!ref) return;\n        canvasRef.current = ref;\n    }\n\n    function onMouseDown(e) {\n        if (!canvasRef?.current) return;\n        isDrawingRef.current = true;\n        const point = computePointInCanvas(e.clientX, e.clientY, canvasRef?.current);\n        startPointRef.current = point; // Initialize the previous point with the current point\n    }\n\n    return {\n        setCanvasRef,\n        onMouseDown,\n    };\n}","import { useEffect, useRef, useState } from \"react\";\nimport { clearCanvas, computePointInCanvas, onDraw, redrawAnnotations } from \"../utils\";\nimport { ANNOTATION_TOOLS } from \"../constants\";\n\nexport function useOnDraw(\n    pushMessage,\n    channel,\n    setCanvasCtx,\n    annotations,\n    setAnnotations,\n    otherProps\n    ){\n    const [annotation, setAnnotation] = useState([]);\n   // const [initialCanvasSize, setInitialCanvasSize] = useState({ width: 0, height: 0 });\n    const [canvasSize, setCanvasSize] = useState({ width: props.width, height: props.height });\n\n    const canvasRef = useRef(null);\n    const prevPointRef = useRef()\n    const isDrawingRef = useRef(false);\n\n    const mouseMoveListenerRef = useRef(null);\n    const mouseUpListenerRef = useRef(null);\n    \n    const handleResize = () => {\n        const newWidth = props.width;\n        const newHeight = props.height;\n    \n        const scaleX = newWidth / canvasSize.width;\n        const scaleY = newHeight / canvasSize.height;\n    \n        const scaledPaths = paths.map((path) =>\n          path.map(([x, y]) => [x * scaleX, y * scaleY])\n        );\n    \n        const scaledCircles = circles.map((circle) => ({\n          x: circle.x * scaleX,\n          y: circle.y * scaleY,\n          radius: circle.radius * Math.min(scaleX, scaleY),\n        }));\n    \n        const scaledEmojis = emojis.map((emoji) => ({\n          ...emoji,\n          x: emoji.x * scaleX,\n          y: emoji.y * scaleY\n        }));\n    \n        setCanvasSize({ width: newWidth, height: newHeight });\n        setPaths(scaledPaths);\n        setCircles(scaledCircles);\n        setEmojis(scaledEmojis);\n      };\n\n    // Function to handle window resize and persist annotations\n    // function handleResize() {\n    //     const canvas = canvasRef.current;\n    //     if (!canvas) return;\n\n    //     const ctx = canvas.getContext(\"2d\");\n    //     const { width, height } = canvas.getBoundingClientRect();\n\n    //     // Calculate the scale factors based on initial canvas size\n    //     const scaleX = width / initialCanvasSize.width;\n    //     const scaleY = height / initialCanvasSize.height;\n\n    //     // Clear the canvas\n    //     clearCanvas(ctx, width, height);\n\n    //     // Redraw annotations after clearing\n    //     redrawAnnotations({ ctx, annotations, props: otherProps, scaleX, scaleY });\n    // }\n\n    useEffect(()=>{\n        if(otherProps.annotationTool !== ANNOTATION_TOOLS.pen){\n            return;\n        }\n        const ctx = canvasRef?.current?.getContext('2d');\n        const {parentCanvasRef, ...props} = otherProps;\n        parentCanvasRef.current = canvasRef?.current;\n        setCanvasCtx(ctx);\n        \n        // Store initial canvas dimensions\n        const { width, height } = canvasRef?.current.getBoundingClientRect();\n       // setInitialCanvasSize({ width, height });\n\n        \n        // Initialize window resize listener\n      //  window.addEventListener('resize', handleResize);\n\n        function initMouseMoveListener(){\n            const mouseMoveListener = (e) => {\n                if(isDrawingRef.current){\n                    const point = computePointInCanvas(e.clientX, e.clientY, canvasRef?.current);\n                    let prevPoint = prevPointRef.current;\n                    if(onDraw) {\n                        onDraw({ctx, point, prevPoint, props});\n                        setAnnotation(annotation => ([...annotation, {ctx, point, prevPoint, props}]));\n                        setAnnotations(annotations => ([...annotations, {type: 'pen', ctx, point, prevPoint, props}]));\n                        redrawAnnotations({ctx, annotations, props});\n                    }\n                    if(channel) {\n                        pushMessage(JSON.stringify({ctx, point, prevPoint, props}), channel);\n                    }\n                    prevPointRef.current = point;\n                }\n            }\n            mouseMoveListenerRef.current = mouseMoveListener;\n            window.addEventListener(\"mousemove\", mouseMoveListener);\n        }\n        function initMouseUpListener(){\n            const mouseUpListener=()=>{\n                isDrawingRef.current = false;\n                prevPointRef.current = null;\n            }\n            mouseUpListenerRef.current = mouseUpListener;\n            window.addEventListener('mouseup', mouseUpListener);\n        }\n        function removeMouseEventListeners(){\n            if(mouseMoveListenerRef.current){\n                window.removeEventListener('mousemove', mouseMoveListenerRef.current);\n            }\n            if(mouseUpListenerRef.current){\n                window.removeEventListener('mouseup', mouseUpListenerRef.current);\n            }\n        }\n\n        if(props.isParticipantAccess){\n            initMouseMoveListener();\n            initMouseUpListener();\n        }else{\n            if(props.isModerator){\n                initMouseMoveListener();\n                initMouseUpListener();\n            }\n        }\n        \n        if(props.isCanvasClear){\n            clearCanvas( ctx, props.width, props.height );\n        }\n\n        if(props.isImageSaved){\n            props.saveImage(annotation);\n        }\n        return ()=>{\n          //  window.removeEventListener('resize', handleResize); // Clean up resize listener\n            if(props.isParticipantAccess){\n                removeMouseEventListeners();\n            }else{\n                if(props.isModerator){\n                    removeMouseEventListeners();\n                }\n            }\n        }\n    },[\n        canvasRef,\n        onDraw, \n        channel,\n     //   otherProps.isCanvasClear,\n      //  otherProps.isImageSaved,\n      //  otherProps.lineColor,\n        otherProps,\n        setCanvasCtx,\n        annotations?.length\n\n    ]);\n\n    function setCanvasRef(ref){\n        if(!ref) return;\n        canvasRef.current = ref;\n      //  handleResize(); // Ensure annotations are redrawn if the canvas size has changed\n    }\n    \n    function onMouseDown(e){\n        console.log('onMouseDown', canvasRef?.current, !otherProps.isModerator, !otherProps.isModeratorLocal, !canvasRef?.current && !otherProps.isModerator)\n        if(!canvasRef?.current) return;\n        if(!otherProps.isModeratorLocal) return;\n        console.log('onMouseDown')\n        const {parentCanvasRef, ...props} = otherProps;\n        isDrawingRef.current = true;\n        const ctx = canvasRef?.current?.getContext('2d');\n        const point = computePointInCanvas(e.clientX, e.clientY, canvasRef?.current);\n        let prevPoint = prevPointRef.current;\n        setAnnotation(annotation => ([...annotation, {ctx, point, prevPoint, props}]));\n        setAnnotations(annotations => ([...annotations, {type: 'pen', ctx, point, prevPoint, props}]));\n        onDraw({ctx, point, prevPoint, props});\n        if(channel) {\n            pushMessage(JSON.stringify({ctx, point, prevPoint, props}), channel);\n        }\n    }\n    \n    return {\n        setCanvasRef,\n        onMouseDown\n    };\n}","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { clearCanvas, computePointInCanvas, onDrawEmoji, redrawAnnotations } from \"../utils\"; // Assume these utils are predefined\nimport { ANNOTATION_TOOLS } from \"../constants\";\n\nexport function useOnEmoji(\n    pushMessage,\n    channel,\n    setCanvasCtx,\n    annotations,\n    setAnnotations,\n    otherProps\n) {\n    const [emojis, setEmojis] = useState([]);\n\n    const canvasRef = useRef(null);\n    \n    const setCanvasRef = useCallback((ref) => {\n        if(otherProps.annotationTool !== ANNOTATION_TOOLS.emoji){\n            return;\n        }\n        if (!ref) return;\n        canvasRef.current = ref;\n    }, [otherProps.annotationTool]);\n    \n    useEffect(() => {\n        if(otherProps.annotationTool !== ANNOTATION_TOOLS.emoji){\n            return;\n        }\n        const canvas = canvasRef?.current;\n\n        if(canvas){\n            const ctx = canvas.getContext('2d');\n            const { parentCanvasRef, isCanvasClear, width, height } = otherProps;\n            parentCanvasRef.current = canvas;\n            setCanvasCtx(prevCtx => {\n                if (prevCtx !== ctx) {\n                    return ctx;\n                }\n                return prevCtx;\n            });\n            if (annotations?.length !== 0) {\n                setAnnotations([...annotations]);\n            }\n\n            if (isCanvasClear) {\n                clearCanvas(ctx, width, height);\n            }\n        }\n    }, [\n        canvasRef,\n        channel,\n       // otherProps,\n      //  isCanvasClear\n        setCanvasCtx,\n        annotations?.length\n    ]);\n\nconst onMouseDown = useCallback((event) => {\n    if(otherProps.annotationTool !== ANNOTATION_TOOLS.emoji){\n        return;\n    }\n    if(!otherProps.isModerator){\n        return ;\n    }\n    const ctx = canvasRef?.current?.getContext('2d');\n    const { parentCanvasRef, ...props } = otherProps;\n\n    const point = computePointInCanvas(event.clientX, event.clientY, canvasRef?.current);\n    \n    setEmojis((prevEmojis) => [...prevEmojis, { ctx, point, emoji: props.emojiType }]);\n    setAnnotations((annotations) => [...annotations, { type: 'emoji', ctx, point, emoji: props.emojiType,\n                                     emojis:  [...emojis, { ctx, point, emoji: props.emojiType }]}]);\n    redrawAnnotations({ctx, annotations, props});\n    onDrawEmoji({ctx, point, emoji: props.emojiType})\n    if (channel) {\n        pushMessage(JSON.stringify({ ctx, point, emoji: props.emojiType }), channel);\n    }\n  }, [emojis?.length, channel, otherProps, setAnnotations]);\n\n    return {\n        setCanvasRef,\n        onMouseDown\n    };\n}\n","import { useState, useRef, useEffect } from 'react';\nimport { clearCanvas, measureText, redrawAnnotations } from '../utils';\nimport { ANNOTATION_TOOLS } from '../constants';\n\nexport function useOnTextBox(\n    pushMessage,\n    channel,\n    setCanvasCtx,\n    annotations,\n    setAnnotations,\n    otherProps) {\n    const [textboxes, setTextboxes] = useState([]);\n    const canvasRef = useRef(null);\n    useEffect(() => {\n        if(otherProps.annotationTool !== ANNOTATION_TOOLS.textbox){\n            return;\n        }\n        const ctx = canvasRef?.current?.getContext('2d');\n         const { parentCanvasRef, ...props } = otherProps;\n        parentCanvasRef.current = canvasRef?.current;\n        setCanvasCtx(ctx);\n        setAnnotations(annotations => ([...annotations]));\n\n        if (props.isCanvasClear) {\n            clearCanvas(ctx, props.width, props.height);\n        }\n    }, [\n        canvasRef,\n         channel,\n       //  otherProps.isCanvasClear,\n         setCanvasCtx,\n         otherProps.annotationTool,\n       // setAnnotations,\n       // annotations?.length\n    ]);\n\n    const handleCanvasClick = (e) => {\n        if(!otherProps.isModerator){\n            return ;\n        }\n        const canvas = canvasRef?.current;\n        const rect = canvas?.getBoundingClientRect();\n        const ctx = canvasRef?.current?.getContext('2d');\n\n        // Get click coordinates relative to the canvas\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n\n        const newTextbox = {\n            id: Date.now(),\n            x: x,\n            y: y,\n            width: 200, // Max width or till the canvas's right end\n            height: 32, // Min height\n            text: ''\n        };\n\n        setTextboxes(textboxes => ([...textboxes, newTextbox]));\n        redrawAnnotations({ctx, annotations, props: otherProps});\n        setAnnotations((annotations) => [...annotations, { type: 'textbox', ctx, textbox: newTextbox }])\n        pushMessage(JSON.stringify({ctx, textbox: newTextbox }), channel);\n    };\n\n    const handleTextChange = (e, id) => {\n        const newText = e.target.value;\n        const ctx = canvasRef?.current?.getContext('2d');\n        setTextboxes((prevTextboxes) =>\n            prevTextboxes.map((textbox) => {\n                if (textbox.id === id) {\n                    const textMetrics = measureText(newText, textbox.width, canvasRef);\n                    let newWidth = Math.min(200, canvasRef.current.width - textbox.x);\n                    let newHeight = Math.max(textMetrics.height, 32);\n                    newHeight = Math.min(newHeight, 96);\n                    let newTextbox = {\n                        ...textbox,\n                        text: newText,\n                        width: newWidth,\n                        height: newHeight,\n                    }\n                   // redrawAnnotations({ctx, annotations, props: otherProps});\n                    setAnnotations(annotations => ([...annotations, {type: 'textbox', ctx, textbox: newTextbox }]))\n                    pushMessage(JSON.stringify({ctx, textbox: newTextbox }), channel);\n                    return newTextbox;\n                }\n              //  redrawAnnotations({ctx, annotations, props: otherProps});\n                setAnnotations(annotations => ([...annotations, {type: 'textbox', ctx, textbox}]))\n                pushMessage(JSON.stringify({ctx, textbox }), channel);\n                return textbox;\n            })\n        );\n    };\n\n    function setCanvasRef(ref) {\n        if (!ref) return;\n        canvasRef.current = ref;\n    }\n\n    function onMouseDown(e) {\n        handleCanvasClick(e);\n    }\n\n    return {\n        setCanvasRef,\n        onMouseDown,\n        handleTextChange,\n        textboxes\n    };\n}\n","import { renderAction } from \"../../utils\";\n\nexport const setRoom = (type, payload)=>renderAction( type, payload );\n\nexport const getRoom = (type, payload)=>renderAction( type, payload );","export const SET_ROOM = 'SET_ROOM';\nexport const GET_ROOM = 'GET_ROOM';\nexport const SET_USER = 'SET_USER';\nexport const GET_USER = 'GET_USER';\n","import { renderAction } from \"../../utils\";\n\nexport const setUser = (type, payload)=>renderAction( type, payload );\n\nexport const getUser = (type)=>renderAction( type );","import { useContext } from \"react\";\nimport StoreContext from \"../context/store/StoreContext\";\n\nexport const useStore = () => useContext(StoreContext);","\nimport { initialState as initialStateRoom } from \"../reducer/room\";\nimport { initialState as initialStateUser } from \"../reducer/user\";\n\nconst initialContextState = {\n    rooms: initialStateRoom,\n    users: initialStateUser\n}\n\nexport default initialContextState;","import {room as roomReducer} from './room';\nimport {user as userReducer} from './user';\n\nexport const rootReducer = ({\n    room,\n    user\n}, action) => {\n    return {\n        rooms: roomReducer(room, action),\n        users: userReducer(user, action)\n    };\n}","import { GET_ROOM, SET_ROOM } from \"../action/types\";\n\nexport const initialState = {\n    room: JSON.parse(localStorage.getItem('sariska-collaborative-room')) || {}\n}\n\nexport const room = (state = initialState, action) => {\n    switch(action.type){\n        case SET_ROOM:\n            localStorage.setItem(\"sariska-collaborative-room\", JSON.stringify(action.payload));\n            state.room = action.payload;\n            return {...state};\n        case GET_ROOM:\n            return {...state.room};\n        default:\n            return {...state};\n    }\n}","import { GET_USER, SET_USER } from \"../action/types\";\n\nexport const initialState = {\n    user: JSON.parse(localStorage.getItem('sariska-collaborative-user')) || {}\n}\n\nexport const user = (state = initialState, action) => {\n    switch(action.type){\n        case SET_USER:\n            localStorage.setItem(\"sariska-collaborative-user\", JSON.stringify(action.payload));\n            state.user = action.payload;\n            return {...state};\n        case GET_USER:\n            return state.user;\n        default:\n            return {...state};\n    }\n}","import { SARISKA_API_KEY } from \"../config\";\nimport { ANNOTATION_TOOLS, GENERATE_TOKEN_URL } from \"../constants\";\n\nexport function getUserId() {\n    let storedUserId = JSON.parse((localStorage.getItem('sariska-collaborative-userId')));\n    if(storedUserId){\n        return storedUserId;\n    }\n    const characters ='abcdefghijklmnopqrstuvwxyz0123456789';\n    function generateString(length) {\n        let result = ' ';\n        const charactersLength = characters.length;\n        for ( let i = 0; i < length; i++ ) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        }\n        return result;\n    }\n    let userId = generateString(12).trim();\n    localStorage.setItem('sariska-collaborative-userId', JSON.stringify(userId));\n    return userId;\n} \n\nexport function getUserName() {\n    let storedUserName = JSON.parse((localStorage.getItem('sariska-collaborative-userName')));\n    if(storedUserName){\n        return storedUserName;\n    }\n    const characters ='abcdefghijklmnopqrstuvwxyz';\n    function generateString(length) {\n        let result = ' ';\n        const charactersLength = characters.length;\n        for ( let i = 0; i < length; i++ ) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        }\n        return result;\n    }\n    const str = generateString(8).trim()\n    const strArr = str.match(/.{4}/g);\n    const userName = strArr.join(\"_\")\n    localStorage.setItem('sariska-collaborative-userName', JSON.stringify(userName));\n    return userName;\n} \n\nexport function getRoomId() {\n    let storedRoomId = JSON.parse((localStorage.getItem('sariska-collaborative-roomId')));\n    if(storedRoomId){\n        return storedRoomId;\n    }\n    const characters ='abcdefghijklmnopqrstuvwxyz0123456789';\n    function generateString(length) {\n        let result = ' ';\n        const charactersLength = characters.length;\n        for ( let i = 0; i < length; i++ ) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        }\n        return result;\n    }\n    const roomId = generateString(9).trim();\n    localStorage.setItem('sariska-collaborative-roomId', JSON.stringify(roomId));\n    return roomId;\n} \n\nexport function getRoomName() {\n    let storedRoomName = JSON.parse((localStorage.getItem('sariska-collaborative-roomName')));\n    if(storedRoomName){\n        return storedRoomName;\n    }\n    const characters ='abcdefghijklmnopqrstuvwxyz';\n    function generateString(length) {\n        let result = ' ';\n        const charactersLength = characters.length;\n        for ( let i = 0; i < length; i++ ) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        }\n        return result;\n    }\n    const str = generateString(9).trim()\n    const strArr = str.match(/.{3}/g);\n    const roomName = strArr.join(\"-\")\n    localStorage.setItem('sariska-collaborative-roomName', JSON.stringify(roomName));\n    return roomName;\n} \n\nexport const getToken = async (username, userId)=> {\n    const body = {\n        method: \"POST\",\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            apiKey: `${SARISKA_API_KEY}`, // enter your app secret,\n            user: {\n                id: userId,\n                name: username\n            },\n        })\n    };\n\n    try {\n        const response = await fetch(GENERATE_TOKEN_URL, body);\n        if (response.ok) {\n            const json = await response.json();\n            let token = json.token;\n            localStorage.setItem('sariska-colloborative-token', JSON.stringify(token));\n            return json.token;\n        } else {\n            console.log(response.status);\n        }\n    } catch (error) {\n        console.log(error);\n    }\n\n}\n\nexport const renderAction = (type, payload) => {\n    if(payload){\n        return {\n            type,\n            payload\n        }\n    }else{\n        return {\n            type\n        }\n    }\n}\n\n\nexport function clearCanvas(ctx, width, height){\n    ctx.clearRect(0, 0, width, height)\n}\n\nexport function drawLine(ctx, end, start, color, width) {\n    if(!ctx) return;\n    start = start ?? end;\n    ctx.beginPath();\n    ctx.lineWidth= width;\n    ctx.strokeStyle = color;\n    ctx.moveTo(start?.x, start?.y);\n    ctx.lineTo(end?.x, end?.y);\n    ctx.stroke();\n\n    ctx.fillStyle = color;\n    ctx.beginPath();\n    ctx.arc(start?.x, start?.y, 2, 0, 2 * Math.PI);\n    ctx.fill();\n}\n\nexport function onDraw (data) {\n    drawLine(data.ctx, data.point, data.prevPoint, data?.props?.lineColor,  data?.props?.lineWidth);\n}\n\nexport function onDrawEmoji({ctx, point, emoji, emojis}) {\n    if(!ctx) return;\n    ctx.font = '24px Arial';\n    ctx.textBaseline = 'middle';\n    ctx.textAlign = 'center';\n    ctx.fillStyle = 'red';\n    if(emojis?.length){\n    emojis.forEach(({ x, y }) => {\n        ctx.fillText(emoji || '', x, y);\n      });\n    }\n    ctx.fillText(emoji || '', point?.x, point?.y); // Draw the latest emoji\n}\n\nexport function onDrawCircle ({ ctx, center, radius, props }) {\n    if(!ctx) return;\n    if (center) {\n        ctx.beginPath();\n        ctx.arc(center.x, center.y, radius, 0, 2 * Math.PI);\n        ctx.strokeStyle = '#fff';\n        ctx.lineWidth = 2;\n        ctx.stroke();\n    }\n};\n\nexport function computePointInCanvas(clientX, clientY, refCurrent){\n    if(refCurrent){\n        const boundingRect = refCurrent.getBoundingClientRect();\n        return {\n            x: clientX - boundingRect.left,\n            y: clientY - boundingRect.top\n        }\n    }else{\n        return null;\n    }\n}\n\nexport const calculateCircleRadius = (startPos, currentPos) => {\n    return Math.sqrt(\n        Math.pow(currentPos.x - startPos.x, 2) +\n        Math.pow(currentPos.y - startPos.y, 2)\n    );\n}\n\nexport const measureText = (text, maxWidth, canvasRef) => {\n    const ctx = canvasRef?.current?.getContext('2d');\n    ctx.font = '16px Arial';\n\n    const words = text.split(' ');\n    let line = '';\n    let height = 32; // Start with min height\n    let width = 0;\n\n    words.forEach((word, index) => {\n        let testLine = line + word;\n        if (index < words.length - 1) {\n            testLine += ' ';\n        }\n        const testWidth = ctx.measureText(testLine).width;\n\n        if (testWidth > maxWidth && line.length > 0) {\n            line = word + ' ';\n            height += 16;\n        } else {\n            line = testLine;\n        }\n\n        width = Math.max(width, testWidth);\n    });\n\n    return {\n        width: Math.min(width, maxWidth),\n        height: height,\n    };\n};\n\nexport const getAllRemoteTextBoxes =(remoteTextboxes, textbox) => {\n    let allRemoteTextBoxes = remoteTextboxes?.map((remoteTextbox) => {\n        if (remoteTextbox.id === textbox.id) { \n          return {...textbox};\n        }else{\n          return {...remoteTextbox};\n        }\n      });\n      if(!allRemoteTextBoxes?.some(remoteTextbox =>remoteTextbox.id === textbox.id )){\n        allRemoteTextBoxes.push(textbox);\n      }\n      return allRemoteTextBoxes;\n}\n\nexport const setAllRemoteTextBoxes = (content, remoteTextboxes, setRemoteTextboxes) => {\n    if(content?.textbox){\n        const {textbox} = content;\n        if(remoteTextboxes?.length){\n          let allRemoteTextBoxes = getAllRemoteTextBoxes(remoteTextboxes, textbox);\n          setRemoteTextboxes(allRemoteTextBoxes)\n        }else{\n            setRemoteTextboxes([{...textbox}]);\n        }\n    }\n}\n\nexport const redrawAnnotations = ({ctx, annotations, props}) => {\n    if(!ctx) return;\n    if(props.annotationTools !== ANNOTATION_TOOLS.emoji){\n        clearCanvas(ctx, props.width, props.height);\n    }\n    annotations?.forEach(annotation => {\n        const {type, ...params} = annotation;\n        if(type === 'pen'){\n            onDraw(params);\n        }else if(type === 'emoji'){\n            onDrawEmoji(params);\n        }else if(type === 'circle'){\n            onDrawCircle({ ctx, center: annotation.center, radius: annotation.radius, props });\n        }else{\n            return;\n        }\n    })\n};\n\n\nexport const getCanvasPosition = (e, canvasRef) => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    return {\n      offsetX: e.clientX - rect.left,\n      offsetY: e.clientY - rect.top,\n    };\n  };\n\nexport const initializeAnnotation = (type, canvasCtx, canvasRef) => {\n    const { offsetX, offsetY } = getCanvasPosition(e, canvasRef);\n    if(type === 'pen'){\n        canvasCtx.beginPath();\n        canvasCtx.moveTo(offsetX, offsetY);\n    }\n}\n\nexport const drawAnnotation = (type, canvasCtx, canvasRef) => {\n    const { offsetX, offsetY } = getCanvasPosition(e, canvasRef);\n    if(type === 'pen'){\n        canvasCtx.lineTo(offsetX, offsetY);\n        canvasCtx.strokeStyle = 'red';\n        canvasCtx.lineWidth = 2;\n        canvasCtx.stroke();\n    }\n}\nexport const stopAnnotation = (type, canvasCtx) => {\n    if(type === 'pen'){\n        canvasCtx.closePath();\n    }\n}\n\nexport const redraw = (context, canvasRef, annotation) => {\n    if(!context && !(canvasRef && canvasRef?.current)) return;\n    const canvas = canvasRef.current;\n    context.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas\n\n    if(annotation && annotation?.length){\n        let paths = annotation?.filter(item => item.type === 'pen');\n        let circles = annotation?.filter(item => item.type === 'circle');\n        let emojis = annotation?.filter(item => item.type === 'emoji');\n        let currentCircle = annotation?.filter(item => item.type === 'currentCircle');\n        console.log('annotationpath', annotation, paths, circles, emojis, currentCircle);\n\n        // Redraw freehand paths\n        paths.forEach((item) => {\n            if (item.pen?.length > 0) {\n                const path = item.pen;\n                const startX = path[0].x * canvas.width;\n                const startY = path[0].y * canvas.height;\n                context.beginPath();\n                context.moveTo(startX, startY);\n\n                path.forEach((point) => {\n                const x = point.x * canvas.width;\n                const y = point.y * canvas.height;\n                context.lineTo(x, y);\n                });\n\n                context.strokeStyle = 'red';\n                context.lineWidth = 2;\n                context.stroke();\n                context.closePath();\n            }\n        });\n\n        // Redraw circles\n        circles.forEach((item) => {\n        if(item?.circle){\n            const circle = item.circle;\n            const centerX = circle.x * canvas.width;\n            const centerY = circle.y * canvas.height;\n            const radius = circle.radius * canvas.width; // Using width scaling for simplicity\n            context.beginPath();\n            context.arc(centerX, centerY, radius, 0, Math.PI * 2);\n            context.strokeStyle = 'blue';\n            context.lineWidth = 2;\n            context.stroke();\n            context.closePath();\n        }\n        });\n\n        // If currently drawing a circle, draw it\n        \n        if (currentCircle && currentCircle?.length && currentCircle[0].circle) {\n            console.log('currentCircle in', currentCircle)\n            const circle = currentCircle[0].circle\n            const centerX = circle.x * canvas.width;\n            const centerY = circle.y * canvas.height;\n            const radius = circle.radius * canvas.width;\n            context.beginPath();\n            context.arc(centerX, centerY, radius, 0, Math.PI * 2);\n            context.strokeStyle = 'blue';\n            context.lineWidth = 2;\n            context.stroke();\n            context.closePath();\n        }\n\n            // Redraw emojis\n        emojis.forEach((item) => {\n            if(item.emoji){\n                let emoji = item.emoji;\n                const x = emoji.x * canvas.width;\n                const y = emoji.y * canvas.height;\n                context.font = '30px Arial';\n                context.fillText(emoji.emoji, x-15,y+15);\n            }\n        });\n    }\n  };","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.App {\n  text-align: center;\n}\n\n.App-logo {\n  height: 40vmin;\n  pointer-events: none;\n}\n\n@media (prefers-reduced-motion: no-preference) {\n  .App-logo {\n    animation: App-logo-spin infinite 20s linear;\n  }\n}\n\n.App-header {\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(10px + 2vmin);\n  color: white;\n}\n\n.App-link {\n  color: #61dafb;\n}\n\n@keyframes App-logo-spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/App.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAkB;AACpB;;AAEA;EACE,cAAc;EACd,oBAAoB;AACtB;;AAEA;EACE;IACE,4CAA4C;EAC9C;AACF;;AAEA;EACE,yBAAyB;EACzB,iBAAiB;EACjB,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,uBAAuB;EACvB,6BAA6B;EAC7B,YAAY;AACd;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE;IACE,uBAAuB;EACzB;EACA;IACE,yBAAyB;EAC3B;AACF\",\"sourcesContent\":[\".App {\\n  text-align: center;\\n}\\n\\n.App-logo {\\n  height: 40vmin;\\n  pointer-events: none;\\n}\\n\\n@media (prefers-reduced-motion: no-preference) {\\n  .App-logo {\\n    animation: App-logo-spin infinite 20s linear;\\n  }\\n}\\n\\n.App-header {\\n  background-color: #282c34;\\n  min-height: 100vh;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: calc(10px + 2vmin);\\n  color: white;\\n}\\n\\n.App-link {\\n  color: #61dafb;\\n}\\n\\n@keyframes App-logo-spin {\\n  from {\\n    transform: rotate(0deg);\\n  }\\n  to {\\n    transform: rotate(360deg);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `body {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n    monospace;\n}\n\niframe[style=\"position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; border: none; z-index: 2147483647;\"] {\n  pointer-events: none;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/index.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,SAAS;EACT;;cAEY;EACZ,mCAAmC;EACnC,kCAAkC;AACpC;;AAEA;EACE;aACW;AACb;;AAEA;EACE,oBAAoB;AACtB\",\"sourcesContent\":[\"body {\\n  margin: 0;\\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\\n    sans-serif;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n}\\n\\ncode {\\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\\n    monospace;\\n}\\n\\niframe[style=\\\"position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; border: none; z-index: 2147483647;\\\"] {\\n  pointer-events: none;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./App.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./App.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;","// js/phoenix/utils.js\nvar closure = (value) => {\n  if (typeof value === \"function\") {\n    return value;\n  } else {\n    let closure2 = function() {\n      return value;\n    };\n    return closure2;\n  }\n};\n\n// js/phoenix/constants.js\nvar globalSelf = typeof self !== \"undefined\" ? self : null;\nvar phxWindow = typeof window !== \"undefined\" ? window : null;\nvar global = globalSelf || phxWindow || global;\nvar DEFAULT_VSN = \"2.0.0\";\nvar SOCKET_STATES = { connecting: 0, open: 1, closing: 2, closed: 3 };\nvar DEFAULT_TIMEOUT = 1e4;\nvar WS_CLOSE_NORMAL = 1e3;\nvar CHANNEL_STATES = {\n  closed: \"closed\",\n  errored: \"errored\",\n  joined: \"joined\",\n  joining: \"joining\",\n  leaving: \"leaving\"\n};\nvar CHANNEL_EVENTS = {\n  close: \"phx_close\",\n  error: \"phx_error\",\n  join: \"phx_join\",\n  reply: \"phx_reply\",\n  leave: \"phx_leave\"\n};\nvar TRANSPORTS = {\n  longpoll: \"longpoll\",\n  websocket: \"websocket\"\n};\nvar XHR_STATES = {\n  complete: 4\n};\n\n// js/phoenix/push.js\nvar Push = class {\n  constructor(channel, event, payload, timeout) {\n    this.channel = channel;\n    this.event = event;\n    this.payload = payload || function() {\n      return {};\n    };\n    this.receivedResp = null;\n    this.timeout = timeout;\n    this.timeoutTimer = null;\n    this.recHooks = [];\n    this.sent = false;\n  }\n  /**\n   *\n   * @param {number} timeout\n   */\n  resend(timeout) {\n    this.timeout = timeout;\n    this.reset();\n    this.send();\n  }\n  /**\n   *\n   */\n  send() {\n    if (this.hasReceived(\"timeout\")) {\n      return;\n    }\n    this.startTimeout();\n    this.sent = true;\n    this.channel.socket.push({\n      topic: this.channel.topic,\n      event: this.event,\n      payload: this.payload(),\n      ref: this.ref,\n      join_ref: this.channel.joinRef()\n    });\n  }\n  /**\n   *\n   * @param {*} status\n   * @param {*} callback\n   */\n  receive(status, callback) {\n    if (this.hasReceived(status)) {\n      callback(this.receivedResp.response);\n    }\n    this.recHooks.push({ status, callback });\n    return this;\n  }\n  /**\n   * @private\n   */\n  reset() {\n    this.cancelRefEvent();\n    this.ref = null;\n    this.refEvent = null;\n    this.receivedResp = null;\n    this.sent = false;\n  }\n  /**\n   * @private\n   */\n  matchReceive({ status, response, _ref }) {\n    this.recHooks.filter((h) => h.status === status).forEach((h) => h.callback(response));\n  }\n  /**\n   * @private\n   */\n  cancelRefEvent() {\n    if (!this.refEvent) {\n      return;\n    }\n    this.channel.off(this.refEvent);\n  }\n  /**\n   * @private\n   */\n  cancelTimeout() {\n    clearTimeout(this.timeoutTimer);\n    this.timeoutTimer = null;\n  }\n  /**\n   * @private\n   */\n  startTimeout() {\n    if (this.timeoutTimer) {\n      this.cancelTimeout();\n    }\n    this.ref = this.channel.socket.makeRef();\n    this.refEvent = this.channel.replyEventName(this.ref);\n    this.channel.on(this.refEvent, (payload) => {\n      this.cancelRefEvent();\n      this.cancelTimeout();\n      this.receivedResp = payload;\n      this.matchReceive(payload);\n    });\n    this.timeoutTimer = setTimeout(() => {\n      this.trigger(\"timeout\", {});\n    }, this.timeout);\n  }\n  /**\n   * @private\n   */\n  hasReceived(status) {\n    return this.receivedResp && this.receivedResp.status === status;\n  }\n  /**\n   * @private\n   */\n  trigger(status, response) {\n    this.channel.trigger(this.refEvent, { status, response });\n  }\n};\n\n// js/phoenix/timer.js\nvar Timer = class {\n  constructor(callback, timerCalc) {\n    this.callback = callback;\n    this.timerCalc = timerCalc;\n    this.timer = null;\n    this.tries = 0;\n  }\n  reset() {\n    this.tries = 0;\n    clearTimeout(this.timer);\n  }\n  /**\n   * Cancels any previous scheduleTimeout and schedules callback\n   */\n  scheduleTimeout() {\n    clearTimeout(this.timer);\n    this.timer = setTimeout(() => {\n      this.tries = this.tries + 1;\n      this.callback();\n    }, this.timerCalc(this.tries + 1));\n  }\n};\n\n// js/phoenix/channel.js\nvar Channel = class {\n  constructor(topic, params, socket) {\n    this.state = CHANNEL_STATES.closed;\n    this.topic = topic;\n    this.params = closure(params || {});\n    this.socket = socket;\n    this.bindings = [];\n    this.bindingRef = 0;\n    this.timeout = this.socket.timeout;\n    this.joinedOnce = false;\n    this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n    this.pushBuffer = [];\n    this.stateChangeRefs = [];\n    this.rejoinTimer = new Timer(() => {\n      if (this.socket.isConnected()) {\n        this.rejoin();\n      }\n    }, this.socket.rejoinAfterMs);\n    this.stateChangeRefs.push(this.socket.onError(() => this.rejoinTimer.reset()));\n    this.stateChangeRefs.push(\n      this.socket.onOpen(() => {\n        this.rejoinTimer.reset();\n        if (this.isErrored()) {\n          this.rejoin();\n        }\n      })\n    );\n    this.joinPush.receive(\"ok\", () => {\n      this.state = CHANNEL_STATES.joined;\n      this.rejoinTimer.reset();\n      this.pushBuffer.forEach((pushEvent) => pushEvent.send());\n      this.pushBuffer = [];\n    });\n    this.joinPush.receive(\"error\", () => {\n      this.state = CHANNEL_STATES.errored;\n      if (this.socket.isConnected()) {\n        this.rejoinTimer.scheduleTimeout();\n      }\n    });\n    this.onClose(() => {\n      this.rejoinTimer.reset();\n      if (this.socket.hasLogger())\n        this.socket.log(\"channel\", `close ${this.topic} ${this.joinRef()}`);\n      this.state = CHANNEL_STATES.closed;\n      this.socket.remove(this);\n    });\n    this.onError((reason) => {\n      if (this.socket.hasLogger())\n        this.socket.log(\"channel\", `error ${this.topic}`, reason);\n      if (this.isJoining()) {\n        this.joinPush.reset();\n      }\n      this.state = CHANNEL_STATES.errored;\n      if (this.socket.isConnected()) {\n        this.rejoinTimer.scheduleTimeout();\n      }\n    });\n    this.joinPush.receive(\"timeout\", () => {\n      if (this.socket.hasLogger())\n        this.socket.log(\"channel\", `timeout ${this.topic} (${this.joinRef()})`, this.joinPush.timeout);\n      let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), this.timeout);\n      leavePush.send();\n      this.state = CHANNEL_STATES.errored;\n      this.joinPush.reset();\n      if (this.socket.isConnected()) {\n        this.rejoinTimer.scheduleTimeout();\n      }\n    });\n    this.on(CHANNEL_EVENTS.reply, (payload, ref) => {\n      this.trigger(this.replyEventName(ref), payload);\n    });\n  }\n  /**\n   * Join the channel\n   * @param {integer} timeout\n   * @returns {Push}\n   */\n  join(timeout = this.timeout) {\n    if (this.joinedOnce) {\n      throw new Error(\"tried to join multiple times. 'join' can only be called a single time per channel instance\");\n    } else {\n      this.timeout = timeout;\n      this.joinedOnce = true;\n      this.rejoin();\n      return this.joinPush;\n    }\n  }\n  /**\n   * Hook into channel close\n   * @param {Function} callback\n   */\n  onClose(callback) {\n    this.on(CHANNEL_EVENTS.close, callback);\n  }\n  /**\n   * Hook into channel errors\n   * @param {Function} callback\n   */\n  onError(callback) {\n    return this.on(CHANNEL_EVENTS.error, (reason) => callback(reason));\n  }\n  /**\n   * Subscribes on channel events\n   *\n   * Subscription returns a ref counter, which can be used later to\n   * unsubscribe the exact event listener\n   *\n   * @example\n   * const ref1 = channel.on(\"event\", do_stuff)\n   * const ref2 = channel.on(\"event\", do_other_stuff)\n   * channel.off(\"event\", ref1)\n   * // Since unsubscription, do_stuff won't fire,\n   * // while do_other_stuff will keep firing on the \"event\"\n   *\n   * @param {string} event\n   * @param {Function} callback\n   * @returns {integer} ref\n   */\n  on(event, callback) {\n    let ref = this.bindingRef++;\n    this.bindings.push({ event, ref, callback });\n    return ref;\n  }\n  /**\n   * Unsubscribes off of channel events\n   *\n   * Use the ref returned from a channel.on() to unsubscribe one\n   * handler, or pass nothing for the ref to unsubscribe all\n   * handlers for the given event.\n   *\n   * @example\n   * // Unsubscribe the do_stuff handler\n   * const ref1 = channel.on(\"event\", do_stuff)\n   * channel.off(\"event\", ref1)\n   *\n   * // Unsubscribe all handlers from event\n   * channel.off(\"event\")\n   *\n   * @param {string} event\n   * @param {integer} ref\n   */\n  off(event, ref) {\n    this.bindings = this.bindings.filter((bind) => {\n      return !(bind.event === event && (typeof ref === \"undefined\" || ref === bind.ref));\n    });\n  }\n  /**\n   * @private\n   */\n  canPush() {\n    return this.socket.isConnected() && this.isJoined();\n  }\n  /**\n   * Sends a message `event` to phoenix with the payload `payload`.\n   * Phoenix receives this in the `handle_in(event, payload, socket)`\n   * function. if phoenix replies or it times out (default 10000ms),\n   * then optionally the reply can be received.\n   *\n   * @example\n   * channel.push(\"event\")\n   *   .receive(\"ok\", payload => console.log(\"phoenix replied:\", payload))\n   *   .receive(\"error\", err => console.log(\"phoenix errored\", err))\n   *   .receive(\"timeout\", () => console.log(\"timed out pushing\"))\n   * @param {string} event\n   * @param {Object} payload\n   * @param {number} [timeout]\n   * @returns {Push}\n   */\n  push(event, payload, timeout = this.timeout) {\n    payload = payload || {};\n    if (!this.joinedOnce) {\n      throw new Error(`tried to push '${event}' to '${this.topic}' before joining. Use channel.join() before pushing events`);\n    }\n    let pushEvent = new Push(this, event, function() {\n      return payload;\n    }, timeout);\n    if (this.canPush()) {\n      pushEvent.send();\n    } else {\n      pushEvent.startTimeout();\n      this.pushBuffer.push(pushEvent);\n    }\n    return pushEvent;\n  }\n  /** Leaves the channel\n   *\n   * Unsubscribes from server events, and\n   * instructs channel to terminate on server\n   *\n   * Triggers onClose() hooks\n   *\n   * To receive leave acknowledgements, use the `receive`\n   * hook to bind to the server ack, ie:\n   *\n   * @example\n   * channel.leave().receive(\"ok\", () => alert(\"left!\") )\n   *\n   * @param {integer} timeout\n   * @returns {Push}\n   */\n  leave(timeout = this.timeout) {\n    this.rejoinTimer.reset();\n    this.joinPush.cancelTimeout();\n    this.state = CHANNEL_STATES.leaving;\n    let onClose = () => {\n      if (this.socket.hasLogger())\n        this.socket.log(\"channel\", `leave ${this.topic}`);\n      this.trigger(CHANNEL_EVENTS.close, \"leave\");\n    };\n    let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), timeout);\n    leavePush.receive(\"ok\", () => onClose()).receive(\"timeout\", () => onClose());\n    leavePush.send();\n    if (!this.canPush()) {\n      leavePush.trigger(\"ok\", {});\n    }\n    return leavePush;\n  }\n  /**\n   * Overridable message hook\n   *\n   * Receives all events for specialized message handling\n   * before dispatching to the channel callbacks.\n   *\n   * Must return the payload, modified or unmodified\n   * @param {string} event\n   * @param {Object} payload\n   * @param {integer} ref\n   * @returns {Object}\n   */\n  onMessage(_event, payload, _ref) {\n    return payload;\n  }\n  /**\n   * @private\n   */\n  isMember(topic, event, payload, joinRef) {\n    if (this.topic !== topic) {\n      return false;\n    }\n    if (joinRef && joinRef !== this.joinRef()) {\n      if (this.socket.hasLogger())\n        this.socket.log(\"channel\", \"dropping outdated message\", { topic, event, payload, joinRef });\n      return false;\n    } else {\n      return true;\n    }\n  }\n  /**\n   * @private\n   */\n  joinRef() {\n    return this.joinPush.ref;\n  }\n  /**\n   * @private\n   */\n  rejoin(timeout = this.timeout) {\n    if (this.isLeaving()) {\n      return;\n    }\n    this.socket.leaveOpenTopic(this.topic);\n    this.state = CHANNEL_STATES.joining;\n    this.joinPush.resend(timeout);\n  }\n  /**\n   * @private\n   */\n  trigger(event, payload, ref, joinRef) {\n    let handledPayload = this.onMessage(event, payload, ref, joinRef);\n    if (payload && !handledPayload) {\n      throw new Error(\"channel onMessage callbacks must return the payload, modified or unmodified\");\n    }\n    let eventBindings = this.bindings.filter((bind) => bind.event === event);\n    for (let i = 0; i < eventBindings.length; i++) {\n      let bind = eventBindings[i];\n      bind.callback(handledPayload, ref, joinRef || this.joinRef());\n    }\n  }\n  /**\n   * @private\n   */\n  replyEventName(ref) {\n    return `chan_reply_${ref}`;\n  }\n  /**\n   * @private\n   */\n  isClosed() {\n    return this.state === CHANNEL_STATES.closed;\n  }\n  /**\n   * @private\n   */\n  isErrored() {\n    return this.state === CHANNEL_STATES.errored;\n  }\n  /**\n   * @private\n   */\n  isJoined() {\n    return this.state === CHANNEL_STATES.joined;\n  }\n  /**\n   * @private\n   */\n  isJoining() {\n    return this.state === CHANNEL_STATES.joining;\n  }\n  /**\n   * @private\n   */\n  isLeaving() {\n    return this.state === CHANNEL_STATES.leaving;\n  }\n};\n\n// js/phoenix/ajax.js\nvar Ajax = class {\n  static request(method, endPoint, accept, body, timeout, ontimeout, callback) {\n    if (global.XDomainRequest) {\n      let req = new global.XDomainRequest();\n      return this.xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback);\n    } else {\n      let req = new global.XMLHttpRequest();\n      return this.xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback);\n    }\n  }\n  static xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback) {\n    req.timeout = timeout;\n    req.open(method, endPoint);\n    req.onload = () => {\n      let response = this.parseJSON(req.responseText);\n      callback && callback(response);\n    };\n    if (ontimeout) {\n      req.ontimeout = ontimeout;\n    }\n    req.onprogress = () => {\n    };\n    req.send(body);\n    return req;\n  }\n  static xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback) {\n    req.open(method, endPoint, true);\n    req.timeout = timeout;\n    req.setRequestHeader(\"Content-Type\", accept);\n    req.onerror = () => callback && callback(null);\n    req.onreadystatechange = () => {\n      if (req.readyState === XHR_STATES.complete && callback) {\n        let response = this.parseJSON(req.responseText);\n        callback(response);\n      }\n    };\n    if (ontimeout) {\n      req.ontimeout = ontimeout;\n    }\n    req.send(body);\n    return req;\n  }\n  static parseJSON(resp) {\n    if (!resp || resp === \"\") {\n      return null;\n    }\n    try {\n      return JSON.parse(resp);\n    } catch (e) {\n      console && console.log(\"failed to parse JSON response\", resp);\n      return null;\n    }\n  }\n  static serialize(obj, parentKey) {\n    let queryStr = [];\n    for (var key in obj) {\n      if (!Object.prototype.hasOwnProperty.call(obj, key)) {\n        continue;\n      }\n      let paramKey = parentKey ? `${parentKey}[${key}]` : key;\n      let paramVal = obj[key];\n      if (typeof paramVal === \"object\") {\n        queryStr.push(this.serialize(paramVal, paramKey));\n      } else {\n        queryStr.push(encodeURIComponent(paramKey) + \"=\" + encodeURIComponent(paramVal));\n      }\n    }\n    return queryStr.join(\"&\");\n  }\n  static appendParams(url, params) {\n    if (Object.keys(params).length === 0) {\n      return url;\n    }\n    let prefix = url.match(/\\?/) ? \"&\" : \"?\";\n    return `${url}${prefix}${this.serialize(params)}`;\n  }\n};\n\n// js/phoenix/longpoll.js\nvar arrayBufferToBase64 = (buffer) => {\n  let binary = \"\";\n  let bytes = new Uint8Array(buffer);\n  let len = bytes.byteLength;\n  for (let i = 0; i < len; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return btoa(binary);\n};\nvar LongPoll = class {\n  constructor(endPoint) {\n    this.endPoint = null;\n    this.token = null;\n    this.skipHeartbeat = true;\n    this.reqs = /* @__PURE__ */ new Set();\n    this.awaitingBatchAck = false;\n    this.currentBatch = null;\n    this.currentBatchTimer = null;\n    this.batchBuffer = [];\n    this.onopen = function() {\n    };\n    this.onerror = function() {\n    };\n    this.onmessage = function() {\n    };\n    this.onclose = function() {\n    };\n    this.pollEndpoint = this.normalizeEndpoint(endPoint);\n    this.readyState = SOCKET_STATES.connecting;\n    setTimeout(() => this.poll(), 0);\n  }\n  normalizeEndpoint(endPoint) {\n    return endPoint.replace(\"ws://\", \"http://\").replace(\"wss://\", \"https://\").replace(new RegExp(\"(.*)/\" + TRANSPORTS.websocket), \"$1/\" + TRANSPORTS.longpoll);\n  }\n  endpointURL() {\n    return Ajax.appendParams(this.pollEndpoint, { token: this.token });\n  }\n  closeAndRetry(code, reason, wasClean) {\n    this.close(code, reason, wasClean);\n    this.readyState = SOCKET_STATES.connecting;\n  }\n  ontimeout() {\n    this.onerror(\"timeout\");\n    this.closeAndRetry(1005, \"timeout\", false);\n  }\n  isActive() {\n    return this.readyState === SOCKET_STATES.open || this.readyState === SOCKET_STATES.connecting;\n  }\n  poll() {\n    this.ajax(\"GET\", \"application/json\", null, () => this.ontimeout(), (resp) => {\n      if (resp) {\n        var { status, token, messages } = resp;\n        this.token = token;\n      } else {\n        status = 0;\n      }\n      switch (status) {\n        case 200:\n          messages.forEach((msg) => {\n            setTimeout(() => this.onmessage({ data: msg }), 0);\n          });\n          this.poll();\n          break;\n        case 204:\n          this.poll();\n          break;\n        case 410:\n          this.readyState = SOCKET_STATES.open;\n          this.onopen({});\n          this.poll();\n          break;\n        case 403:\n          this.onerror(403);\n          this.close(1008, \"forbidden\", false);\n          break;\n        case 0:\n        case 500:\n          this.onerror(500);\n          this.closeAndRetry(1011, \"internal server error\", 500);\n          break;\n        default:\n          throw new Error(`unhandled poll status ${status}`);\n      }\n    });\n  }\n  // we collect all pushes within the current event loop by\n  // setTimeout 0, which optimizes back-to-back procedural\n  // pushes against an empty buffer\n  send(body) {\n    if (typeof body !== \"string\") {\n      body = arrayBufferToBase64(body);\n    }\n    if (this.currentBatch) {\n      this.currentBatch.push(body);\n    } else if (this.awaitingBatchAck) {\n      this.batchBuffer.push(body);\n    } else {\n      this.currentBatch = [body];\n      this.currentBatchTimer = setTimeout(() => {\n        this.batchSend(this.currentBatch);\n        this.currentBatch = null;\n      }, 0);\n    }\n  }\n  batchSend(messages) {\n    this.awaitingBatchAck = true;\n    this.ajax(\"POST\", \"application/x-ndjson\", messages.join(\"\\n\"), () => this.onerror(\"timeout\"), (resp) => {\n      this.awaitingBatchAck = false;\n      if (!resp || resp.status !== 200) {\n        this.onerror(resp && resp.status);\n        this.closeAndRetry(1011, \"internal server error\", false);\n      } else if (this.batchBuffer.length > 0) {\n        this.batchSend(this.batchBuffer);\n        this.batchBuffer = [];\n      }\n    });\n  }\n  close(code, reason, wasClean) {\n    for (let req of this.reqs) {\n      req.abort();\n    }\n    this.readyState = SOCKET_STATES.closed;\n    let opts = Object.assign({ code: 1e3, reason: void 0, wasClean: true }, { code, reason, wasClean });\n    this.batchBuffer = [];\n    clearTimeout(this.currentBatchTimer);\n    this.currentBatchTimer = null;\n    if (typeof CloseEvent !== \"undefined\") {\n      this.onclose(new CloseEvent(\"close\", opts));\n    } else {\n      this.onclose(opts);\n    }\n  }\n  ajax(method, contentType, body, onCallerTimeout, callback) {\n    let req;\n    let ontimeout = () => {\n      this.reqs.delete(req);\n      onCallerTimeout();\n    };\n    req = Ajax.request(method, this.endpointURL(), contentType, body, this.timeout, ontimeout, (resp) => {\n      this.reqs.delete(req);\n      if (this.isActive()) {\n        callback(resp);\n      }\n    });\n    this.reqs.add(req);\n  }\n};\n\n// js/phoenix/presence.js\nvar Presence = class {\n  constructor(channel, opts = {}) {\n    let events = opts.events || { state: \"presence_state\", diff: \"presence_diff\" };\n    this.state = {};\n    this.pendingDiffs = [];\n    this.channel = channel;\n    this.joinRef = null;\n    this.caller = {\n      onJoin: function() {\n      },\n      onLeave: function() {\n      },\n      onSync: function() {\n      }\n    };\n    this.channel.on(events.state, (newState) => {\n      let { onJoin, onLeave, onSync } = this.caller;\n      this.joinRef = this.channel.joinRef();\n      this.state = Presence.syncState(this.state, newState, onJoin, onLeave);\n      this.pendingDiffs.forEach((diff) => {\n        this.state = Presence.syncDiff(this.state, diff, onJoin, onLeave);\n      });\n      this.pendingDiffs = [];\n      onSync();\n    });\n    this.channel.on(events.diff, (diff) => {\n      let { onJoin, onLeave, onSync } = this.caller;\n      if (this.inPendingSyncState()) {\n        this.pendingDiffs.push(diff);\n      } else {\n        this.state = Presence.syncDiff(this.state, diff, onJoin, onLeave);\n        onSync();\n      }\n    });\n  }\n  onJoin(callback) {\n    this.caller.onJoin = callback;\n  }\n  onLeave(callback) {\n    this.caller.onLeave = callback;\n  }\n  onSync(callback) {\n    this.caller.onSync = callback;\n  }\n  list(by) {\n    return Presence.list(this.state, by);\n  }\n  inPendingSyncState() {\n    return !this.joinRef || this.joinRef !== this.channel.joinRef();\n  }\n  // lower-level public static API\n  /**\n   * Used to sync the list of presences on the server\n   * with the client's state. An optional `onJoin` and `onLeave` callback can\n   * be provided to react to changes in the client's local presences across\n   * disconnects and reconnects with the server.\n   *\n   * @returns {Presence}\n   */\n  static syncState(currentState, newState, onJoin, onLeave) {\n    let state = this.clone(currentState);\n    let joins = {};\n    let leaves = {};\n    this.map(state, (key, presence) => {\n      if (!newState[key]) {\n        leaves[key] = presence;\n      }\n    });\n    this.map(newState, (key, newPresence) => {\n      let currentPresence = state[key];\n      if (currentPresence) {\n        let newRefs = newPresence.metas.map((m) => m.phx_ref);\n        let curRefs = currentPresence.metas.map((m) => m.phx_ref);\n        let joinedMetas = newPresence.metas.filter((m) => curRefs.indexOf(m.phx_ref) < 0);\n        let leftMetas = currentPresence.metas.filter((m) => newRefs.indexOf(m.phx_ref) < 0);\n        if (joinedMetas.length > 0) {\n          joins[key] = newPresence;\n          joins[key].metas = joinedMetas;\n        }\n        if (leftMetas.length > 0) {\n          leaves[key] = this.clone(currentPresence);\n          leaves[key].metas = leftMetas;\n        }\n      } else {\n        joins[key] = newPresence;\n      }\n    });\n    return this.syncDiff(state, { joins, leaves }, onJoin, onLeave);\n  }\n  /**\n   *\n   * Used to sync a diff of presence join and leave\n   * events from the server, as they happen. Like `syncState`, `syncDiff`\n   * accepts optional `onJoin` and `onLeave` callbacks to react to a user\n   * joining or leaving from a device.\n   *\n   * @returns {Presence}\n   */\n  static syncDiff(state, diff, onJoin, onLeave) {\n    let { joins, leaves } = this.clone(diff);\n    if (!onJoin) {\n      onJoin = function() {\n      };\n    }\n    if (!onLeave) {\n      onLeave = function() {\n      };\n    }\n    this.map(joins, (key, newPresence) => {\n      let currentPresence = state[key];\n      state[key] = this.clone(newPresence);\n      if (currentPresence) {\n        let joinedRefs = state[key].metas.map((m) => m.phx_ref);\n        let curMetas = currentPresence.metas.filter((m) => joinedRefs.indexOf(m.phx_ref) < 0);\n        state[key].metas.unshift(...curMetas);\n      }\n      onJoin(key, currentPresence, newPresence);\n    });\n    this.map(leaves, (key, leftPresence) => {\n      let currentPresence = state[key];\n      if (!currentPresence) {\n        return;\n      }\n      let refsToRemove = leftPresence.metas.map((m) => m.phx_ref);\n      currentPresence.metas = currentPresence.metas.filter((p) => {\n        return refsToRemove.indexOf(p.phx_ref) < 0;\n      });\n      onLeave(key, currentPresence, leftPresence);\n      if (currentPresence.metas.length === 0) {\n        delete state[key];\n      }\n    });\n    return state;\n  }\n  /**\n   * Returns the array of presences, with selected metadata.\n   *\n   * @param {Object} presences\n   * @param {Function} chooser\n   *\n   * @returns {Presence}\n   */\n  static list(presences, chooser) {\n    if (!chooser) {\n      chooser = function(key, pres) {\n        return pres;\n      };\n    }\n    return this.map(presences, (key, presence) => {\n      return chooser(key, presence);\n    });\n  }\n  // private\n  static map(obj, func) {\n    return Object.getOwnPropertyNames(obj).map((key) => func(key, obj[key]));\n  }\n  static clone(obj) {\n    return JSON.parse(JSON.stringify(obj));\n  }\n};\n\n// js/phoenix/serializer.js\nvar serializer_default = {\n  HEADER_LENGTH: 1,\n  META_LENGTH: 4,\n  KINDS: { push: 0, reply: 1, broadcast: 2 },\n  encode(msg, callback) {\n    if (msg.payload.constructor === ArrayBuffer) {\n      return callback(this.binaryEncode(msg));\n    } else {\n      let payload = [msg.join_ref, msg.ref, msg.topic, msg.event, msg.payload];\n      return callback(JSON.stringify(payload));\n    }\n  },\n  decode(rawPayload, callback) {\n    if (rawPayload.constructor === ArrayBuffer) {\n      return callback(this.binaryDecode(rawPayload));\n    } else {\n      let [join_ref, ref, topic, event, payload] = JSON.parse(rawPayload);\n      return callback({ join_ref, ref, topic, event, payload });\n    }\n  },\n  // private\n  binaryEncode(message) {\n    let { join_ref, ref, event, topic, payload } = message;\n    let metaLength = this.META_LENGTH + join_ref.length + ref.length + topic.length + event.length;\n    let header = new ArrayBuffer(this.HEADER_LENGTH + metaLength);\n    let view = new DataView(header);\n    let offset = 0;\n    view.setUint8(offset++, this.KINDS.push);\n    view.setUint8(offset++, join_ref.length);\n    view.setUint8(offset++, ref.length);\n    view.setUint8(offset++, topic.length);\n    view.setUint8(offset++, event.length);\n    Array.from(join_ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));\n    Array.from(ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));\n    Array.from(topic, (char) => view.setUint8(offset++, char.charCodeAt(0)));\n    Array.from(event, (char) => view.setUint8(offset++, char.charCodeAt(0)));\n    var combined = new Uint8Array(header.byteLength + payload.byteLength);\n    combined.set(new Uint8Array(header), 0);\n    combined.set(new Uint8Array(payload), header.byteLength);\n    return combined.buffer;\n  },\n  binaryDecode(buffer) {\n    let view = new DataView(buffer);\n    let kind = view.getUint8(0);\n    let decoder = new TextDecoder();\n    switch (kind) {\n      case this.KINDS.push:\n        return this.decodePush(buffer, view, decoder);\n      case this.KINDS.reply:\n        return this.decodeReply(buffer, view, decoder);\n      case this.KINDS.broadcast:\n        return this.decodeBroadcast(buffer, view, decoder);\n    }\n  },\n  decodePush(buffer, view, decoder) {\n    let joinRefSize = view.getUint8(1);\n    let topicSize = view.getUint8(2);\n    let eventSize = view.getUint8(3);\n    let offset = this.HEADER_LENGTH + this.META_LENGTH - 1;\n    let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));\n    offset = offset + joinRefSize;\n    let topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n    offset = offset + topicSize;\n    let event = decoder.decode(buffer.slice(offset, offset + eventSize));\n    offset = offset + eventSize;\n    let data = buffer.slice(offset, buffer.byteLength);\n    return { join_ref: joinRef, ref: null, topic, event, payload: data };\n  },\n  decodeReply(buffer, view, decoder) {\n    let joinRefSize = view.getUint8(1);\n    let refSize = view.getUint8(2);\n    let topicSize = view.getUint8(3);\n    let eventSize = view.getUint8(4);\n    let offset = this.HEADER_LENGTH + this.META_LENGTH;\n    let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));\n    offset = offset + joinRefSize;\n    let ref = decoder.decode(buffer.slice(offset, offset + refSize));\n    offset = offset + refSize;\n    let topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n    offset = offset + topicSize;\n    let event = decoder.decode(buffer.slice(offset, offset + eventSize));\n    offset = offset + eventSize;\n    let data = buffer.slice(offset, buffer.byteLength);\n    let payload = { status: event, response: data };\n    return { join_ref: joinRef, ref, topic, event: CHANNEL_EVENTS.reply, payload };\n  },\n  decodeBroadcast(buffer, view, decoder) {\n    let topicSize = view.getUint8(1);\n    let eventSize = view.getUint8(2);\n    let offset = this.HEADER_LENGTH + 2;\n    let topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n    offset = offset + topicSize;\n    let event = decoder.decode(buffer.slice(offset, offset + eventSize));\n    offset = offset + eventSize;\n    let data = buffer.slice(offset, buffer.byteLength);\n    return { join_ref: null, ref: null, topic, event, payload: data };\n  }\n};\n\n// js/phoenix/socket.js\nvar Socket = class {\n  constructor(endPoint, opts = {}) {\n    this.stateChangeCallbacks = { open: [], close: [], error: [], message: [] };\n    this.channels = [];\n    this.sendBuffer = [];\n    this.ref = 0;\n    this.timeout = opts.timeout || DEFAULT_TIMEOUT;\n    this.transport = opts.transport || global.WebSocket || LongPoll;\n    this.primaryPassedHealthCheck = false;\n    this.longPollFallbackMs = opts.longPollFallbackMs;\n    this.fallbackTimer = null;\n    this.sessionStore = opts.sessionStorage || global && global.sessionStorage;\n    this.establishedConnections = 0;\n    this.defaultEncoder = serializer_default.encode.bind(serializer_default);\n    this.defaultDecoder = serializer_default.decode.bind(serializer_default);\n    this.closeWasClean = false;\n    this.binaryType = opts.binaryType || \"arraybuffer\";\n    this.connectClock = 1;\n    if (this.transport !== LongPoll) {\n      this.encode = opts.encode || this.defaultEncoder;\n      this.decode = opts.decode || this.defaultDecoder;\n    } else {\n      this.encode = this.defaultEncoder;\n      this.decode = this.defaultDecoder;\n    }\n    let awaitingConnectionOnPageShow = null;\n    if (phxWindow && phxWindow.addEventListener) {\n      phxWindow.addEventListener(\"pagehide\", (_e) => {\n        if (this.conn) {\n          this.disconnect();\n          awaitingConnectionOnPageShow = this.connectClock;\n        }\n      });\n      phxWindow.addEventListener(\"pageshow\", (_e) => {\n        if (awaitingConnectionOnPageShow === this.connectClock) {\n          awaitingConnectionOnPageShow = null;\n          this.connect();\n        }\n      });\n    }\n    this.heartbeatIntervalMs = opts.heartbeatIntervalMs || 3e4;\n    this.rejoinAfterMs = (tries) => {\n      if (opts.rejoinAfterMs) {\n        return opts.rejoinAfterMs(tries);\n      } else {\n        return [1e3, 2e3, 5e3][tries - 1] || 1e4;\n      }\n    };\n    this.reconnectAfterMs = (tries) => {\n      if (opts.reconnectAfterMs) {\n        return opts.reconnectAfterMs(tries);\n      } else {\n        return [10, 50, 100, 150, 200, 250, 500, 1e3, 2e3][tries - 1] || 5e3;\n      }\n    };\n    this.logger = opts.logger || null;\n    if (!this.logger && opts.debug) {\n      this.logger = (kind, msg, data) => {\n        console.log(`${kind}: ${msg}`, data);\n      };\n    }\n    this.longpollerTimeout = opts.longpollerTimeout || 2e4;\n    this.params = closure(opts.params || {});\n    this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;\n    this.vsn = opts.vsn || DEFAULT_VSN;\n    this.heartbeatTimeoutTimer = null;\n    this.heartbeatTimer = null;\n    this.pendingHeartbeatRef = null;\n    this.reconnectTimer = new Timer(() => {\n      this.teardown(() => this.connect());\n    }, this.reconnectAfterMs);\n  }\n  /**\n   * Returns the LongPoll transport reference\n   */\n  getLongPollTransport() {\n    return LongPoll;\n  }\n  /**\n   * Disconnects and replaces the active transport\n   *\n   * @param {Function} newTransport - The new transport class to instantiate\n   *\n   */\n  replaceTransport(newTransport) {\n    this.connectClock++;\n    this.closeWasClean = true;\n    clearTimeout(this.fallbackTimer);\n    this.reconnectTimer.reset();\n    if (this.conn) {\n      this.conn.close();\n      this.conn = null;\n    }\n    this.transport = newTransport;\n  }\n  /**\n   * Returns the socket protocol\n   *\n   * @returns {string}\n   */\n  protocol() {\n    return location.protocol.match(/^https/) ? \"wss\" : \"ws\";\n  }\n  /**\n   * The fully qualified socket url\n   *\n   * @returns {string}\n   */\n  endPointURL() {\n    let uri = Ajax.appendParams(\n      Ajax.appendParams(this.endPoint, this.params()),\n      { vsn: this.vsn }\n    );\n    if (uri.charAt(0) !== \"/\") {\n      return uri;\n    }\n    if (uri.charAt(1) === \"/\") {\n      return `${this.protocol()}:${uri}`;\n    }\n    return `${this.protocol()}://${location.host}${uri}`;\n  }\n  /**\n   * Disconnects the socket\n   *\n   * See https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes for valid status codes.\n   *\n   * @param {Function} callback - Optional callback which is called after socket is disconnected.\n   * @param {integer} code - A status code for disconnection (Optional).\n   * @param {string} reason - A textual description of the reason to disconnect. (Optional)\n   */\n  disconnect(callback, code, reason) {\n    this.connectClock++;\n    this.closeWasClean = true;\n    clearTimeout(this.fallbackTimer);\n    this.reconnectTimer.reset();\n    this.teardown(callback, code, reason);\n  }\n  /**\n   *\n   * @param {Object} params - The params to send when connecting, for example `{user_id: userToken}`\n   *\n   * Passing params to connect is deprecated; pass them in the Socket constructor instead:\n   * `new Socket(\"/socket\", {params: {user_id: userToken}})`.\n   */\n  connect(params) {\n    if (params) {\n      console && console.log(\"passing params to connect is deprecated. Instead pass :params to the Socket constructor\");\n      this.params = closure(params);\n    }\n    if (this.conn) {\n      return;\n    }\n    if (this.longPollFallbackMs && this.transport !== LongPoll) {\n      this.connectWithFallback(LongPoll, this.longPollFallbackMs);\n    } else {\n      this.transportConnect();\n    }\n  }\n  /**\n   * Logs the message. Override `this.logger` for specialized logging. noops by default\n   * @param {string} kind\n   * @param {string} msg\n   * @param {Object} data\n   */\n  log(kind, msg, data) {\n    this.logger && this.logger(kind, msg, data);\n  }\n  /**\n   * Returns true if a logger has been set on this socket.\n   */\n  hasLogger() {\n    return this.logger !== null;\n  }\n  /**\n   * Registers callbacks for connection open events\n   *\n   * @example socket.onOpen(function(){ console.info(\"the socket was opened\") })\n   *\n   * @param {Function} callback\n   */\n  onOpen(callback) {\n    let ref = this.makeRef();\n    this.stateChangeCallbacks.open.push([ref, callback]);\n    return ref;\n  }\n  /**\n   * Registers callbacks for connection close events\n   * @param {Function} callback\n   */\n  onClose(callback) {\n    let ref = this.makeRef();\n    this.stateChangeCallbacks.close.push([ref, callback]);\n    return ref;\n  }\n  /**\n   * Registers callbacks for connection error events\n   *\n   * @example socket.onError(function(error){ alert(\"An error occurred\") })\n   *\n   * @param {Function} callback\n   */\n  onError(callback) {\n    let ref = this.makeRef();\n    this.stateChangeCallbacks.error.push([ref, callback]);\n    return ref;\n  }\n  /**\n   * Registers callbacks for connection message events\n   * @param {Function} callback\n   */\n  onMessage(callback) {\n    let ref = this.makeRef();\n    this.stateChangeCallbacks.message.push([ref, callback]);\n    return ref;\n  }\n  /**\n   * Pings the server and invokes the callback with the RTT in milliseconds\n   * @param {Function} callback\n   *\n   * Returns true if the ping was pushed or false if unable to be pushed.\n   */\n  ping(callback) {\n    if (!this.isConnected()) {\n      return false;\n    }\n    let ref = this.makeRef();\n    let startTime = Date.now();\n    this.push({ topic: \"phoenix\", event: \"heartbeat\", payload: {}, ref });\n    let onMsgRef = this.onMessage((msg) => {\n      if (msg.ref === ref) {\n        this.off([onMsgRef]);\n        callback(Date.now() - startTime);\n      }\n    });\n    return true;\n  }\n  /**\n   * @private\n   */\n  transportConnect() {\n    this.connectClock++;\n    this.closeWasClean = false;\n    this.conn = new this.transport(this.endPointURL());\n    this.conn.binaryType = this.binaryType;\n    this.conn.timeout = this.longpollerTimeout;\n    this.conn.onopen = () => this.onConnOpen();\n    this.conn.onerror = (error) => this.onConnError(error);\n    this.conn.onmessage = (event) => this.onConnMessage(event);\n    this.conn.onclose = (event) => this.onConnClose(event);\n  }\n  getSession(key) {\n    return this.sessionStore && this.sessionStore.getItem(key);\n  }\n  storeSession(key, val) {\n    this.sessionStore && this.sessionStore.setItem(key, val);\n  }\n  connectWithFallback(fallbackTransport, fallbackThreshold = 2500) {\n    clearTimeout(this.fallbackTimer);\n    let established = false;\n    let primaryTransport = true;\n    let openRef, errorRef;\n    let fallback = (reason) => {\n      this.log(\"transport\", `falling back to ${fallbackTransport.name}...`, reason);\n      this.off([openRef, errorRef]);\n      primaryTransport = false;\n      this.replaceTransport(fallbackTransport);\n      this.transportConnect();\n    };\n    if (this.getSession(`phx:fallback:${fallbackTransport.name}`)) {\n      return fallback(\"memorized\");\n    }\n    this.fallbackTimer = setTimeout(fallback, fallbackThreshold);\n    errorRef = this.onError((reason) => {\n      this.log(\"transport\", \"error\", reason);\n      if (primaryTransport && !established) {\n        clearTimeout(this.fallbackTimer);\n        fallback(reason);\n      }\n    });\n    this.onOpen(() => {\n      established = true;\n      if (!primaryTransport) {\n        if (!this.primaryPassedHealthCheck) {\n          this.storeSession(`phx:fallback:${fallbackTransport.name}`, \"true\");\n        }\n        return this.log(\"transport\", `established ${fallbackTransport.name} fallback`);\n      }\n      clearTimeout(this.fallbackTimer);\n      this.fallbackTimer = setTimeout(fallback, fallbackThreshold);\n      this.ping((rtt) => {\n        this.log(\"transport\", \"connected to primary after\", rtt);\n        this.primaryPassedHealthCheck = true;\n        clearTimeout(this.fallbackTimer);\n      });\n    });\n    this.transportConnect();\n  }\n  clearHeartbeats() {\n    clearTimeout(this.heartbeatTimer);\n    clearTimeout(this.heartbeatTimeoutTimer);\n  }\n  onConnOpen() {\n    if (this.hasLogger())\n      this.log(\"transport\", `${this.transport.name} connected to ${this.endPointURL()}`);\n    this.closeWasClean = false;\n    this.establishedConnections++;\n    this.flushSendBuffer();\n    this.reconnectTimer.reset();\n    this.resetHeartbeat();\n    this.stateChangeCallbacks.open.forEach(([, callback]) => callback());\n  }\n  /**\n   * @private\n   */\n  heartbeatTimeout() {\n    if (this.pendingHeartbeatRef) {\n      this.pendingHeartbeatRef = null;\n      if (this.hasLogger()) {\n        this.log(\"transport\", \"heartbeat timeout. Attempting to re-establish connection\");\n      }\n      this.triggerChanError();\n      this.closeWasClean = false;\n      this.teardown(() => this.reconnectTimer.scheduleTimeout(), WS_CLOSE_NORMAL, \"heartbeat timeout\");\n    }\n  }\n  resetHeartbeat() {\n    if (this.conn && this.conn.skipHeartbeat) {\n      return;\n    }\n    this.pendingHeartbeatRef = null;\n    this.clearHeartbeats();\n    this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);\n  }\n  teardown(callback, code, reason) {\n    if (!this.conn) {\n      return callback && callback();\n    }\n    this.waitForBufferDone(() => {\n      if (this.conn) {\n        if (code) {\n          this.conn.close(code, reason || \"\");\n        } else {\n          this.conn.close();\n        }\n      }\n      this.waitForSocketClosed(() => {\n        if (this.conn) {\n          this.conn.onopen = function() {\n          };\n          this.conn.onerror = function() {\n          };\n          this.conn.onmessage = function() {\n          };\n          this.conn.onclose = function() {\n          };\n          this.conn = null;\n        }\n        callback && callback();\n      });\n    });\n  }\n  waitForBufferDone(callback, tries = 1) {\n    if (tries === 5 || !this.conn || !this.conn.bufferedAmount) {\n      callback();\n      return;\n    }\n    setTimeout(() => {\n      this.waitForBufferDone(callback, tries + 1);\n    }, 150 * tries);\n  }\n  waitForSocketClosed(callback, tries = 1) {\n    if (tries === 5 || !this.conn || this.conn.readyState === SOCKET_STATES.closed) {\n      callback();\n      return;\n    }\n    setTimeout(() => {\n      this.waitForSocketClosed(callback, tries + 1);\n    }, 150 * tries);\n  }\n  onConnClose(event) {\n    let closeCode = event && event.code;\n    if (this.hasLogger())\n      this.log(\"transport\", \"close\", event);\n    this.triggerChanError();\n    this.clearHeartbeats();\n    if (!this.closeWasClean && closeCode !== 1e3) {\n      this.reconnectTimer.scheduleTimeout();\n    }\n    this.stateChangeCallbacks.close.forEach(([, callback]) => callback(event));\n  }\n  /**\n   * @private\n   */\n  onConnError(error) {\n    if (this.hasLogger())\n      this.log(\"transport\", error);\n    let transportBefore = this.transport;\n    let establishedBefore = this.establishedConnections;\n    this.stateChangeCallbacks.error.forEach(([, callback]) => {\n      callback(error, transportBefore, establishedBefore);\n    });\n    if (transportBefore === this.transport || establishedBefore > 0) {\n      this.triggerChanError();\n    }\n  }\n  /**\n   * @private\n   */\n  triggerChanError() {\n    this.channels.forEach((channel) => {\n      if (!(channel.isErrored() || channel.isLeaving() || channel.isClosed())) {\n        channel.trigger(CHANNEL_EVENTS.error);\n      }\n    });\n  }\n  /**\n   * @returns {string}\n   */\n  connectionState() {\n    switch (this.conn && this.conn.readyState) {\n      case SOCKET_STATES.connecting:\n        return \"connecting\";\n      case SOCKET_STATES.open:\n        return \"open\";\n      case SOCKET_STATES.closing:\n        return \"closing\";\n      default:\n        return \"closed\";\n    }\n  }\n  /**\n   * @returns {boolean}\n   */\n  isConnected() {\n    return this.connectionState() === \"open\";\n  }\n  /**\n   * @private\n   *\n   * @param {Channel}\n   */\n  remove(channel) {\n    this.off(channel.stateChangeRefs);\n    this.channels = this.channels.filter((c) => c !== channel);\n  }\n  /**\n   * Removes `onOpen`, `onClose`, `onError,` and `onMessage` registrations.\n   *\n   * @param {refs} - list of refs returned by calls to\n   *                 `onOpen`, `onClose`, `onError,` and `onMessage`\n   */\n  off(refs) {\n    for (let key in this.stateChangeCallbacks) {\n      this.stateChangeCallbacks[key] = this.stateChangeCallbacks[key].filter(([ref]) => {\n        return refs.indexOf(ref) === -1;\n      });\n    }\n  }\n  /**\n   * Initiates a new channel for the given topic\n   *\n   * @param {string} topic\n   * @param {Object} chanParams - Parameters for the channel\n   * @returns {Channel}\n   */\n  channel(topic, chanParams = {}) {\n    let chan = new Channel(topic, chanParams, this);\n    this.channels.push(chan);\n    return chan;\n  }\n  /**\n   * @param {Object} data\n   */\n  push(data) {\n    if (this.hasLogger()) {\n      let { topic, event, payload, ref, join_ref } = data;\n      this.log(\"push\", `${topic} ${event} (${join_ref}, ${ref})`, payload);\n    }\n    if (this.isConnected()) {\n      this.encode(data, (result) => this.conn.send(result));\n    } else {\n      this.sendBuffer.push(() => this.encode(data, (result) => this.conn.send(result)));\n    }\n  }\n  /**\n   * Return the next message ref, accounting for overflows\n   * @returns {string}\n   */\n  makeRef() {\n    let newRef = this.ref + 1;\n    if (newRef === this.ref) {\n      this.ref = 0;\n    } else {\n      this.ref = newRef;\n    }\n    return this.ref.toString();\n  }\n  sendHeartbeat() {\n    if (this.pendingHeartbeatRef && !this.isConnected()) {\n      return;\n    }\n    this.pendingHeartbeatRef = this.makeRef();\n    this.push({ topic: \"phoenix\", event: \"heartbeat\", payload: {}, ref: this.pendingHeartbeatRef });\n    this.heartbeatTimeoutTimer = setTimeout(() => this.heartbeatTimeout(), this.heartbeatIntervalMs);\n  }\n  flushSendBuffer() {\n    if (this.isConnected() && this.sendBuffer.length > 0) {\n      this.sendBuffer.forEach((callback) => callback());\n      this.sendBuffer = [];\n    }\n  }\n  onConnMessage(rawMessage) {\n    this.decode(rawMessage.data, (msg) => {\n      let { topic, event, payload, ref, join_ref } = msg;\n      if (ref && ref === this.pendingHeartbeatRef) {\n        this.clearHeartbeats();\n        this.pendingHeartbeatRef = null;\n        this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);\n      }\n      if (this.hasLogger())\n        this.log(\"receive\", `${payload.status || \"\"} ${topic} ${event} ${ref && \"(\" + ref + \")\" || \"\"}`, payload);\n      for (let i = 0; i < this.channels.length; i++) {\n        const channel = this.channels[i];\n        if (!channel.isMember(topic, event, payload, join_ref)) {\n          continue;\n        }\n        channel.trigger(event, payload, ref, join_ref);\n      }\n      for (let i = 0; i < this.stateChangeCallbacks.message.length; i++) {\n        let [, callback] = this.stateChangeCallbacks.message[i];\n        callback(msg);\n      }\n    });\n  }\n  leaveOpenTopic(topic) {\n    let dupChannel = this.channels.find((c) => c.topic === topic && (c.isJoined() || c.isJoining()));\n    if (dupChannel) {\n      if (this.hasLogger())\n        this.log(\"transport\", `leaving duplicate topic \"${topic}\"`);\n      dupChannel.leave();\n    }\n  }\n};\nexport {\n  Channel,\n  LongPoll,\n  Presence,\n  serializer_default as Serializer,\n  Socket\n};\n//# sourceMappingURL=phoenix.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","import React from \"react\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport SocketProvider from \"./context/socket/SocketProvider\";\nimport { StoreProvider } from \"./context/store/StoreProvider\";\nimport * as Utils from './utils/index';\n\nconst SariskaCollaborativeAnnotation = (props) => {\n  \n  return (\n    <StoreProvider>\n      <SocketProvider>\n        <App {...props} />\n      </SocketProvider>\n    </StoreProvider>\n  )\n}\n\nexport {Utils};\nexport default SariskaCollaborativeAnnotation;"],"names":["React","useRef","useState","CreateChannel","UseEventHandler","DrawingBoard","useStore","setRoom","setUser","SET_ROOM","SET_USER","getRoomName","onDraw","onDrawCircle","onDrawEmoji","setAllRemoteTextBoxes","ANNOTATION_TOOLS","App","props","messages","setMessages","loading","setLoading","canvasRef","canvasCtx","setCanvasCtx","remoteTextboxes","setRemoteTextboxes","roomName","users","dispatch","rtcChannel","message","console","info","response","room","user","userDetails","id","name","roomDetails","session_id","created_by","inserted_at","log","content","JSON","parse","ctx","Object","keys","length","annotationTool","pen","circle","width","height","textbox","emojis","pushMessage","channel","new_message","created_by_name","x","y","push","createElement","inputProps","useContext","useEffect","SocketContext","topic","params","arguments","undefined","socket","setChannel","ch","join","receive","leave","getCanvasPosition","redraw","Annotation","_ref","currentTool","zIndex","otherProps","drawing","setDrawing","paths","setPaths","currentPath","setCurrentPath","setEmojis","circles","setCircles","currentCircle","setCurrentCircle","annotation","setAnnotation","canvas","current","context","getContext","handleResize","window","addEventListener","removeEventListener","startDrawing","e","offsetX","offsetY","startXPercent","startYPercent","beginPath","moveTo","centerXPercent","centerYPercent","radius","prev","Array","isArray","type","stringify","draw","lineTo","strokeStyle","lineWidth","stroke","xPercent","yPercent","prevPath","radiusPercent","Math","sqrt","pow","prevCircle","map","item","stopDrawing","closePath","prevPaths","prevCircles","filter","placeEmoji","prevEmojis","emoji","ref","style","background","position","top","left","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","useOnDraw","useOnEmoji","useOnCircle","useOnTextBox","makeStyles","Canvas","children","canvasStyle","Fragment","SARISKA_API_KEY","process","env","REACT_APP_SARISKA_MEET_APP_API_KEY","MESSAGING_API_SERVICE_HOST","REACT_APP_API_SERVICE_HOST","WEB_SOCKET_URL","REACT_APP_WEBSOCKET_SERVICE_HOST","SARISKA_WEBSITE","SARISKA_COMPANY_NAME","GENERATE_TOKEN_URL","COMPANY_NAME","GET_PRESIGNED_URL","createContext","getToken","getUserId","getUserName","Socket","SocketProvider","setSocket","userName","userId","fetchData","token","s","onOpen","onError","onClose","connect","disconnect","Provider","value","StoreContext","useReducer","initialContextState","rootReducer","StoreProvider","state","rooms","event","handler","handle","on","off","calculateCircleRadius","clearCanvas","computePointInCanvas","redrawAnnotations","annotations","setAnnotations","startPointRef","isDrawingRef","mouseMoveListenerRef","mouseUpListenerRef","parentCanvasRef","initMouseMoveListener","mouseMoveListener","currentPoint","clientX","clientY","startPoint","center","initMouseUpListener","mouseUpListener","removeMouseEventListeners","isParticipantAccess","isModerator","isCanvasClear","setCanvasRef","point","canvasSize","setCanvasSize","prevPointRef","newWidth","newHeight","scaleX","scaleY","scaledPaths","path","scaledCircles","min","scaledEmojis","getBoundingClientRect","prevPoint","isImageSaved","saveImage","isModeratorLocal","useCallback","prevCtx","emojiType","measureText","textboxes","setTextboxes","handleCanvasClick","rect","newTextbox","Date","now","text","handleTextChange","newText","target","prevTextboxes","textMetrics","max","renderAction","payload","getRoom","GET_ROOM","GET_USER","getUser","initialState","initialStateRoom","initialStateUser","roomReducer","userReducer","action","localStorage","getItem","setItem","storedUserId","characters","generateString","result","charactersLength","i","charAt","floor","random","trim","storedUserName","str","strArr","match","getRoomId","storedRoomId","roomId","storedRoomName","username","body","method","headers","apiKey","fetch","ok","json","status","error","clearRect","drawLine","end","start","color","_start","fillStyle","arc","PI","fill","data","lineColor","font","textBaseline","textAlign","forEach","_ref2","fillText","_ref3","refCurrent","boundingRect","startPos","currentPos","maxWidth","words","split","line","word","index","testLine","testWidth","getAllRemoteTextBoxes","allRemoteTextBoxes","remoteTextbox","some","_ref4","annotationTools","initializeAnnotation","drawAnnotation","stopAnnotation","startX","startY","centerX","centerY","Utils","SariskaCollaborativeAnnotation"],"sourceRoot":""}